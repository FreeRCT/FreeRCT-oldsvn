<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.8"/>
<title>FreeRCT: viewport.cpp Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">FreeRCT
   </div>
   <div id="projectbrief">Build roller coasters, get rich.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.8 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">viewport.cpp</div>  </div>
</div><!--header-->
<div class="contents">
<a href="viewport_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">/* $Id$ */</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;</div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment">/*</span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment"> * This file is part of FreeRCT.</span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment"> * FreeRCT is free software; you can redistribute it and/or modify it under the terms of the GNU General Public License as published by the Free Software Foundation, version 2.</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment"> * FreeRCT is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.</span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment"> * See the GNU General Public License for more details. You should have received a copy of the GNU General Public License along with FreeRCT. If not, see &lt;http://www.gnu.org/licenses/&gt;.</span></div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;</div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="stdafx_8h.html">stdafx.h</a>&quot;</span></div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="math__func_8h.html">math_func.h</a>&quot;</span></div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="viewport_8h.html">viewport.h</a>&quot;</span></div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="map_8h.html">map.h</a>&quot;</span></div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="video_8h.html">video.h</a>&quot;</span></div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="palette_8h.html">palette.h</a>&quot;</span></div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="sprite__store_8h.html">sprite_store.h</a>&quot;</span></div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="sprite__data_8h.html">sprite_data.h</a>&quot;</span></div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="path__build_8h.html">path_build.h</a>&quot;</span></div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="shop__placement_8h.html">shop_placement.h</a>&quot;</span></div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="coaster__build_8h.html">coaster_build.h</a>&quot;</span></div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="shop__type_8h.html">shop_type.h</a>&quot;</span></div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="terraform_8h.html">terraform.h</a>&quot;</span></div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="select__mode_8h.html">select_mode.h</a>&quot;</span></div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="person_8h.html">person.h</a>&quot;</span></div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="weather_8h.html">weather.h</a>&quot;</span></div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="preprocessor">#include &quot;fence.h&quot;</span></div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="fence__build_8h.html">fence_build.h</a>&quot;</span></div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;</div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;<span class="preprocessor">#include &lt;set&gt;</span></div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;</div>
<div class="line"><a name="l00095"></a><span class="lineno"><a class="line" href="viewport_8cpp.html#a072daf482c5a3aaf1d74d62e5dc91bad">   95</a></span>&#160;<a class="code" href="classWorldAdditions.html">WorldAdditions</a> <a class="code" href="viewport_8cpp.html#a072daf482c5a3aaf1d74d62e5dc91bad">_additions</a>;</div>
<div class="line"><a name="l00096"></a><span class="lineno"><a class="line" href="viewport_8h.html#a5801ceed6ab2a98de5e940a6044e43dd">   96</a></span>&#160;<a class="code" href="classMouseModes.html">MouseModes</a> <a class="code" href="viewport_8cpp.html#a5801ceed6ab2a98de5e940a6044e43dd">_mouse_modes</a>; </div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;</div>
<div class="line"><a name="l00098"></a><span class="lineno"><a class="line" href="viewport_8cpp.html#a9b7e01edb9a807eb45fdad0463b855db">   98</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">int</span> <a class="code" href="viewport_8cpp.html#a9b7e01edb9a807eb45fdad0463b855db">ADDITIONS_TIMEOUT_LENGTH</a> = 15; </div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;</div>
<div class="line"><a name="l00101"></a><span class="lineno"><a class="line" href="viewport_8h.html#a9be328b0aed7cb38eacde5f17ba5cbf1">  101</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="viewport_8cpp.html#a9be328b0aed7cb38eacde5f17ba5cbf1">EnableWorldAdditions</a>()</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;{</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;        <a class="code" href="classViewport.html">Viewport</a> *vp = <a class="code" href="viewport_8cpp.html#a168b8e1038efc200816524bab3092311">GetViewport</a>();</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;        <span class="keywordflow">if</span> (vp != <span class="keyword">nullptr</span>) vp-&gt;<a class="code" href="classViewport.html#acf62487474e985c772ac2d98dd2e66b9">EnableWorldAdditions</a>();</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;}</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;</div>
<div class="line"><a name="l00108"></a><span class="lineno"><a class="line" href="viewport_8h.html#a63a12422f3f3b0720f0a603872b54a02">  108</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="viewport_8cpp.html#a63a12422f3f3b0720f0a603872b54a02">DisableWorldAdditions</a>()</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;{</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;        <a class="code" href="classViewport.html">Viewport</a> *vp = <a class="code" href="viewport_8cpp.html#a168b8e1038efc200816524bab3092311">GetViewport</a>();</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;        <span class="keywordflow">if</span> (vp != <span class="keyword">nullptr</span>) vp-&gt;<a class="code" href="classViewport.html#a8f6f78564c1b7397703ce96eb6ea2145">DisableWorldAdditions</a>();</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;}</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;</div>
<div class="line"><a name="l00122"></a><span class="lineno"><a class="line" href="viewport_8cpp.html#adc21e3bb272d935ad38dd52bd0c03974">  122</a></span>&#160;<span class="keyword">static</span> <span class="keyword">inline</span> <a class="code" href="stdafx_8h.html#a43d43196463bde49cb067f5c20ab8481">int32</a> <a class="code" href="viewport_8cpp.html#adc21e3bb272d935ad38dd52bd0c03974">ComputeXFunction</a>(<a class="code" href="stdafx_8h.html#a43d43196463bde49cb067f5c20ab8481">int32</a> x, <a class="code" href="stdafx_8h.html#a43d43196463bde49cb067f5c20ab8481">int32</a> y, <a class="code" href="group__map__group.html#gabad48584a1852521ff578b647f07fdd3">ViewOrientation</a> orient, <a class="code" href="stdafx_8h.html#a05f6b0ae8f6a6e135b0e290c25fe0e4e">uint16</a> <a class="code" href="classClippedRectangle.html#a26baabc348d1f4636f6bf359b7948faf">width</a>)</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;{</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;        <span class="keywordflow">switch</span> (orient) {</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;                <span class="keywordflow">case</span> <a class="code" href="group__map__group.html#ggabad48584a1852521ff578b647f07fdd3a555bd255b7d0fb03bd8e272ee595b49b">VOR_NORTH</a>: <span class="keywordflow">return</span> ((y - x)  * width / 2) &gt;&gt; 8;</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;                <span class="keywordflow">case</span> <a class="code" href="group__map__group.html#ggabad48584a1852521ff578b647f07fdd3a5ff3ccca79a685ddc61d0a8739d73ed1">VOR_WEST</a>:  <span class="keywordflow">return</span> (-(x + y) * width / 2) &gt;&gt; 8;</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;                <span class="keywordflow">case</span> <a class="code" href="group__map__group.html#ggabad48584a1852521ff578b647f07fdd3ae07f82bd43e8d66a7394d5ebf0f47c39">VOR_SOUTH</a>: <span class="keywordflow">return</span> ((x - y)  * width / 2) &gt;&gt; 8;</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;                <span class="keywordflow">case</span> <a class="code" href="group__map__group.html#ggabad48584a1852521ff578b647f07fdd3ab9f340d6a90130e2bcc75d5be2af447e">VOR_EAST</a>:  <span class="keywordflow">return</span> ((x + y)  * width / 2) &gt;&gt; 8;</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;                <span class="keywordflow">default</span>: <a class="code" href="stdafx_8h.html#a6c2edf1e500e498b687567418bf4fef6">NOT_REACHED</a>();</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;        }</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;}</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;</div>
<div class="line"><a name="l00143"></a><span class="lineno"><a class="line" href="viewport_8cpp.html#a05568a347fb205b4a83b7c4b02ec518d">  143</a></span>&#160;<span class="keyword">static</span> <span class="keyword">inline</span> <a class="code" href="stdafx_8h.html#a43d43196463bde49cb067f5c20ab8481">int32</a> <a class="code" href="viewport_8cpp.html#a05568a347fb205b4a83b7c4b02ec518d">ComputeYFunction</a>(<a class="code" href="stdafx_8h.html#a43d43196463bde49cb067f5c20ab8481">int32</a> x, <a class="code" href="stdafx_8h.html#a43d43196463bde49cb067f5c20ab8481">int32</a> y, <a class="code" href="stdafx_8h.html#a43d43196463bde49cb067f5c20ab8481">int32</a> z, <a class="code" href="group__map__group.html#gabad48584a1852521ff578b647f07fdd3">ViewOrientation</a> orient, <a class="code" href="stdafx_8h.html#a05f6b0ae8f6a6e135b0e290c25fe0e4e">uint16</a> <a class="code" href="classClippedRectangle.html#a26baabc348d1f4636f6bf359b7948faf">width</a>, <a class="code" href="stdafx_8h.html#a05f6b0ae8f6a6e135b0e290c25fe0e4e">uint16</a> <a class="code" href="classClippedRectangle.html#a31c5e78c2bd6cb9ddd304c1774b8d258">height</a>)</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;{</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;        <span class="keywordflow">switch</span> (orient) {</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;                <span class="keywordflow">case</span> <a class="code" href="group__map__group.html#ggabad48584a1852521ff578b647f07fdd3a555bd255b7d0fb03bd8e272ee595b49b">VOR_NORTH</a>: <span class="keywordflow">return</span> ((x + y)  * width / 4 - z * height) &gt;&gt; 8;</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;                <span class="keywordflow">case</span> <a class="code" href="group__map__group.html#ggabad48584a1852521ff578b647f07fdd3a5ff3ccca79a685ddc61d0a8739d73ed1">VOR_WEST</a>:  <span class="keywordflow">return</span> ((y - x)  * width / 4 - z * height) &gt;&gt; 8;</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;                <span class="keywordflow">case</span> <a class="code" href="group__map__group.html#ggabad48584a1852521ff578b647f07fdd3ae07f82bd43e8d66a7394d5ebf0f47c39">VOR_SOUTH</a>: <span class="keywordflow">return</span> (-(x + y) * width / 4 - z * height) &gt;&gt; 8;</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;                <span class="keywordflow">case</span> <a class="code" href="group__map__group.html#ggabad48584a1852521ff578b647f07fdd3ab9f340d6a90130e2bcc75d5be2af447e">VOR_EAST</a>:  <span class="keywordflow">return</span> ((x - y)  * width / 4 - z * height) &gt;&gt; 8;</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;                <span class="keywordflow">default</span>: <a class="code" href="stdafx_8h.html#a6c2edf1e500e498b687567418bf4fef6">NOT_REACHED</a>();</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;        }</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;}</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;</div>
<div class="line"><a name="l00158"></a><span class="lineno"><a class="line" href="classVoxelCollector.html">  158</a></span>&#160;<span class="keyword">class </span><a class="code" href="classVoxelCollector.html">VoxelCollector</a> {</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;<span class="keyword">public</span>:</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;        <a class="code" href="classVoxelCollector.html#ae29ba7f4a6a8787134ca8c7d1b59fb7b">VoxelCollector</a>(<a class="code" href="classViewport.html">Viewport</a> *<a class="code" href="classVoxelCollector.html#afa04c64dc66f1adecebe2a0d7fb2681c">vp</a>, <span class="keywordtype">bool</span> <a class="code" href="classVoxelCollector.html#ac00a661304474a26a2bf415baae26048">draw_above_stack</a>);</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;        <span class="keyword">virtual</span> ~<a class="code" href="classVoxelCollector.html">VoxelCollector</a>();</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;        <span class="keywordtype">void</span> <a class="code" href="classVoxelCollector.html#a4a9d577a8b54caf8acb14a7fadda1c61">SetWindowSize</a>(<a class="code" href="stdafx_8h.html#a259fa4834387bd68627ddf37bb3ebdb9">int16</a> xpos, <a class="code" href="stdafx_8h.html#a259fa4834387bd68627ddf37bb3ebdb9">int16</a> ypos, <a class="code" href="stdafx_8h.html#a05f6b0ae8f6a6e135b0e290c25fe0e4e">uint16</a> width, <a class="code" href="stdafx_8h.html#a05f6b0ae8f6a6e135b0e290c25fe0e4e">uint16</a> height);</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;        <span class="keywordtype">void</span> <a class="code" href="classVoxelCollector.html#a05a198f3b94bfff20c1bf1ccdf4ae365">Collect</a>(<span class="keywordtype">bool</span> use_additions);</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;</div>
<div class="line"><a name="l00173"></a><span class="lineno"><a class="line" href="classVoxelCollector.html#a888574dccee18b193ec92b4a6d732250">  173</a></span>&#160;        <span class="keyword">inline</span> <a class="code" href="stdafx_8h.html#a43d43196463bde49cb067f5c20ab8481">int32</a> <a class="code" href="classVoxelCollector.html#a888574dccee18b193ec92b4a6d732250">ComputeX</a>(<a class="code" href="stdafx_8h.html#a43d43196463bde49cb067f5c20ab8481">int32</a> x, <a class="code" href="stdafx_8h.html#a43d43196463bde49cb067f5c20ab8481">int32</a> y)</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;        {</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;                <span class="keywordflow">return</span> <a class="code" href="viewport_8cpp.html#adc21e3bb272d935ad38dd52bd0c03974">ComputeXFunction</a>(x, y, this-&gt;<a class="code" href="classVoxelCollector.html#a95f3b9137ebbcf6851d24c27bbcece2c">orient</a>, this-&gt;<a class="code" href="classVoxelCollector.html#ad888a7e30cdb2f7631ae8defb7d0737b">tile_width</a>);</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;        }</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;</div>
<div class="line"><a name="l00185"></a><span class="lineno"><a class="line" href="classVoxelCollector.html#a5e598f88e6d585180f9fc94964202167">  185</a></span>&#160;        <span class="keyword">inline</span> <a class="code" href="stdafx_8h.html#a43d43196463bde49cb067f5c20ab8481">int32</a> <a class="code" href="classVoxelCollector.html#a5e598f88e6d585180f9fc94964202167">ComputeY</a>(<a class="code" href="stdafx_8h.html#a43d43196463bde49cb067f5c20ab8481">int32</a> x, <a class="code" href="stdafx_8h.html#a43d43196463bde49cb067f5c20ab8481">int32</a> y, <a class="code" href="stdafx_8h.html#a43d43196463bde49cb067f5c20ab8481">int32</a> z)</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;        {</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;                <span class="keywordflow">return</span> <a class="code" href="viewport_8cpp.html#a05568a347fb205b4a83b7c4b02ec518d">ComputeYFunction</a>(x, y, z, this-&gt;<a class="code" href="classVoxelCollector.html#a95f3b9137ebbcf6851d24c27bbcece2c">orient</a>, this-&gt;<a class="code" href="classVoxelCollector.html#ad888a7e30cdb2f7631ae8defb7d0737b">tile_width</a>, this-&gt;<a class="code" href="classVoxelCollector.html#a5bff23a7f703800e1fed17b40a77096e">tile_height</a>);</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;        }</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;</div>
<div class="line"><a name="l00190"></a><span class="lineno"><a class="line" href="classVoxelCollector.html#aae6dc6938654e5696e4473371be824f2">  190</a></span>&#160;        <a class="code" href="structXYZPoint.html">XYZPoint32</a> <a class="code" href="classVoxelCollector.html#aae6dc6938654e5696e4473371be824f2">view_pos</a>;          </div>
<div class="line"><a name="l00191"></a><span class="lineno"><a class="line" href="classVoxelCollector.html#ad888a7e30cdb2f7631ae8defb7d0737b">  191</a></span>&#160;        <a class="code" href="stdafx_8h.html#a05f6b0ae8f6a6e135b0e290c25fe0e4e">uint16</a> <a class="code" href="classVoxelCollector.html#ad888a7e30cdb2f7631ae8defb7d0737b">tile_width</a>;            </div>
<div class="line"><a name="l00192"></a><span class="lineno"><a class="line" href="classVoxelCollector.html#a5bff23a7f703800e1fed17b40a77096e">  192</a></span>&#160;        <a class="code" href="stdafx_8h.html#a05f6b0ae8f6a6e135b0e290c25fe0e4e">uint16</a> <a class="code" href="classVoxelCollector.html#a5bff23a7f703800e1fed17b40a77096e">tile_height</a>;           </div>
<div class="line"><a name="l00193"></a><span class="lineno"><a class="line" href="classVoxelCollector.html#a95f3b9137ebbcf6851d24c27bbcece2c">  193</a></span>&#160;        <a class="code" href="group__map__group.html#gabad48584a1852521ff578b647f07fdd3">ViewOrientation</a> <a class="code" href="classVoxelCollector.html#a95f3b9137ebbcf6851d24c27bbcece2c">orient</a>;       </div>
<div class="line"><a name="l00194"></a><span class="lineno"><a class="line" href="classVoxelCollector.html#a8270a2843c6824b485561e9721fa215d">  194</a></span>&#160;        <span class="keyword">const</span> <a class="code" href="classSpriteStorage.html">SpriteStorage</a> *<a class="code" href="classVoxelCollector.html#a8270a2843c6824b485561e9721fa215d">sprites</a>; </div>
<div class="line"><a name="l00195"></a><span class="lineno"><a class="line" href="classVoxelCollector.html#afa04c64dc66f1adecebe2a0d7fb2681c">  195</a></span>&#160;        <a class="code" href="classViewport.html">Viewport</a> *<a class="code" href="classVoxelCollector.html#afa04c64dc66f1adecebe2a0d7fb2681c">vp</a>;                 </div>
<div class="line"><a name="l00196"></a><span class="lineno"><a class="line" href="classVoxelCollector.html#ac00a661304474a26a2bf415baae26048">  196</a></span>&#160;        <span class="keywordtype">bool</span> <a class="code" href="classVoxelCollector.html#ac00a661304474a26a2bf415baae26048">draw_above_stack</a>;        </div>
<div class="line"><a name="l00197"></a><span class="lineno"><a class="line" href="classVoxelCollector.html#afadd1b6eee247fb0ba8015cb247e13e7">  197</a></span>&#160;        <span class="keywordtype">bool</span> <a class="code" href="classVoxelCollector.html#afadd1b6eee247fb0ba8015cb247e13e7">underground_mode</a>;        </div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;</div>
<div class="line"><a name="l00199"></a><span class="lineno"><a class="line" href="classVoxelCollector.html#add20fd94a174adf4898834c738b57d31">  199</a></span>&#160;        <a class="code" href="structRectangle.html">Rectangle32</a> <a class="code" href="classVoxelCollector.html#add20fd94a174adf4898834c738b57d31">rect</a>; </div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;<span class="keyword">protected</span>:</div>
<div class="line"><a name="l00208"></a><span class="lineno"><a class="line" href="classVoxelCollector.html#a1a8bb1f0f4f229067c17cdb71110ac8b">  208</a></span>&#160;        <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classVoxelCollector.html#a1a8bb1f0f4f229067c17cdb71110ac8b">SetupSupports</a>(<span class="keyword">const</span> <a class="code" href="classVoxelStack.html">VoxelStack</a> *stack, <a class="code" href="stdafx_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a> xpos, <a class="code" href="stdafx_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a> ypos)</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;        {</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;        }</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;        <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classVoxelCollector.html#a2916f30e0ff998fd3de555d83f26676a">CollectVoxel</a>(<span class="keyword">const</span> <a class="code" href="structVoxel.html">Voxel</a> *vx, <span class="keyword">const</span> <a class="code" href="structXYZPoint.html">XYZPoint16</a> &amp;view_pos, <a class="code" href="stdafx_8h.html#a43d43196463bde49cb067f5c20ab8481">int32</a> xnorth, <a class="code" href="stdafx_8h.html#a43d43196463bde49cb067f5c20ab8481">int32</a> ynorth) = 0;</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;};</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;</div>
<div class="line"><a name="l00227"></a><span class="lineno"><a class="line" href="structDrawData.html">  227</a></span>&#160;<span class="keyword">struct </span><a class="code" href="structDrawData.html">DrawData</a> {</div>
<div class="line"><a name="l00228"></a><span class="lineno"><a class="line" href="structDrawData.html#a2637f5d86a4291f50f19fa1d942e645a">  228</a></span>&#160;        <a class="code" href="stdafx_8h.html#a43d43196463bde49cb067f5c20ab8481">int32</a> <a class="code" href="structDrawData.html#a2637f5d86a4291f50f19fa1d942e645a">level</a>;                 </div>
<div class="line"><a name="l00229"></a><span class="lineno"><a class="line" href="structDrawData.html#a49c4e8444e4bb48bdebdc7d947cdc7de">  229</a></span>&#160;        <a class="code" href="stdafx_8h.html#a05f6b0ae8f6a6e135b0e290c25fe0e4e">uint16</a> <a class="code" href="structDrawData.html#a49c4e8444e4bb48bdebdc7d947cdc7de">z_height</a>;             </div>
<div class="line"><a name="l00230"></a><span class="lineno"><a class="line" href="structDrawData.html#a9ed124116c1db658f237dfdc890f4bdb">  230</a></span>&#160;        <a class="code" href="viewport_8h.html#ad83c05db97e3590a5da165ead3d5792d">SpriteOrder</a> <a class="code" href="structDrawData.html#a9ed124116c1db658f237dfdc890f4bdb">order</a>;           </div>
<div class="line"><a name="l00231"></a><span class="lineno"><a class="line" href="structDrawData.html#a353546506625aaeffb85726b311ae4ad">  231</a></span>&#160;        <span class="keyword">const</span> <a class="code" href="classImageData.html">ImageData</a> *<a class="code" href="structDrawData.html#a353546506625aaeffb85726b311ae4ad">sprite</a>;     </div>
<div class="line"><a name="l00232"></a><span class="lineno"><a class="line" href="structDrawData.html#ac48d72511e0ea716333781b67cf28204">  232</a></span>&#160;        <a class="code" href="structPoint.html">Point32</a> <a class="code" href="structDrawData.html#ac48d72511e0ea716333781b67cf28204">base</a>;                </div>
<div class="line"><a name="l00233"></a><span class="lineno"><a class="line" href="structDrawData.html#a60f157d7706304439f8eee934fc80019">  233</a></span>&#160;        <span class="keyword">const</span> <a class="code" href="classRecolouring.html">Recolouring</a> *<a class="code" href="structDrawData.html#a60f157d7706304439f8eee934fc80019">recolour</a>; </div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;};</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;</div>
<div class="line"><a name="l00242"></a><span class="lineno"><a class="line" href="viewport_8cpp.html#abd1d943346be787c3c16adc7f2b744d6">  242</a></span>&#160;<span class="keyword">inline</span> <span class="keywordtype">bool</span> <a class="code" href="viewport_8cpp.html#abd1d943346be787c3c16adc7f2b744d6">operator&lt;</a>(<span class="keyword">const</span> <a class="code" href="structDrawData.html">DrawData</a> &amp;dd1, <span class="keyword">const</span> <a class="code" href="structDrawData.html">DrawData</a> &amp;dd2)</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;{</div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;        <span class="keywordflow">if</span> (dd1.<a class="code" href="structDrawData.html#a2637f5d86a4291f50f19fa1d942e645a">level</a> != dd2.<a class="code" href="structDrawData.html#a2637f5d86a4291f50f19fa1d942e645a">level</a>) <span class="keywordflow">return</span> dd1.<a class="code" href="structDrawData.html#a2637f5d86a4291f50f19fa1d942e645a">level</a> &lt; dd2.<a class="code" href="structDrawData.html#a2637f5d86a4291f50f19fa1d942e645a">level</a>; <span class="comment">// Order on slice first.</span></div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;        <span class="keywordflow">if</span> (dd1.<a class="code" href="structDrawData.html#a49c4e8444e4bb48bdebdc7d947cdc7de">z_height</a> != dd2.<a class="code" href="structDrawData.html#a49c4e8444e4bb48bdebdc7d947cdc7de">z_height</a>) <span class="keywordflow">return</span> dd1.<a class="code" href="structDrawData.html#a49c4e8444e4bb48bdebdc7d947cdc7de">z_height</a> &lt; dd2.<a class="code" href="structDrawData.html#a49c4e8444e4bb48bdebdc7d947cdc7de">z_height</a>; <span class="comment">// Lower in the same slice first.</span></div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;        <span class="keywordflow">if</span> (dd1.<a class="code" href="structDrawData.html#a9ed124116c1db658f237dfdc890f4bdb">order</a> != dd2.<a class="code" href="structDrawData.html#a9ed124116c1db658f237dfdc890f4bdb">order</a>) <span class="keywordflow">return</span> dd1.<a class="code" href="structDrawData.html#a9ed124116c1db658f237dfdc890f4bdb">order</a> &lt; dd2.<a class="code" href="structDrawData.html#a9ed124116c1db658f237dfdc890f4bdb">order</a>; <span class="comment">// Type of sprite.</span></div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;        <span class="keywordflow">return</span> dd1.<a class="code" href="structDrawData.html#ac48d72511e0ea716333781b67cf28204">base</a>.<a class="code" href="structPoint.html#a56c3dcea91f03182921eea9a5cf555a3">y</a> &lt; dd2.<a class="code" href="structDrawData.html#ac48d72511e0ea716333781b67cf28204">base</a>.<a class="code" href="structPoint.html#a56c3dcea91f03182921eea9a5cf555a3">y</a>;</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;}</div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;</div>
<div class="line"><a name="l00254"></a><span class="lineno"><a class="line" href="group__viewport__group.html#ga07748935334c3ffdd10d2b1d6182c195">  254</a></span>&#160;<span class="keyword">typedef</span> std::multiset&lt;DrawData&gt; <a class="code" href="group__viewport__group.html#ga07748935334c3ffdd10d2b1d6182c195">DrawImages</a>;</div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;</div>
<div class="line"><a name="l00260"></a><span class="lineno"><a class="line" href="classSpriteCollector.html">  260</a></span>&#160;<span class="keyword">class </span><a class="code" href="classSpriteCollector.html">SpriteCollector</a> : <span class="keyword">public</span> <a class="code" href="classVoxelCollector.html">VoxelCollector</a> {</div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;<span class="keyword">public</span>:</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;        <a class="code" href="classSpriteCollector.html#ac1af86f5ebfe6ebae5514966922614d9">SpriteCollector</a>(<a class="code" href="classViewport.html">Viewport</a> *<a class="code" href="classVoxelCollector.html#afa04c64dc66f1adecebe2a0d7fb2681c">vp</a>, <span class="keywordtype">bool</span> <a class="code" href="classSpriteCollector.html#a40d01ca6dd6a52cbe6a61a39c2c3be42">enable_cursors</a>);</div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;        ~<a class="code" href="classSpriteCollector.html">SpriteCollector</a>();</div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;</div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;        <span class="keywordtype">void</span> <a class="code" href="classSpriteCollector.html#a83165067814cd1ffebe55dcccb6dde62">SetXYOffset</a>(<a class="code" href="stdafx_8h.html#a259fa4834387bd68627ddf37bb3ebdb9">int16</a> <a class="code" href="classSpriteCollector.html#a36f7a47d5a87c4d5f24d0f0e0641c742">xoffset</a>, <a class="code" href="stdafx_8h.html#a259fa4834387bd68627ddf37bb3ebdb9">int16</a> <a class="code" href="classSpriteCollector.html#a500b250eeb6332feb88f21880f769b35">yoffset</a>);</div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;</div>
<div class="line"><a name="l00267"></a><span class="lineno"><a class="line" href="classSpriteCollector.html#a2ff573025924a75fa7bd200757a843ed">  267</a></span>&#160;        <a class="code" href="group__viewport__group.html#ga07748935334c3ffdd10d2b1d6182c195">DrawImages</a> <a class="code" href="classSpriteCollector.html#a2ff573025924a75fa7bd200757a843ed">draw_images</a>; </div>
<div class="line"><a name="l00268"></a><span class="lineno"><a class="line" href="classSpriteCollector.html#a36f7a47d5a87c4d5f24d0f0e0641c742">  268</a></span>&#160;        <a class="code" href="stdafx_8h.html#a259fa4834387bd68627ddf37bb3ebdb9">int16</a> <a class="code" href="classSpriteCollector.html#a36f7a47d5a87c4d5f24d0f0e0641c742">xoffset</a>; </div>
<div class="line"><a name="l00269"></a><span class="lineno"><a class="line" href="classSpriteCollector.html#a500b250eeb6332feb88f21880f769b35">  269</a></span>&#160;        <a class="code" href="stdafx_8h.html#a259fa4834387bd68627ddf37bb3ebdb9">int16</a> <a class="code" href="classSpriteCollector.html#a500b250eeb6332feb88f21880f769b35">yoffset</a>; </div>
<div class="line"><a name="l00270"></a><span class="lineno"><a class="line" href="classSpriteCollector.html#a40d01ca6dd6a52cbe6a61a39c2c3be42">  270</a></span>&#160;        <span class="keywordtype">bool</span> <a class="code" href="classSpriteCollector.html#a40d01ca6dd6a52cbe6a61a39c2c3be42">enable_cursors</a>; </div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;</div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;<span class="keyword">protected</span>:</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;        <span class="keywordtype">void</span> <a class="code" href="classSpriteCollector.html#a338ed55297778a47ca74984b088a99a1">CollectVoxel</a>(<span class="keyword">const</span> <a class="code" href="structVoxel.html">Voxel</a> *vx, <span class="keyword">const</span> <a class="code" href="structXYZPoint.html">XYZPoint16</a> &amp;voxel_pos, <a class="code" href="stdafx_8h.html#a43d43196463bde49cb067f5c20ab8481">int32</a> xnorth, <a class="code" href="stdafx_8h.html#a43d43196463bde49cb067f5c20ab8481">int32</a> ynorth) <span class="keyword">override</span>;</div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;        <span class="keywordtype">void</span> <a class="code" href="classSpriteCollector.html#a9f426c1aa07df9863fd3ffe4064e6dc4">SetupSupports</a>(<span class="keyword">const</span> <a class="code" href="classVoxelStack.html">VoxelStack</a> *stack, <a class="code" href="stdafx_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a> xpos, <a class="code" href="stdafx_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a> ypos) <span class="keyword">override</span>;</div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;        <span class="keyword">const</span> <a class="code" href="classImageData.html">ImageData</a> *<a class="code" href="classSpriteCollector.html#af7163b4b0c1657097def3b5fdce1b96c">GetCursorSpriteAtPos</a>(<span class="keyword">const</span> <a class="code" href="structXYZPoint.html">XYZPoint16</a> &amp;voxel_pos, <a class="code" href="stdafx_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> tslope, <a class="code" href="stdafx_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> &amp;yoffset);</div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;</div>
<div class="line"><a name="l00278"></a><span class="lineno"><a class="line" href="classSpriteCollector.html#a5a776d1ad5a016265cac6093fbf2ba53">  278</a></span>&#160;        <a class="code" href="structPoint.html">Point16</a> <a class="code" href="classSpriteCollector.html#a5a776d1ad5a016265cac6093fbf2ba53">north_offsets</a>[4];</div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;</div>
<div class="line"><a name="l00280"></a><span class="lineno"><a class="line" href="classSpriteCollector.html#a1daa68f8402e1e22a7eb997eaf9195ae">  280</a></span>&#160;        <a class="code" href="stdafx_8h.html#a05f6b0ae8f6a6e135b0e290c25fe0e4e">uint16</a> <a class="code" href="classSpriteCollector.html#a1daa68f8402e1e22a7eb997eaf9195ae">ground_height</a>; </div>
<div class="line"><a name="l00281"></a><span class="lineno"><a class="line" href="classSpriteCollector.html#a32f43c4ee8b6fb71887ac75891fc0038">  281</a></span>&#160;        <a class="code" href="stdafx_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> <a class="code" href="classSpriteCollector.html#a32f43c4ee8b6fb71887ac75891fc0038">ground_slope</a>;   </div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;};</div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;</div>
<div class="line"><a name="l00288"></a><span class="lineno"><a class="line" href="classPixelFinder.html">  288</a></span>&#160;<span class="keyword">class </span><a class="code" href="classPixelFinder.html">PixelFinder</a> : <span class="keyword">public</span> <a class="code" href="classVoxelCollector.html">VoxelCollector</a> {</div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;<span class="keyword">public</span>:</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;        <a class="code" href="classPixelFinder.html#a786e481e53946859cd609c23e7e5db3d">PixelFinder</a>(<a class="code" href="classViewport.html">Viewport</a> *<a class="code" href="classVoxelCollector.html#afa04c64dc66f1adecebe2a0d7fb2681c">vp</a>, <a class="code" href="classFinderData.html">FinderData</a> *<a class="code" href="classPixelFinder.html#ac2415aa0c2048a74ec2b07da48868c57">fdata</a>);</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;        ~<a class="code" href="classPixelFinder.html">PixelFinder</a>();</div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;</div>
<div class="line"><a name="l00293"></a><span class="lineno"><a class="line" href="classPixelFinder.html#aa9f614ee6d26ac2e2d5238abab133770">  293</a></span>&#160;        <a class="code" href="viewport_8h.html#a7eaf31dcf3c53b721a3144bb135f8d25">ClickableSprite</a> <a class="code" href="classPixelFinder.html#aa9f614ee6d26ac2e2d5238abab133770">allowed</a>; </div>
<div class="line"><a name="l00294"></a><span class="lineno"><a class="line" href="classPixelFinder.html#a22026f65fa28030f9673fbdf70ee5415">  294</a></span>&#160;        <span class="keywordtype">bool</span> <a class="code" href="classPixelFinder.html#a22026f65fa28030f9673fbdf70ee5415">found</a>;              </div>
<div class="line"><a name="l00295"></a><span class="lineno"><a class="line" href="classPixelFinder.html#a29c2cbacbb286eed99841b873a23ce7c">  295</a></span>&#160;        <a class="code" href="structDrawData.html">DrawData</a> <a class="code" href="classPixelFinder.html#a29c2cbacbb286eed99841b873a23ce7c">data</a>;           </div>
<div class="line"><a name="l00296"></a><span class="lineno"><a class="line" href="classPixelFinder.html#a351817707623c57264a0be8a288eab51">  296</a></span>&#160;        <a class="code" href="stdafx_8h.html#a1134b580f8da4de94ca6b1de4d37975e">uint32</a> <a class="code" href="classPixelFinder.html#a351817707623c57264a0be8a288eab51">pixel</a>;            </div>
<div class="line"><a name="l00297"></a><span class="lineno"><a class="line" href="classPixelFinder.html#ac2415aa0c2048a74ec2b07da48868c57">  297</a></span>&#160;        <a class="code" href="classFinderData.html">FinderData</a> *<a class="code" href="classPixelFinder.html#ac2415aa0c2048a74ec2b07da48868c57">fdata</a>;       </div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;</div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;<span class="keyword">protected</span>:</div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;        <span class="keywordtype">void</span> <a class="code" href="classPixelFinder.html#a2f650c8fff8cec322a25af9152f5f26d">CollectVoxel</a>(<span class="keyword">const</span> <a class="code" href="structVoxel.html">Voxel</a> *vx, <span class="keyword">const</span> <a class="code" href="structXYZPoint.html">XYZPoint16</a> &amp;voxel_pos, <a class="code" href="stdafx_8h.html#a43d43196463bde49cb067f5c20ab8481">int32</a> xnorth, <a class="code" href="stdafx_8h.html#a43d43196463bde49cb067f5c20ab8481">int32</a> ynorth) <span class="keyword">override</span>;</div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;};</div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;</div>
<div class="line"><a name="l00309"></a><span class="lineno"><a class="line" href="classVoxelCollector.html#ae29ba7f4a6a8787134ca8c7d1b59fb7b">  309</a></span>&#160;<a class="code" href="classVoxelCollector.html#ae29ba7f4a6a8787134ca8c7d1b59fb7b">VoxelCollector::VoxelCollector</a>(<a class="code" href="classViewport.html">Viewport</a> *vp, <span class="keywordtype">bool</span> draw_above_stack)</div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;{</div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;        this-&gt;vp = <a class="code" href="classVoxelCollector.html#afa04c64dc66f1adecebe2a0d7fb2681c">vp</a>;</div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;        this-&gt;<a class="code" href="classVoxelCollector.html#aae6dc6938654e5696e4473371be824f2">view_pos</a> = vp-&gt;<a class="code" href="classViewport.html#a5a238302d2aaeccf11d004c66637bfd7">view_pos</a>;</div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;        this-&gt;<a class="code" href="classVoxelCollector.html#ad888a7e30cdb2f7631ae8defb7d0737b">tile_width</a> = vp-&gt;<a class="code" href="classViewport.html#a4cf69d0f86ba6b3fd59e733628c87bc4">tile_width</a>;</div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;        this-&gt;<a class="code" href="classVoxelCollector.html#a5bff23a7f703800e1fed17b40a77096e">tile_height</a> = vp-&gt;<a class="code" href="classViewport.html#a87164c2051ecd5d9382045a785f5a009">tile_height</a>;</div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;        this-&gt;<a class="code" href="classVoxelCollector.html#a95f3b9137ebbcf6851d24c27bbcece2c">orient</a> = vp-&gt;<a class="code" href="classViewport.html#adeeab711682948cdfa386bca98734f25">orientation</a>;</div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;        this-&gt;draw_above_stack = <a class="code" href="classVoxelCollector.html#ac00a661304474a26a2bf415baae26048">draw_above_stack</a>;</div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;        this-&gt;<a class="code" href="classVoxelCollector.html#afadd1b6eee247fb0ba8015cb247e13e7">underground_mode</a> = vp-&gt;<a class="code" href="classViewport.html#a31d04253bf19b343e6bdce35847a5526">underground_mode</a>;</div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;        this-&gt;<a class="code" href="classVoxelCollector.html#a8270a2843c6824b485561e9721fa215d">sprites</a> = <a class="code" href="sprite__store_8cpp.html#aceecbbda4fed58053329eced561b20fa">_sprite_manager</a>.<a class="code" href="classSpriteManager.html#a4a506110aec7cecde2e27c476f09b489">GetSprites</a>(this-&gt;<a class="code" href="classVoxelCollector.html#ad888a7e30cdb2f7631ae8defb7d0737b">tile_width</a>);</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;        assert(this-&gt;<a class="code" href="classVoxelCollector.html#a8270a2843c6824b485561e9721fa215d">sprites</a> != <span class="keyword">nullptr</span>);</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;}</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;</div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;<span class="comment">/* Destructor. */</span></div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;VoxelCollector::~VoxelCollector()</div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;{</div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;}</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;</div>
<div class="line"><a name="l00335"></a><span class="lineno"><a class="line" href="classVoxelCollector.html#a4a9d577a8b54caf8acb14a7fadda1c61">  335</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classVoxelCollector.html#a4a9d577a8b54caf8acb14a7fadda1c61">VoxelCollector::SetWindowSize</a>(<a class="code" href="stdafx_8h.html#a259fa4834387bd68627ddf37bb3ebdb9">int16</a> xpos, <a class="code" href="stdafx_8h.html#a259fa4834387bd68627ddf37bb3ebdb9">int16</a> ypos, <a class="code" href="stdafx_8h.html#a05f6b0ae8f6a6e135b0e290c25fe0e4e">uint16</a> width, <a class="code" href="stdafx_8h.html#a05f6b0ae8f6a6e135b0e290c25fe0e4e">uint16</a> height)</div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;{</div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;        this-&gt;<a class="code" href="classVoxelCollector.html#add20fd94a174adf4898834c738b57d31">rect</a>.<a class="code" href="structRectangle.html#ab794667ffad2a46061bc417f99c031cc">base</a>.<a class="code" href="structPoint.html#af0836c7f2eec563aa7bc20d8cfa5dd2a">x</a> = this-&gt;<a class="code" href="classVoxelCollector.html#a888574dccee18b193ec92b4a6d732250">ComputeX</a>(this-&gt;<a class="code" href="classVoxelCollector.html#aae6dc6938654e5696e4473371be824f2">view_pos</a>.<a class="code" href="structXYZPoint.html#a77a7984ac0a26ecb76acb94bbcf96a48">x</a>, this-&gt;view_pos.y) + xpos;</div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;        this-&gt;<a class="code" href="classVoxelCollector.html#add20fd94a174adf4898834c738b57d31">rect</a>.<a class="code" href="structRectangle.html#ab794667ffad2a46061bc417f99c031cc">base</a>.<a class="code" href="structPoint.html#a56c3dcea91f03182921eea9a5cf555a3">y</a> = this-&gt;<a class="code" href="classVoxelCollector.html#a5e598f88e6d585180f9fc94964202167">ComputeY</a>(this-&gt;<a class="code" href="classVoxelCollector.html#aae6dc6938654e5696e4473371be824f2">view_pos</a>.<a class="code" href="structXYZPoint.html#a77a7984ac0a26ecb76acb94bbcf96a48">x</a>, this-&gt;view_pos.y, this-&gt;view_pos.z) + ypos;</div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;        this-&gt;<a class="code" href="classVoxelCollector.html#add20fd94a174adf4898834c738b57d31">rect</a>.<a class="code" href="structRectangle.html#a82ad3c804a2bdb269926f29a2574c22b">width</a> = width;</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;        this-&gt;<a class="code" href="classVoxelCollector.html#add20fd94a174adf4898834c738b57d31">rect</a>.<a class="code" href="structRectangle.html#aa81e161d1fdaa8801d202f59b4d541e0">height</a> = height;</div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;}</div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;</div>
<div class="line"><a name="l00350"></a><span class="lineno"><a class="line" href="classVoxelCollector.html#a05a198f3b94bfff20c1bf1ccdf4ae365">  350</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classVoxelCollector.html#a05a198f3b94bfff20c1bf1ccdf4ae365">VoxelCollector::Collect</a>(<span class="keywordtype">bool</span> use_additions)</div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;{</div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;        <span class="keywordflow">for</span> (<a class="code" href="stdafx_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a> xpos = 0; xpos &lt; <a class="code" href="group__map__group.html#gae1beaf14b9effb4a54e82830c7b36616">_world</a>.<a class="code" href="classVoxelWorld.html#a5bc499626f6ca0544683535d36b5917a">GetXSize</a>(); xpos++) {</div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;                <a class="code" href="stdafx_8h.html#a43d43196463bde49cb067f5c20ab8481">int32</a> world_x = (xpos + ((this-&gt;<a class="code" href="classVoxelCollector.html#a95f3b9137ebbcf6851d24c27bbcece2c">orient</a> == <a class="code" href="group__map__group.html#ggabad48584a1852521ff578b647f07fdd3ae07f82bd43e8d66a7394d5ebf0f47c39">VOR_SOUTH</a> || this-&gt;orient == <a class="code" href="group__map__group.html#ggabad48584a1852521ff578b647f07fdd3a5ff3ccca79a685ddc61d0a8739d73ed1">VOR_WEST</a>) ? 1 : 0)) * 256;</div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;                <span class="keywordflow">for</span> (<a class="code" href="stdafx_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a> ypos = 0; ypos &lt; <a class="code" href="group__map__group.html#gae1beaf14b9effb4a54e82830c7b36616">_world</a>.<a class="code" href="classVoxelWorld.html#a4b99ca56b6b030033263b1397b2bdc41">GetYSize</a>(); ypos++) {</div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;                        <a class="code" href="stdafx_8h.html#a43d43196463bde49cb067f5c20ab8481">int32</a> world_y = (ypos + ((this-&gt;orient == <a class="code" href="group__map__group.html#ggabad48584a1852521ff578b647f07fdd3ae07f82bd43e8d66a7394d5ebf0f47c39">VOR_SOUTH</a> || this-&gt;orient == <a class="code" href="group__map__group.html#ggabad48584a1852521ff578b647f07fdd3ab9f340d6a90130e2bcc75d5be2af447e">VOR_EAST</a>) ? 1 : 0)) * 256;</div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;                        <a class="code" href="stdafx_8h.html#a43d43196463bde49cb067f5c20ab8481">int32</a> north_x = <a class="code" href="classVoxelCollector.html#a888574dccee18b193ec92b4a6d732250">ComputeX</a>(world_x, world_y);</div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;                        <span class="keywordflow">if</span> (north_x + this-&gt;<a class="code" href="classVoxelCollector.html#ad888a7e30cdb2f7631ae8defb7d0737b">tile_width</a> / 2 &lt;= (<a class="code" href="stdafx_8h.html#a43d43196463bde49cb067f5c20ab8481">int32</a>)this-&gt;<a class="code" href="classVoxelCollector.html#add20fd94a174adf4898834c738b57d31">rect</a>.<a class="code" href="structRectangle.html#ab794667ffad2a46061bc417f99c031cc">base</a>.<a class="code" href="structPoint.html#af0836c7f2eec563aa7bc20d8cfa5dd2a">x</a>) <span class="keywordflow">continue</span>; <span class="comment">// Right of voxel column is at left of window.</span></div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;                        <span class="keywordflow">if</span> (north_x - this-&gt;<a class="code" href="classVoxelCollector.html#ad888a7e30cdb2f7631ae8defb7d0737b">tile_width</a> / 2 &gt;= (<a class="code" href="stdafx_8h.html#a43d43196463bde49cb067f5c20ab8481">int32</a>)(this-&gt;<a class="code" href="classVoxelCollector.html#add20fd94a174adf4898834c738b57d31">rect</a>.<a class="code" href="structRectangle.html#ab794667ffad2a46061bc417f99c031cc">base</a>.<a class="code" href="structPoint.html#af0836c7f2eec563aa7bc20d8cfa5dd2a">x</a> + this-&gt;rect.width)) <span class="keywordflow">continue</span>; <span class="comment">// Left of the window.</span></div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;</div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;                        <span class="keyword">const</span> <a class="code" href="classVoxelStack.html">VoxelStack</a> *stack = use_additions ? _additions.<a class="code" href="classWorldAdditions.html#ac8b6dae54970fb065068614968a43c8e">GetStack</a>(xpos, ypos) : <a class="code" href="group__map__group.html#gae1beaf14b9effb4a54e82830c7b36616">_world</a>.<a class="code" href="classVoxelWorld.html#a813f4f0503efc085557fe4359e0ee520">GetStack</a>(xpos, ypos);</div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;                        this-&gt;<a class="code" href="classVoxelCollector.html#a1a8bb1f0f4f229067c17cdb71110ac8b">SetupSupports</a>(stack, xpos, ypos);</div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;                        <a class="code" href="stdafx_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a> zpos = stack-&gt;<a class="code" href="classVoxelStack.html#a1b4b53aef1bef7528d1eb330e32fa25e">base</a>;</div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;                        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> count = 0; count &lt; stack-&gt;<a class="code" href="classVoxelStack.html#a26af67d6e9363114f75a6e3570a211ba">height</a>; zpos++, count++) {</div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;                                <a class="code" href="stdafx_8h.html#a43d43196463bde49cb067f5c20ab8481">int32</a> north_y = this-&gt;<a class="code" href="classVoxelCollector.html#a5e598f88e6d585180f9fc94964202167">ComputeY</a>(world_x, world_y, zpos * 256);</div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;                                <span class="keywordflow">if</span> (north_y - this-&gt;<a class="code" href="classVoxelCollector.html#a5bff23a7f703800e1fed17b40a77096e">tile_height</a> &gt;= (<a class="code" href="stdafx_8h.html#a43d43196463bde49cb067f5c20ab8481">int32</a>)(this-&gt;<a class="code" href="classVoxelCollector.html#add20fd94a174adf4898834c738b57d31">rect</a>.<a class="code" href="structRectangle.html#ab794667ffad2a46061bc417f99c031cc">base</a>.<a class="code" href="structPoint.html#a56c3dcea91f03182921eea9a5cf555a3">y</a> + this-&gt;rect.height)) <span class="keywordflow">continue</span>; <span class="comment">// Voxel is below the window.</span></div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;                                <span class="keywordflow">if</span> (north_y + this-&gt;<a class="code" href="classVoxelCollector.html#ad888a7e30cdb2f7631ae8defb7d0737b">tile_width</a> / 2 + this-&gt;<a class="code" href="classVoxelCollector.html#a5bff23a7f703800e1fed17b40a77096e">tile_height</a> &lt;= (<a class="code" href="stdafx_8h.html#a43d43196463bde49cb067f5c20ab8481">int32</a>)this-&gt;<a class="code" href="classVoxelCollector.html#add20fd94a174adf4898834c738b57d31">rect</a>.<a class="code" href="structRectangle.html#ab794667ffad2a46061bc417f99c031cc">base</a>.<a class="code" href="structPoint.html#a56c3dcea91f03182921eea9a5cf555a3">y</a>) <span class="keywordflow">break</span>; <span class="comment">// Above the window and rising!</span></div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;</div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;                                this-&gt;<a class="code" href="classVoxelCollector.html#a2916f30e0ff998fd3de555d83f26676a">CollectVoxel</a>(&amp;stack-&gt;<a class="code" href="classVoxelStack.html#ac44c1a794c29fd1c88f1d88f2db3c316">voxels</a>[count], <a class="code" href="structXYZPoint.html">XYZPoint16</a>(xpos, ypos, zpos), north_x, north_y);</div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;                        }</div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;                        <span class="comment">/* Possibly cursors should be drawn above this. */</span></div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;                        <span class="keywordflow">if</span> (this-&gt;<a class="code" href="classVoxelCollector.html#ac00a661304474a26a2bf415baae26048">draw_above_stack</a>) {</div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;                                <a class="code" href="stdafx_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> zmax = this-&gt;<a class="code" href="classVoxelCollector.html#afa04c64dc66f1adecebe2a0d7fb2681c">vp</a>-&gt;<a class="code" href="classViewport.html#a4bb0875319aca7c984be5d106594664c">GetMaxCursorHeight</a>(xpos, ypos, (zpos == 0) ? zpos : zpos - 1);</div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;                                <span class="keywordflow">for</span> (; zpos &lt;= zmax; zpos++) {</div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;                                        <a class="code" href="stdafx_8h.html#a43d43196463bde49cb067f5c20ab8481">int32</a> north_y = this-&gt;<a class="code" href="classVoxelCollector.html#a5e598f88e6d585180f9fc94964202167">ComputeY</a>(world_x, world_y, zpos * 256);</div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;                                        <span class="keywordflow">if</span> (north_y - this-&gt;<a class="code" href="classVoxelCollector.html#a5bff23a7f703800e1fed17b40a77096e">tile_height</a> &gt;= (<a class="code" href="stdafx_8h.html#a43d43196463bde49cb067f5c20ab8481">int32</a>)(this-&gt;<a class="code" href="classVoxelCollector.html#add20fd94a174adf4898834c738b57d31">rect</a>.<a class="code" href="structRectangle.html#ab794667ffad2a46061bc417f99c031cc">base</a>.<a class="code" href="structPoint.html#a56c3dcea91f03182921eea9a5cf555a3">y</a> + this-&gt;rect.height)) <span class="keywordflow">continue</span>; <span class="comment">// Voxel is below the window.</span></div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;                                        <span class="keywordflow">if</span> (north_y + this-&gt;<a class="code" href="classVoxelCollector.html#ad888a7e30cdb2f7631ae8defb7d0737b">tile_width</a> / 2 + this-&gt;<a class="code" href="classVoxelCollector.html#a5bff23a7f703800e1fed17b40a77096e">tile_height</a> &lt;= (<a class="code" href="stdafx_8h.html#a43d43196463bde49cb067f5c20ab8481">int32</a>)this-&gt;<a class="code" href="classVoxelCollector.html#add20fd94a174adf4898834c738b57d31">rect</a>.<a class="code" href="structRectangle.html#ab794667ffad2a46061bc417f99c031cc">base</a>.<a class="code" href="structPoint.html#a56c3dcea91f03182921eea9a5cf555a3">y</a>) <span class="keywordflow">break</span>; <span class="comment">// Above the window and rising!</span></div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;</div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;                                        this-&gt;<a class="code" href="classVoxelCollector.html#a2916f30e0ff998fd3de555d83f26676a">CollectVoxel</a>(<span class="keyword">nullptr</span>, <a class="code" href="geometry_8h.html#a71fcb91f44cc6cbf519d0c45c07e931d">XYZPoint16</a>(xpos, ypos, zpos), north_x, north_y);</div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;                                }</div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;                        }</div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;                }</div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;        }</div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;}</div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;</div>
<div class="line"><a name="l00386"></a><span class="lineno"><a class="line" href="classViewport.html#acf62487474e985c772ac2d98dd2e66b9">  386</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classViewport.html#acf62487474e985c772ac2d98dd2e66b9">Viewport::EnableWorldAdditions</a>()</div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;{</div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;        <span class="keywordflow">if</span> (this-&gt;<a class="code" href="classViewport.html#a6bd1183c6460d8561206839907d9f05f">additions_enabled</a>) <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;</div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;        this-&gt;<a class="code" href="classViewport.html#a6bd1183c6460d8561206839907d9f05f">additions_enabled</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;        this-&gt;<a class="code" href="classViewport.html#ab7074c86c413aeb1f663521b61e2279a">additions_displayed</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;        _additions.<a class="code" href="classWorldAdditions.html#ad85d924779abb9546109b59f079413af">MarkDirty</a>(<span class="keyword">this</span>);</div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;        this-&gt;<a class="code" href="classViewport.html#a51aea10995fec2c7d0c2a9b8202e2fdb">arrow_cursor</a>.<a class="code" href="classCursor.html#a0b0ce3458c817aa4f58cd2ffe61b5d92">MarkDirty</a>();</div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;        this-&gt;<a class="code" href="classWindow.html#a66c3f587697b7da2ccc3d33c453d1b21">timeout</a> = <a class="code" href="viewport_8cpp.html#a9b7e01edb9a807eb45fdad0463b855db">ADDITIONS_TIMEOUT_LENGTH</a>;</div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;}</div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;</div>
<div class="line"><a name="l00398"></a><span class="lineno"><a class="line" href="classViewport.html#a8f6f78564c1b7397703ce96eb6ea2145">  398</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classViewport.html#a8f6f78564c1b7397703ce96eb6ea2145">Viewport::DisableWorldAdditions</a>()</div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;{</div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;        this-&gt;<a class="code" href="classViewport.html#a6bd1183c6460d8561206839907d9f05f">additions_enabled</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;        <span class="keywordflow">if</span> (this-&gt;<a class="code" href="classViewport.html#ab7074c86c413aeb1f663521b61e2279a">additions_displayed</a>) {</div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;                this-&gt;<a class="code" href="classViewport.html#ab7074c86c413aeb1f663521b61e2279a">additions_displayed</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;                _additions.<a class="code" href="classWorldAdditions.html#ad85d924779abb9546109b59f079413af">MarkDirty</a>(<span class="keyword">this</span>);</div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;                this-&gt;<a class="code" href="classViewport.html#a51aea10995fec2c7d0c2a9b8202e2fdb">arrow_cursor</a>.<a class="code" href="classCursor.html#a0b0ce3458c817aa4f58cd2ffe61b5d92">MarkDirty</a>();</div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;        }</div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;        this-&gt;<a class="code" href="classWindow.html#a66c3f587697b7da2ccc3d33c453d1b21">timeout</a> = 0;</div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;}</div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;</div>
<div class="line"><a name="l00413"></a><span class="lineno"><a class="line" href="classViewport.html#a6587519ef53f480df211762c2d2c8ed6">  413</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classViewport.html#a6587519ef53f480df211762c2d2c8ed6">Viewport::EnsureAdditionsAreVisible</a>()</div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;{</div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;        assert(this-&gt;<a class="code" href="classViewport.html#a6bd1183c6460d8561206839907d9f05f">additions_enabled</a>);</div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;        <span class="keywordflow">if</span> (!this-&gt;<a class="code" href="classViewport.html#ab7074c86c413aeb1f663521b61e2279a">additions_displayed</a>) {</div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;                this-&gt;<a class="code" href="classViewport.html#ab7074c86c413aeb1f663521b61e2279a">additions_displayed</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;                _additions.<a class="code" href="classWorldAdditions.html#ad85d924779abb9546109b59f079413af">MarkDirty</a>(<span class="keyword">this</span>);</div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;                this-&gt;<a class="code" href="classViewport.html#a51aea10995fec2c7d0c2a9b8202e2fdb">arrow_cursor</a>.<a class="code" href="classCursor.html#a0b0ce3458c817aa4f58cd2ffe61b5d92">MarkDirty</a>();</div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;        }</div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;        this-&gt;<a class="code" href="classWindow.html#a66c3f587697b7da2ccc3d33c453d1b21">timeout</a> = <a class="code" href="viewport_8cpp.html#a9b7e01edb9a807eb45fdad0463b855db">ADDITIONS_TIMEOUT_LENGTH</a>;</div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;}</div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;</div>
<div class="line"><a name="l00425"></a><span class="lineno"><a class="line" href="classViewport.html#a5f465ad37c17069ba5aa3d9899cddb3a">  425</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classViewport.html#a5f465ad37c17069ba5aa3d9899cddb3a">Viewport::TimeoutCallback</a>()</div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;{</div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;        <span class="keywordflow">if</span> (!this-&gt;<a class="code" href="classViewport.html#a6bd1183c6460d8561206839907d9f05f">additions_enabled</a>) <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;</div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;        this-&gt;<a class="code" href="classViewport.html#ab7074c86c413aeb1f663521b61e2279a">additions_displayed</a> = !this-&gt;<a class="code" href="classViewport.html#ab7074c86c413aeb1f663521b61e2279a">additions_displayed</a>;</div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;        _additions.<a class="code" href="classWorldAdditions.html#ad85d924779abb9546109b59f079413af">MarkDirty</a>(<span class="keyword">this</span>);</div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;        this-&gt;<a class="code" href="classViewport.html#a51aea10995fec2c7d0c2a9b8202e2fdb">arrow_cursor</a>.<a class="code" href="classCursor.html#a0b0ce3458c817aa4f58cd2ffe61b5d92">MarkDirty</a>();</div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;        this-&gt;<a class="code" href="classWindow.html#a66c3f587697b7da2ccc3d33c453d1b21">timeout</a> = <a class="code" href="viewport_8cpp.html#a9b7e01edb9a807eb45fdad0463b855db">ADDITIONS_TIMEOUT_LENGTH</a>;</div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;}</div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;</div>
<div class="line"><a name="l00440"></a><span class="lineno"><a class="line" href="classSpriteCollector.html#ac1af86f5ebfe6ebae5514966922614d9">  440</a></span>&#160;<a class="code" href="classSpriteCollector.html#ac1af86f5ebfe6ebae5514966922614d9">SpriteCollector::SpriteCollector</a>(<a class="code" href="classViewport.html">Viewport</a> *vp, <span class="keywordtype">bool</span> enable_cursors) : <a class="code" href="classVoxelCollector.html">VoxelCollector</a>(vp, true)</div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;{</div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;        this-&gt;<a class="code" href="classSpriteCollector.html#a2ff573025924a75fa7bd200757a843ed">draw_images</a>.clear();</div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;        this-&gt;<a class="code" href="classSpriteCollector.html#a36f7a47d5a87c4d5f24d0f0e0641c742">xoffset</a> = 0;</div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;        this-&gt;<a class="code" href="classSpriteCollector.html#a500b250eeb6332feb88f21880f769b35">yoffset</a> = 0;</div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;        this-&gt;enable_cursors = <a class="code" href="classSpriteCollector.html#a40d01ca6dd6a52cbe6a61a39c2c3be42">enable_cursors</a>;</div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;</div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;        this-&gt;<a class="code" href="classSpriteCollector.html#a5a776d1ad5a016265cac6093fbf2ba53">north_offsets</a>[<a class="code" href="group__map__group.html#ggabad48584a1852521ff578b647f07fdd3a555bd255b7d0fb03bd8e272ee595b49b">VOR_NORTH</a>].<a class="code" href="structPoint.html#af0836c7f2eec563aa7bc20d8cfa5dd2a">x</a> = 0;                     this-&gt;<a class="code" href="classSpriteCollector.html#a5a776d1ad5a016265cac6093fbf2ba53">north_offsets</a>[<a class="code" href="group__map__group.html#ggabad48584a1852521ff578b647f07fdd3a555bd255b7d0fb03bd8e272ee595b49b">VOR_NORTH</a>].<a class="code" href="structPoint.html#a56c3dcea91f03182921eea9a5cf555a3">y</a> = 0;</div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;        this-&gt;<a class="code" href="classSpriteCollector.html#a5a776d1ad5a016265cac6093fbf2ba53">north_offsets</a>[<a class="code" href="group__map__group.html#ggabad48584a1852521ff578b647f07fdd3ab9f340d6a90130e2bcc75d5be2af447e">VOR_EAST</a>].<a class="code" href="structPoint.html#af0836c7f2eec563aa7bc20d8cfa5dd2a">x</a>  = -this-&gt;<a class="code" href="classVoxelCollector.html#ad888a7e30cdb2f7631ae8defb7d0737b">tile_width</a> / 2; this-&gt;<a class="code" href="classSpriteCollector.html#a5a776d1ad5a016265cac6093fbf2ba53">north_offsets</a>[<a class="code" href="group__map__group.html#ggabad48584a1852521ff578b647f07fdd3ab9f340d6a90130e2bcc75d5be2af447e">VOR_EAST</a>].<a class="code" href="structPoint.html#a56c3dcea91f03182921eea9a5cf555a3">y</a>  = this-&gt;<a class="code" href="classVoxelCollector.html#ad888a7e30cdb2f7631ae8defb7d0737b">tile_width</a> / 4;</div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;        this-&gt;<a class="code" href="classSpriteCollector.html#a5a776d1ad5a016265cac6093fbf2ba53">north_offsets</a>[<a class="code" href="group__map__group.html#ggabad48584a1852521ff578b647f07fdd3ae07f82bd43e8d66a7394d5ebf0f47c39">VOR_SOUTH</a>].<a class="code" href="structPoint.html#af0836c7f2eec563aa7bc20d8cfa5dd2a">x</a> = 0;                     this-&gt;<a class="code" href="classSpriteCollector.html#a5a776d1ad5a016265cac6093fbf2ba53">north_offsets</a>[<a class="code" href="group__map__group.html#ggabad48584a1852521ff578b647f07fdd3ae07f82bd43e8d66a7394d5ebf0f47c39">VOR_SOUTH</a>].<a class="code" href="structPoint.html#a56c3dcea91f03182921eea9a5cf555a3">y</a> = this-&gt;<a class="code" href="classVoxelCollector.html#ad888a7e30cdb2f7631ae8defb7d0737b">tile_width</a> / 2;</div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;        this-&gt;<a class="code" href="classSpriteCollector.html#a5a776d1ad5a016265cac6093fbf2ba53">north_offsets</a>[<a class="code" href="group__map__group.html#ggabad48584a1852521ff578b647f07fdd3a5ff3ccca79a685ddc61d0a8739d73ed1">VOR_WEST</a>].<a class="code" href="structPoint.html#af0836c7f2eec563aa7bc20d8cfa5dd2a">x</a>  = this-&gt;<a class="code" href="classVoxelCollector.html#ad888a7e30cdb2f7631ae8defb7d0737b">tile_width</a> / 2;  this-&gt;<a class="code" href="classSpriteCollector.html#a5a776d1ad5a016265cac6093fbf2ba53">north_offsets</a>[<a class="code" href="group__map__group.html#ggabad48584a1852521ff578b647f07fdd3a5ff3ccca79a685ddc61d0a8739d73ed1">VOR_WEST</a>].<a class="code" href="structPoint.html#a56c3dcea91f03182921eea9a5cf555a3">y</a>  = this-&gt;<a class="code" href="classVoxelCollector.html#ad888a7e30cdb2f7631ae8defb7d0737b">tile_width</a> / 4;</div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;}</div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;</div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;SpriteCollector::~SpriteCollector()</div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;{</div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;}</div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;</div>
<div class="line"><a name="l00462"></a><span class="lineno"><a class="line" href="classSpriteCollector.html#a83165067814cd1ffebe55dcccb6dde62">  462</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classSpriteCollector.html#a83165067814cd1ffebe55dcccb6dde62">SpriteCollector::SetXYOffset</a>(<a class="code" href="stdafx_8h.html#a259fa4834387bd68627ddf37bb3ebdb9">int16</a> xoffset, <a class="code" href="stdafx_8h.html#a259fa4834387bd68627ddf37bb3ebdb9">int16</a> yoffset)</div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;{</div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;        this-&gt;xoffset = <a class="code" href="classSpriteCollector.html#a36f7a47d5a87c4d5f24d0f0e0641c742">xoffset</a>;</div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;        this-&gt;yoffset = <a class="code" href="classSpriteCollector.html#a500b250eeb6332feb88f21880f769b35">yoffset</a>;</div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;}</div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;</div>
<div class="line"><a name="l00472"></a><span class="lineno"><a class="line" href="classBaseCursor.html#a40410fe20f900ee736d51544acc62663">  472</a></span>&#160;<a class="code" href="classBaseCursor.html#a40410fe20f900ee736d51544acc62663">BaseCursor::BaseCursor</a>(<a class="code" href="classViewport.html">Viewport</a> *vp)</div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;{</div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;        this-&gt;vp = <a class="code" href="classBaseCursor.html#aa3a090515b45b932a3e3eed5d6be8268">vp</a>;</div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;        this-&gt;<a class="code" href="classBaseCursor.html#a436af4c6441ec1ffb0f747c9127e7c02">type</a> = <a class="code" href="group__viewport__group.html#ggabbe637356c8cb749a9726f13658031faae83492340bb582cb358889cfd11d7672">CUR_TYPE_INVALID</a>;</div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;}</div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;</div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;BaseCursor::~BaseCursor()</div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;{</div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;}</div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;</div>
<div class="line"><a name="l00483"></a><span class="lineno"><a class="line" href="classBaseCursor.html#a322cf4007d148c08716822df27f83fbe">  483</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classBaseCursor.html#a322cf4007d148c08716822df27f83fbe">BaseCursor::SetInvalid</a>()</div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;{</div>
<div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;        this-&gt;<a class="code" href="classBaseCursor.html#a205b847cffc085371726b27faa64a129">MarkDirty</a>();</div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;        this-&gt;<a class="code" href="classBaseCursor.html#a436af4c6441ec1ffb0f747c9127e7c02">type</a> = <a class="code" href="group__viewport__group.html#ggabbe637356c8cb749a9726f13658031faae83492340bb582cb358889cfd11d7672">CUR_TYPE_INVALID</a>;</div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;}</div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;</div>
<div class="line"><a name="l00493"></a><span class="lineno"><a class="line" href="classCursor.html#a7385fd41994cc05ff7bfdaeb427fd448">  493</a></span>&#160;<a class="code" href="classCursor.html#a7385fd41994cc05ff7bfdaeb427fd448">Cursor::Cursor</a>(<a class="code" href="classViewport.html">Viewport</a> *vp) : <a class="code" href="classBaseCursor.html">BaseCursor</a>(vp)</div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;{</div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;        this-&gt;<a class="code" href="classCursor.html#ac01d0c964a1e17214e77b786bf283e9a">cursor_pos</a> = <a class="code" href="geometry_8h.html#a71fcb91f44cc6cbf519d0c45c07e931d">XYZPoint16</a>(0, 0, 0);</div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;}</div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;</div>
<div class="line"><a name="l00498"></a><span class="lineno"><a class="line" href="classCursor.html#a0b0ce3458c817aa4f58cd2ffe61b5d92">  498</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classCursor.html#a0b0ce3458c817aa4f58cd2ffe61b5d92">Cursor::MarkDirty</a>()</div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;{</div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;        <span class="keywordflow">if</span> (this-&gt;<a class="code" href="classBaseCursor.html#a436af4c6441ec1ffb0f747c9127e7c02">type</a> != <a class="code" href="group__viewport__group.html#ggabbe637356c8cb749a9726f13658031faae83492340bb582cb358889cfd11d7672">CUR_TYPE_INVALID</a>) this-&gt;<a class="code" href="classBaseCursor.html#aa3a090515b45b932a3e3eed5d6be8268">vp</a>-&gt;<a class="code" href="classViewport.html#a8f1babfcd8b2768b3251c0c879afe19b">MarkVoxelDirty</a>(this-&gt;<a class="code" href="classCursor.html#ac01d0c964a1e17214e77b786bf283e9a">cursor_pos</a>);</div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;}</div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;</div>
<div class="line"><a name="l00508"></a><span class="lineno"><a class="line" href="classCursor.html#a170e6df8f5803a6f847f111382e97f93">  508</a></span>&#160;<a class="code" href="group__viewport__group.html#gabbe637356c8cb749a9726f13658031fa">CursorType</a> <a class="code" href="classCursor.html#a170e6df8f5803a6f847f111382e97f93">Cursor::GetCursor</a>(<span class="keyword">const</span> <a class="code" href="structXYZPoint.html">XYZPoint16</a> &amp;cursor_pos)</div>
<div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;{</div>
<div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;        <span class="keywordflow">if</span> (this-&gt;cursor_pos != cursor_pos) <span class="keywordflow">return</span> <a class="code" href="group__viewport__group.html#ggabbe637356c8cb749a9726f13658031faae83492340bb582cb358889cfd11d7672">CUR_TYPE_INVALID</a>;</div>
<div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;        <span class="keywordflow">return</span> this-&gt;<a class="code" href="classBaseCursor.html#a436af4c6441ec1ffb0f747c9127e7c02">type</a>;</div>
<div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;}</div>
<div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;</div>
<div class="line"><a name="l00514"></a><span class="lineno"><a class="line" href="classCursor.html#ab3f1ef7da77cbc6f24978c98d9e0e673">  514</a></span>&#160;<a class="code" href="stdafx_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> <a class="code" href="classCursor.html#ab3f1ef7da77cbc6f24978c98d9e0e673">Cursor::GetMaxCursorHeight</a>(<a class="code" href="stdafx_8h.html#a05f6b0ae8f6a6e135b0e290c25fe0e4e">uint16</a> xpos, <a class="code" href="stdafx_8h.html#a05f6b0ae8f6a6e135b0e290c25fe0e4e">uint16</a> ypos, <a class="code" href="stdafx_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> zpos)</div>
<div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;{</div>
<div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;        <span class="keywordflow">if</span> (this-&gt;<a class="code" href="classBaseCursor.html#a436af4c6441ec1ffb0f747c9127e7c02">type</a> == <a class="code" href="group__viewport__group.html#ggabbe637356c8cb749a9726f13658031faae83492340bb582cb358889cfd11d7672">CUR_TYPE_INVALID</a>) <span class="keywordflow">return</span> zpos;</div>
<div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;        <span class="keywordflow">if</span> (this-&gt;<a class="code" href="classCursor.html#ac01d0c964a1e17214e77b786bf283e9a">cursor_pos</a>.<a class="code" href="structXYZPoint.html#a77a7984ac0a26ecb76acb94bbcf96a48">x</a> != xpos || this-&gt;cursor_pos.y != ypos || zpos &gt;= this-&gt;cursor_pos.z) <span class="keywordflow">return</span> zpos;</div>
<div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;        <span class="keywordflow">return</span> this-&gt;<a class="code" href="classCursor.html#ac01d0c964a1e17214e77b786bf283e9a">cursor_pos</a>.<a class="code" href="structXYZPoint.html#a97215f048dde4da40be2742267ab7224">z</a>;</div>
<div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;}</div>
<div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;</div>
<div class="line"><a name="l00528"></a><span class="lineno"><a class="line" href="classCursor.html#a4efcb61a295b09d87fa1130fa642da4c">  528</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classCursor.html#a4efcb61a295b09d87fa1130fa642da4c">Cursor::SetCursor</a>(<span class="keyword">const</span> <a class="code" href="structXYZPoint.html">XYZPoint16</a> &amp;cursor_pos, <a class="code" href="group__viewport__group.html#gabbe637356c8cb749a9726f13658031fa">CursorType</a> type, <span class="keywordtype">bool</span> always)</div>
<div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;{</div>
<div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;        <span class="keywordflow">if</span> (!always &amp;&amp; this-&gt;cursor_pos == cursor_pos &amp;&amp; this-&gt;type == type) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;        this-&gt;<a class="code" href="classCursor.html#a0b0ce3458c817aa4f58cd2ffe61b5d92">MarkDirty</a>();</div>
<div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;        this-&gt;cursor_pos = <a class="code" href="classCursor.html#ac01d0c964a1e17214e77b786bf283e9a">cursor_pos</a>;</div>
<div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;        this-&gt;type = <a class="code" href="classBaseCursor.html#a436af4c6441ec1ffb0f747c9127e7c02">type</a>;</div>
<div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;        this-&gt;<a class="code" href="classCursor.html#a0b0ce3458c817aa4f58cd2ffe61b5d92">MarkDirty</a>();</div>
<div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;}</div>
<div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;</div>
<div class="line"><a name="l00542"></a><span class="lineno"><a class="line" href="classMultiCursor.html#a77685c22145bfb0208a4a60caebd77c7">  542</a></span>&#160;<a class="code" href="classMultiCursor.html#a77685c22145bfb0208a4a60caebd77c7">MultiCursor::MultiCursor</a>(<a class="code" href="classViewport.html">Viewport</a> *vp) : <a class="code" href="classBaseCursor.html">BaseCursor</a>(vp)</div>
<div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;{</div>
<div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;        this-&gt;<a class="code" href="classMultiCursor.html#ae7741fd6e48ad4b55a9e113a71f37740">ClearZPositions</a>();</div>
<div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;}</div>
<div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;</div>
<div class="line"><a name="l00548"></a><span class="lineno"><a class="line" href="classMultiCursor.html#ae7741fd6e48ad4b55a9e113a71f37740">  548</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classMultiCursor.html#ae7741fd6e48ad4b55a9e113a71f37740">MultiCursor::ClearZPositions</a>()</div>
<div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;{</div>
<div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> x = 0; x &lt; 10; x++) {</div>
<div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;                <span class="keywordflow">for</span> (<span class="keywordtype">int</span> y = 0; y &lt; 10; y++) {</div>
<div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;                        this-&gt;<a class="code" href="classMultiCursor.html#aa4242aef4d873953ebd6cda05a1bb7a4">zpos</a>[x][y] = -1;</div>
<div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;                }</div>
<div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;        }</div>
<div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;}</div>
<div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;</div>
<div class="line"><a name="l00561"></a><span class="lineno"><a class="line" href="classMultiCursor.html#ac81c3926d3d49b3854c5920e256b0330">  561</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classMultiCursor.html#ac81c3926d3d49b3854c5920e256b0330">MultiCursor::ResetZPosition</a>(<span class="keyword">const</span> <a class="code" href="structPoint.html">Point32</a> &amp;pos)</div>
<div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;{</div>
<div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;        <span class="keywordflow">if</span> (this-&gt;<a class="code" href="classMultiCursor.html#a53879b65a701a9a4f12dc7feb8f00dbc">rect</a>.<a class="code" href="structRectangle.html#ad341d4fed90dabd15f48d4291431c9f0">IsPointInside</a>(pos)) {</div>
<div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;                this-&gt;<a class="code" href="classMultiCursor.html#aa4242aef4d873953ebd6cda05a1bb7a4">zpos</a>[pos.<a class="code" href="structPoint.html#af0836c7f2eec563aa7bc20d8cfa5dd2a">x</a> - this-&gt;<a class="code" href="classMultiCursor.html#a53879b65a701a9a4f12dc7feb8f00dbc">rect</a>.<a class="code" href="structRectangle.html#ab794667ffad2a46061bc417f99c031cc">base</a>.<a class="code" href="structPoint.html#af0836c7f2eec563aa7bc20d8cfa5dd2a">x</a>][pos.<a class="code" href="structPoint.html#a56c3dcea91f03182921eea9a5cf555a3">y</a> - this-&gt;<a class="code" href="classMultiCursor.html#a53879b65a701a9a4f12dc7feb8f00dbc">rect</a>.<a class="code" href="structRectangle.html#ab794667ffad2a46061bc417f99c031cc">base</a>.<a class="code" href="structPoint.html#a56c3dcea91f03182921eea9a5cf555a3">y</a>] = -1;</div>
<div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;        }</div>
<div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;}</div>
<div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;</div>
<div class="line"><a name="l00576"></a><span class="lineno"><a class="line" href="classMultiCursor.html#adc1857609eab480a07e576015fe1353e">  576</a></span>&#160;<a class="code" href="stdafx_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> <a class="code" href="classMultiCursor.html#adc1857609eab480a07e576015fe1353e">MultiCursor::GetZpos</a>(<span class="keywordtype">int</span> xpos, <span class="keywordtype">int</span> ypos)</div>
<div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;{</div>
<div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;        <span class="keywordtype">int</span> xoff = xpos - this-&gt;<a class="code" href="classMultiCursor.html#a53879b65a701a9a4f12dc7feb8f00dbc">rect</a>.<a class="code" href="structRectangle.html#ab794667ffad2a46061bc417f99c031cc">base</a>.<a class="code" href="structPoint.html#af0836c7f2eec563aa7bc20d8cfa5dd2a">x</a>;</div>
<div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;        <span class="keywordtype">int</span> yoff = ypos - this-&gt;<a class="code" href="classMultiCursor.html#a53879b65a701a9a4f12dc7feb8f00dbc">rect</a>.<a class="code" href="structRectangle.html#ab794667ffad2a46061bc417f99c031cc">base</a>.<a class="code" href="structPoint.html#a56c3dcea91f03182921eea9a5cf555a3">y</a>;</div>
<div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;        assert(xoff &gt;= 0 &amp;&amp; xoff &lt; (<span class="keywordtype">int</span>)this-&gt;<a class="code" href="classMultiCursor.html#a53879b65a701a9a4f12dc7feb8f00dbc">rect</a>.<a class="code" href="structRectangle.html#a82ad3c804a2bdb269926f29a2574c22b">width</a>);</div>
<div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;        assert(yoff &gt;= 0 &amp;&amp; yoff &lt; (<span class="keywordtype">int</span>)this-&gt;<a class="code" href="classMultiCursor.html#a53879b65a701a9a4f12dc7feb8f00dbc">rect</a>.<a class="code" href="structRectangle.html#aa81e161d1fdaa8801d202f59b4d541e0">height</a>);</div>
<div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;</div>
<div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;        <span class="keywordflow">if</span> (this-&gt;<a class="code" href="classMultiCursor.html#aa4242aef4d873953ebd6cda05a1bb7a4">zpos</a>[xoff][yoff] &lt; 0) this-&gt;<a class="code" href="classMultiCursor.html#aa4242aef4d873953ebd6cda05a1bb7a4">zpos</a>[xoff][yoff] = <a class="code" href="group__map__group.html#gae1beaf14b9effb4a54e82830c7b36616">_world</a>.<a class="code" href="classVoxelWorld.html#a2a8445ac1efd4315e64819a61ab8e94a">GetGroundHeight</a>(xpos, ypos);</div>
<div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;        <span class="keywordflow">return</span> this-&gt;<a class="code" href="classMultiCursor.html#aa4242aef4d873953ebd6cda05a1bb7a4">zpos</a>[xoff][yoff];</div>
<div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;}</div>
<div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;</div>
<div class="line"><a name="l00587"></a><span class="lineno"><a class="line" href="classMultiCursor.html#a242f163f169ded10c0130c6418a35475">  587</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classMultiCursor.html#a242f163f169ded10c0130c6418a35475">MultiCursor::MarkDirty</a>()</div>
<div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;{</div>
<div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;        <span class="keywordflow">if</span> (this-&gt;<a class="code" href="classBaseCursor.html#a436af4c6441ec1ffb0f747c9127e7c02">type</a> == <a class="code" href="group__viewport__group.html#ggabbe637356c8cb749a9726f13658031faae83492340bb582cb358889cfd11d7672">CUR_TYPE_INVALID</a>) <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;</div>
<div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;        <span class="keywordflow">for</span> (<a class="code" href="stdafx_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a> x = 0; x &lt; this-&gt;<a class="code" href="classMultiCursor.html#a53879b65a701a9a4f12dc7feb8f00dbc">rect</a>.<a class="code" href="structRectangle.html#a82ad3c804a2bdb269926f29a2574c22b">width</a>; x++) {</div>
<div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;                <span class="keywordflow">for</span> (<a class="code" href="stdafx_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a> y = 0; y &lt; this-&gt;<a class="code" href="classMultiCursor.html#a53879b65a701a9a4f12dc7feb8f00dbc">rect</a>.<a class="code" href="structRectangle.html#aa81e161d1fdaa8801d202f59b4d541e0">height</a>; y++) {</div>
<div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;                        this-&gt;<a class="code" href="classBaseCursor.html#aa3a090515b45b932a3e3eed5d6be8268">vp</a>-&gt;<a class="code" href="classViewport.html#a8f1babfcd8b2768b3251c0c879afe19b">MarkVoxelDirty</a>(<a class="code" href="geometry_8h.html#a71fcb91f44cc6cbf519d0c45c07e931d">XYZPoint16</a>(this-&gt;<a class="code" href="classMultiCursor.html#a53879b65a701a9a4f12dc7feb8f00dbc">rect</a>.<a class="code" href="structRectangle.html#ab794667ffad2a46061bc417f99c031cc">base</a>.<a class="code" href="structPoint.html#af0836c7f2eec563aa7bc20d8cfa5dd2a">x</a> + x, this-&gt;rect.base.y + y,</div>
<div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;                                        this-&gt;GetZpos(this-&gt;rect.base.x + x, this-&gt;rect.base.y + y)));</div>
<div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;                }</div>
<div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;        }</div>
<div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;}</div>
<div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;</div>
<div class="line"><a name="l00599"></a><span class="lineno"><a class="line" href="classMultiCursor.html#a3b8ef00f66c9e6727a30232def93230a">  599</a></span>&#160;<a class="code" href="group__viewport__group.html#gabbe637356c8cb749a9726f13658031fa">CursorType</a> <a class="code" href="classMultiCursor.html#a3b8ef00f66c9e6727a30232def93230a">MultiCursor::GetCursor</a>(<span class="keyword">const</span> <a class="code" href="structXYZPoint.html">XYZPoint16</a> &amp;cursor_pos)</div>
<div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;{</div>
<div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;        <span class="keywordflow">if</span> (this-&gt;<a class="code" href="classBaseCursor.html#a436af4c6441ec1ffb0f747c9127e7c02">type</a> == <a class="code" href="group__viewport__group.html#ggabbe637356c8cb749a9726f13658031faae83492340bb582cb358889cfd11d7672">CUR_TYPE_INVALID</a>) <span class="keywordflow">return</span> <a class="code" href="group__viewport__group.html#ggabbe637356c8cb749a9726f13658031faae83492340bb582cb358889cfd11d7672">CUR_TYPE_INVALID</a>;</div>
<div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;</div>
<div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;        <a class="code" href="structPoint.html">Point32</a> pt(cursor_pos.<a class="code" href="structXYZPoint.html#a77a7984ac0a26ecb76acb94bbcf96a48">x</a>, cursor_pos.<a class="code" href="structXYZPoint.html#aea2c3552caee6e81c3b007ff78834b99">y</a>);</div>
<div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;        <span class="keywordflow">if</span> (!this-&gt;<a class="code" href="classMultiCursor.html#a53879b65a701a9a4f12dc7feb8f00dbc">rect</a>.<a class="code" href="structRectangle.html#ad341d4fed90dabd15f48d4291431c9f0">IsPointInside</a>(pt)) <span class="keywordflow">return</span> <a class="code" href="group__viewport__group.html#ggabbe637356c8cb749a9726f13658031faae83492340bb582cb358889cfd11d7672">CUR_TYPE_INVALID</a>;</div>
<div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;        <span class="keywordflow">if</span> (cursor_pos.<a class="code" href="structXYZPoint.html#a97215f048dde4da40be2742267ab7224">z</a> != this-&gt;GetZpos(cursor_pos.<a class="code" href="structXYZPoint.html#a77a7984ac0a26ecb76acb94bbcf96a48">x</a>, cursor_pos.<a class="code" href="structXYZPoint.html#aea2c3552caee6e81c3b007ff78834b99">y</a>)) <span class="keywordflow">return</span> <a class="code" href="group__viewport__group.html#ggabbe637356c8cb749a9726f13658031faae83492340bb582cb358889cfd11d7672">CUR_TYPE_INVALID</a>;</div>
<div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="group__viewport__group.html#ggabbe637356c8cb749a9726f13658031faae1019b8e1fe16fadce868506261fd753">CUR_TYPE_TILE</a>;</div>
<div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;}</div>
<div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;</div>
<div class="line"><a name="l00609"></a><span class="lineno"><a class="line" href="classMultiCursor.html#ad88a45d0d6e0d3b920ff952c67f712d8">  609</a></span>&#160;<a class="code" href="stdafx_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> <a class="code" href="classMultiCursor.html#ad88a45d0d6e0d3b920ff952c67f712d8">MultiCursor::GetMaxCursorHeight</a>(<a class="code" href="stdafx_8h.html#a05f6b0ae8f6a6e135b0e290c25fe0e4e">uint16</a> xpos, <a class="code" href="stdafx_8h.html#a05f6b0ae8f6a6e135b0e290c25fe0e4e">uint16</a> ypos, <a class="code" href="stdafx_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> zpos)</div>
<div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;{</div>
<div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;        <span class="keywordflow">if</span> (this-&gt;<a class="code" href="classBaseCursor.html#a436af4c6441ec1ffb0f747c9127e7c02">type</a> == <a class="code" href="group__viewport__group.html#ggabbe637356c8cb749a9726f13658031faae83492340bb582cb358889cfd11d7672">CUR_TYPE_INVALID</a>) <span class="keywordflow">return</span> <a class="code" href="classMultiCursor.html#aa4242aef4d873953ebd6cda05a1bb7a4">zpos</a>;</div>
<div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;</div>
<div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;        <a class="code" href="structPoint.html">Point32</a> pt(xpos, ypos);</div>
<div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;        <span class="keywordflow">if</span> (!this-&gt;<a class="code" href="classMultiCursor.html#a53879b65a701a9a4f12dc7feb8f00dbc">rect</a>.<a class="code" href="structRectangle.html#ad341d4fed90dabd15f48d4291431c9f0">IsPointInside</a>(pt)) <span class="keywordflow">return</span> zpos;</div>
<div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;        <span class="keywordflow">return</span> std::max(zpos, this-&gt;<a class="code" href="classMultiCursor.html#adc1857609eab480a07e576015fe1353e">GetZpos</a>(xpos, ypos));</div>
<div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;}</div>
<div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;</div>
<div class="line"><a name="l00626"></a><span class="lineno"><a class="line" href="classMultiCursor.html#ac47feb00b1711f3a6e83dc0d323f1a78">  626</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classMultiCursor.html#ac47feb00b1711f3a6e83dc0d323f1a78">MultiCursor::SetCursor</a>(<span class="keyword">const</span> <a class="code" href="structRectangle.html">Rectangle32</a> &amp;rect, <a class="code" href="group__viewport__group.html#gabbe637356c8cb749a9726f13658031fa">CursorType</a> type, <span class="keywordtype">bool</span> always)</div>
<div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;{</div>
<div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;        <span class="keywordflow">if</span> (type == <a class="code" href="group__viewport__group.html#ggabbe637356c8cb749a9726f13658031faae83492340bb582cb358889cfd11d7672">CUR_TYPE_INVALID</a>) {</div>
<div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;                <span class="keywordflow">if</span> (!always &amp;&amp; this-&gt;type == <a class="code" href="group__viewport__group.html#ggabbe637356c8cb749a9726f13658031faae83492340bb582cb358889cfd11d7672">CUR_TYPE_INVALID</a>) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;                this-&gt;<a class="code" href="classMultiCursor.html#a242f163f169ded10c0130c6418a35475">MarkDirty</a>();</div>
<div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;                this-&gt;type = <a class="code" href="classBaseCursor.html#a436af4c6441ec1ffb0f747c9127e7c02">type</a>;</div>
<div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;                <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;        }</div>
<div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;        assert(type == <a class="code" href="group__viewport__group.html#ggabbe637356c8cb749a9726f13658031faae1019b8e1fe16fadce868506261fd753">CUR_TYPE_TILE</a>);</div>
<div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;</div>
<div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;        <span class="comment">/* Copy and sanitize cursor. */</span></div>
<div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;        <a class="code" href="structRectangle.html">Rectangle32</a> r(rect);</div>
<div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;        r.<a class="code" href="structRectangle.html#a73dcb7553002488af2f8a61a441040dc">RestrictTo</a>(0, 0, static_cast&lt;int&gt;(<a class="code" href="group__map__group.html#gae1beaf14b9effb4a54e82830c7b36616">_world</a>.<a class="code" href="classVoxelWorld.html#a5bc499626f6ca0544683535d36b5917a">GetXSize</a>()), static_cast&lt;int&gt;(<a class="code" href="group__map__group.html#gae1beaf14b9effb4a54e82830c7b36616">_world</a>.<a class="code" href="classVoxelWorld.html#a4b99ca56b6b030033263b1397b2bdc41">GetYSize</a>()));</div>
<div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;        <span class="keywordflow">if</span> (r.<a class="code" href="structRectangle.html#a82ad3c804a2bdb269926f29a2574c22b">width</a> &gt; 10) r.<a class="code" href="structRectangle.html#a82ad3c804a2bdb269926f29a2574c22b">width</a> = 10;</div>
<div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;        <span class="keywordflow">if</span> (r.<a class="code" href="structRectangle.html#aa81e161d1fdaa8801d202f59b4d541e0">height</a> &gt; 10) r.<a class="code" href="structRectangle.html#aa81e161d1fdaa8801d202f59b4d541e0">height</a> = 10;</div>
<div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;        <span class="keywordflow">if</span> (r.<a class="code" href="structRectangle.html#a82ad3c804a2bdb269926f29a2574c22b">width</a> == 0 || r.<a class="code" href="structRectangle.html#aa81e161d1fdaa8801d202f59b4d541e0">height</a> == 0) {</div>
<div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;                <span class="comment">// Empty tile cursor is invalid.</span></div>
<div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;                <span class="keywordflow">if</span> (!always &amp;&amp; this-&gt;type == <a class="code" href="group__viewport__group.html#ggabbe637356c8cb749a9726f13658031faae83492340bb582cb358889cfd11d7672">CUR_TYPE_INVALID</a>) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;                this-&gt;<a class="code" href="classMultiCursor.html#a242f163f169ded10c0130c6418a35475">MarkDirty</a>();</div>
<div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;                this-&gt;type = <a class="code" href="group__viewport__group.html#ggabbe637356c8cb749a9726f13658031faae83492340bb582cb358889cfd11d7672">CUR_TYPE_INVALID</a>;</div>
<div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;                <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;        }</div>
<div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;</div>
<div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;        <span class="keywordflow">if</span> (!always &amp;&amp; this-&gt;rect == r) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;</div>
<div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;        this-&gt;<a class="code" href="classMultiCursor.html#a242f163f169ded10c0130c6418a35475">MarkDirty</a>();</div>
<div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;        this-&gt;rect = r;</div>
<div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;        this-&gt;<a class="code" href="classMultiCursor.html#ae7741fd6e48ad4b55a9e113a71f37740">ClearZPositions</a>();</div>
<div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;        this-&gt;type = <a class="code" href="classBaseCursor.html#a436af4c6441ec1ffb0f747c9127e7c02">type</a>;</div>
<div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;        this-&gt;<a class="code" href="classMultiCursor.html#a242f163f169ded10c0130c6418a35475">MarkDirty</a>();</div>
<div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;}</div>
<div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;</div>
<div class="line"><a name="l00663"></a><span class="lineno"><a class="line" href="classEdgeCursor.html#a748737c5512a1c9811ee198d7f428f40">  663</a></span>&#160;<a class="code" href="classEdgeCursor.html#a748737c5512a1c9811ee198d7f428f40">EdgeCursor::EdgeCursor</a>(<a class="code" href="classViewport.html">Viewport</a> *vp) : <a class="code" href="classBaseCursor.html">BaseCursor</a>(vp)</div>
<div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;{</div>
<div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;        this-&gt;<a class="code" href="classEdgeCursor.html#aa4d9c783417ddd380aabdf2a51e35e7e">cursor_pos</a> = <a class="code" href="geometry_8h.html#a71fcb91f44cc6cbf519d0c45c07e931d">XYZPoint16</a>(0, 0, 0);</div>
<div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;}</div>
<div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;</div>
<div class="line"><a name="l00668"></a><span class="lineno"><a class="line" href="classEdgeCursor.html#ab49ffb0b2a013e3e306ed1bbc3e9cca4">  668</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classEdgeCursor.html#ab49ffb0b2a013e3e306ed1bbc3e9cca4">EdgeCursor::MarkDirty</a>()</div>
<div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;{</div>
<div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;        <span class="keywordflow">if</span> (this-&gt;<a class="code" href="classBaseCursor.html#a436af4c6441ec1ffb0f747c9127e7c02">type</a> != <a class="code" href="group__viewport__group.html#ggabbe637356c8cb749a9726f13658031faae83492340bb582cb358889cfd11d7672">CUR_TYPE_INVALID</a>) this-&gt;<a class="code" href="classBaseCursor.html#aa3a090515b45b932a3e3eed5d6be8268">vp</a>-&gt;<a class="code" href="classViewport.html#a8f1babfcd8b2768b3251c0c879afe19b">MarkVoxelDirty</a>(this-&gt;<a class="code" href="classEdgeCursor.html#aa4d9c783417ddd380aabdf2a51e35e7e">cursor_pos</a>);</div>
<div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;}</div>
<div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;</div>
<div class="line"><a name="l00678"></a><span class="lineno"><a class="line" href="classEdgeCursor.html#ab266e20df1669efe15186b5feafeae98">  678</a></span>&#160;<a class="code" href="group__viewport__group.html#gabbe637356c8cb749a9726f13658031fa">CursorType</a> <a class="code" href="classEdgeCursor.html#ab266e20df1669efe15186b5feafeae98">EdgeCursor::GetCursor</a>(<span class="keyword">const</span> <a class="code" href="structXYZPoint.html">XYZPoint16</a> &amp;cursor_pos)</div>
<div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;{</div>
<div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;        <span class="keywordflow">if</span> (this-&gt;cursor_pos != cursor_pos) <span class="keywordflow">return</span> <a class="code" href="group__viewport__group.html#ggabbe637356c8cb749a9726f13658031faae83492340bb582cb358889cfd11d7672">CUR_TYPE_INVALID</a>;</div>
<div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;        <span class="keywordflow">return</span> this-&gt;<a class="code" href="classBaseCursor.html#a436af4c6441ec1ffb0f747c9127e7c02">type</a>;</div>
<div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;}</div>
<div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;</div>
<div class="line"><a name="l00684"></a><span class="lineno"><a class="line" href="classEdgeCursor.html#add804cbd3f7f592aeb0ce8b4d10502f1">  684</a></span>&#160;<a class="code" href="stdafx_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> <a class="code" href="classEdgeCursor.html#add804cbd3f7f592aeb0ce8b4d10502f1">EdgeCursor::GetMaxCursorHeight</a>(<a class="code" href="stdafx_8h.html#a05f6b0ae8f6a6e135b0e290c25fe0e4e">uint16</a> xpos, <a class="code" href="stdafx_8h.html#a05f6b0ae8f6a6e135b0e290c25fe0e4e">uint16</a> ypos, <a class="code" href="stdafx_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> zpos)</div>
<div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;{</div>
<div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;        <span class="keywordflow">if</span> (this-&gt;<a class="code" href="classBaseCursor.html#a436af4c6441ec1ffb0f747c9127e7c02">type</a> == <a class="code" href="group__viewport__group.html#ggabbe637356c8cb749a9726f13658031faae83492340bb582cb358889cfd11d7672">CUR_TYPE_INVALID</a>) <span class="keywordflow">return</span> zpos;</div>
<div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;        <span class="keywordflow">if</span> (this-&gt;<a class="code" href="classEdgeCursor.html#aa4d9c783417ddd380aabdf2a51e35e7e">cursor_pos</a>.<a class="code" href="structXYZPoint.html#a77a7984ac0a26ecb76acb94bbcf96a48">x</a> != xpos || this-&gt;cursor_pos.y != ypos || zpos &gt;= this-&gt;cursor_pos.z) <span class="keywordflow">return</span> zpos;</div>
<div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;        <span class="keywordflow">return</span> this-&gt;<a class="code" href="classEdgeCursor.html#aa4d9c783417ddd380aabdf2a51e35e7e">cursor_pos</a>.<a class="code" href="structXYZPoint.html#a97215f048dde4da40be2742267ab7224">z</a>;</div>
<div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;}</div>
<div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;</div>
<div class="line"><a name="l00700"></a><span class="lineno"><a class="line" href="classEdgeCursor.html#a004ba6e1229b1c7a0e9d991a704a21bb">  700</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classEdgeCursor.html#a004ba6e1229b1c7a0e9d991a704a21bb">EdgeCursor::SetCursor</a>(<span class="keyword">const</span> <a class="code" href="structXYZPoint.html">XYZPoint16</a> &amp;cursor_pos, <a class="code" href="group__viewport__group.html#gabbe637356c8cb749a9726f13658031fa">CursorType</a> type, <span class="keyword">const</span> <a class="code" href="classImageData.html">ImageData</a> *sprite, <a class="code" href="stdafx_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> yoffset, <span class="keywordtype">bool</span> always)</div>
<div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;{</div>
<div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;        <span class="keywordflow">if</span> (!always &amp;&amp; this-&gt;cursor_pos == cursor_pos &amp;&amp; this-&gt;type == type) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;        this-&gt;<a class="code" href="classEdgeCursor.html#ab49ffb0b2a013e3e306ed1bbc3e9cca4">MarkDirty</a>();</div>
<div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;        this-&gt;cursor_pos = <a class="code" href="classEdgeCursor.html#aa4d9c783417ddd380aabdf2a51e35e7e">cursor_pos</a>;</div>
<div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;        this-&gt;type = <a class="code" href="classBaseCursor.html#a436af4c6441ec1ffb0f747c9127e7c02">type</a>;</div>
<div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;        this-&gt;sprite = <a class="code" href="classEdgeCursor.html#af522861f61cc3eff022d1e6f2a74fe46">sprite</a>;</div>
<div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;        this-&gt;yoffset = <a class="code" href="classEdgeCursor.html#a7d22417eaef578d4a4b3bff0877ce339">yoffset</a>;</div>
<div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;        this-&gt;<a class="code" href="classEdgeCursor.html#ab49ffb0b2a013e3e306ed1bbc3e9cca4">MarkDirty</a>();</div>
<div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;}</div>
<div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;</div>
<div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;</div>
<div class="line"><a name="l00718"></a><span class="lineno"><a class="line" href="classViewport.html#a57afb1b609dc0d7bed80ca49d5e3a41b">  718</a></span>&#160;<a class="code" href="group__viewport__group.html#gabbe637356c8cb749a9726f13658031fa">CursorType</a> <a class="code" href="classViewport.html#a57afb1b609dc0d7bed80ca49d5e3a41b">Viewport::GetCursorAtPos</a>(<span class="keyword">const</span> <a class="code" href="structXYZPoint.html">XYZPoint16</a> &amp;voxel_pos)</div>
<div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;{</div>
<div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;        <a class="code" href="group__viewport__group.html#gabbe637356c8cb749a9726f13658031fa">CursorType</a> ct = <a class="code" href="group__viewport__group.html#ggabbe637356c8cb749a9726f13658031faae83492340bb582cb358889cfd11d7672">CUR_TYPE_INVALID</a>;</div>
<div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;</div>
<div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;        <span class="keywordflow">if</span> (this-&gt;<a class="code" href="classViewport.html#a6bd1183c6460d8561206839907d9f05f">additions_enabled</a> &amp;&amp; !this-&gt;<a class="code" href="classViewport.html#ab7074c86c413aeb1f663521b61e2279a">additions_displayed</a>) {</div>
<div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;                ct = this-&gt;<a class="code" href="classViewport.html#a51aea10995fec2c7d0c2a9b8202e2fdb">arrow_cursor</a>.<a class="code" href="classCursor.html#a170e6df8f5803a6f847f111382e97f93">GetCursor</a>(voxel_pos);</div>
<div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;                <span class="keywordflow">if</span> (ct != <a class="code" href="group__viewport__group.html#ggabbe637356c8cb749a9726f13658031faae83492340bb582cb358889cfd11d7672">CUR_TYPE_INVALID</a>) <span class="keywordflow">return</span> ct;</div>
<div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;        }</div>
<div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;        ct = this-&gt;<a class="code" href="classViewport.html#ae7e716461b7573afdde9171b2303ce15">tile_cursor</a>.<a class="code" href="classCursor.html#a170e6df8f5803a6f847f111382e97f93">GetCursor</a>(voxel_pos);</div>
<div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;        <span class="keywordflow">if</span> (ct != <a class="code" href="group__viewport__group.html#ggabbe637356c8cb749a9726f13658031faae83492340bb582cb358889cfd11d7672">CUR_TYPE_INVALID</a>) <span class="keywordflow">return</span> ct;</div>
<div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;        ct = this-&gt;<a class="code" href="classViewport.html#a53aec1c55bc85eccb6cf3d89d1450ba2">area_cursor</a>.<a class="code" href="classMultiCursor.html#a3b8ef00f66c9e6727a30232def93230a">GetCursor</a>(voxel_pos);</div>
<div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;        <span class="keywordflow">if</span> (ct != <a class="code" href="group__viewport__group.html#ggabbe637356c8cb749a9726f13658031faae83492340bb582cb358889cfd11d7672">CUR_TYPE_INVALID</a>) <span class="keywordflow">return</span> ct;</div>
<div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;        <span class="keywordflow">return</span> this-&gt;<a class="code" href="classViewport.html#ae13c925863ce81890b375369fc6d5781">edge_cursor</a>.<a class="code" href="classEdgeCursor.html#ab266e20df1669efe15186b5feafeae98">GetCursor</a>(voxel_pos);</div>
<div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;}</div>
<div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;</div>
<div class="line"><a name="l00740"></a><span class="lineno"><a class="line" href="classViewport.html#a4bb0875319aca7c984be5d106594664c">  740</a></span>&#160;<a class="code" href="stdafx_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> <a class="code" href="classViewport.html#a4bb0875319aca7c984be5d106594664c">Viewport::GetMaxCursorHeight</a>(<a class="code" href="stdafx_8h.html#a05f6b0ae8f6a6e135b0e290c25fe0e4e">uint16</a> xpos, <a class="code" href="stdafx_8h.html#a05f6b0ae8f6a6e135b0e290c25fe0e4e">uint16</a> ypos, <a class="code" href="stdafx_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> zpos)</div>
<div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;{</div>
<div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;        <span class="keywordflow">if</span> (this-&gt;<a class="code" href="classViewport.html#a6bd1183c6460d8561206839907d9f05f">additions_enabled</a> &amp;&amp; !this-&gt;<a class="code" href="classViewport.html#ab7074c86c413aeb1f663521b61e2279a">additions_displayed</a>) {</div>
<div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;                zpos = this-&gt;<a class="code" href="classViewport.html#a51aea10995fec2c7d0c2a9b8202e2fdb">arrow_cursor</a>.<a class="code" href="classCursor.html#ab3f1ef7da77cbc6f24978c98d9e0e673">GetMaxCursorHeight</a>(xpos, ypos, zpos);</div>
<div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;        }</div>
<div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;        zpos = this-&gt;<a class="code" href="classViewport.html#ae7e716461b7573afdde9171b2303ce15">tile_cursor</a>.<a class="code" href="classCursor.html#ab3f1ef7da77cbc6f24978c98d9e0e673">GetMaxCursorHeight</a>(xpos, ypos, zpos);</div>
<div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;        zpos = this-&gt;<a class="code" href="classViewport.html#a53aec1c55bc85eccb6cf3d89d1450ba2">area_cursor</a>.<a class="code" href="classMultiCursor.html#ad88a45d0d6e0d3b920ff952c67f712d8">GetMaxCursorHeight</a>(xpos, ypos, zpos);</div>
<div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;        zpos = this-&gt;<a class="code" href="classViewport.html#ae13c925863ce81890b375369fc6d5781">edge_cursor</a>.<a class="code" href="classEdgeCursor.html#add804cbd3f7f592aeb0ce8b4d10502f1">GetMaxCursorHeight</a>(xpos, ypos, zpos);</div>
<div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;        assert(zpos != 255);</div>
<div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;        <span class="keywordflow">return</span> zpos;</div>
<div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;}</div>
<div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;</div>
<div class="line"><a name="l00759"></a><span class="lineno"><a class="line" href="classSpriteCollector.html#af7163b4b0c1657097def3b5fdce1b96c">  759</a></span>&#160;<span class="keyword">const</span> <a class="code" href="classImageData.html">ImageData</a> *<a class="code" href="classSpriteCollector.html#af7163b4b0c1657097def3b5fdce1b96c">SpriteCollector::GetCursorSpriteAtPos</a>(<span class="keyword">const</span> <a class="code" href="structXYZPoint.html">XYZPoint16</a> &amp;voxel_pos, <a class="code" href="stdafx_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> tslope, <a class="code" href="stdafx_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> &amp;yoffset)</div>
<div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;{</div>
<div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;        yoffset = 0;</div>
<div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;        <span class="keywordflow">if</span> (!this-&gt;<a class="code" href="classSpriteCollector.html#a40d01ca6dd6a52cbe6a61a39c2c3be42">enable_cursors</a>) <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;</div>
<div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;        <a class="code" href="group__viewport__group.html#gabbe637356c8cb749a9726f13658031fa">CursorType</a> ctype = this-&gt;<a class="code" href="classVoxelCollector.html#afa04c64dc66f1adecebe2a0d7fb2681c">vp</a>-&gt;<a class="code" href="classViewport.html#a57afb1b609dc0d7bed80ca49d5e3a41b">GetCursorAtPos</a>(voxel_pos);</div>
<div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;        <span class="keywordflow">switch</span> (ctype) {</div>
<div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;                <span class="keywordflow">case</span> <a class="code" href="group__viewport__group.html#ggabbe637356c8cb749a9726f13658031faa917afaf61fa7538809c9043217260097">CUR_TYPE_NORTH</a>:</div>
<div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;                <span class="keywordflow">case</span> <a class="code" href="group__viewport__group.html#ggabbe637356c8cb749a9726f13658031faad1b395b03ca3b5a1836c5dffbff3a3c9">CUR_TYPE_EAST</a>:</div>
<div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;                <span class="keywordflow">case</span> <a class="code" href="group__viewport__group.html#ggabbe637356c8cb749a9726f13658031faa3d46060b12c67710f20827a93e863f81">CUR_TYPE_SOUTH</a>:</div>
<div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;                <span class="keywordflow">case</span> <a class="code" href="group__viewport__group.html#ggabbe637356c8cb749a9726f13658031faa20dc9c5aaa4401869852069ae80339ec">CUR_TYPE_WEST</a>: {</div>
<div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;                        <a class="code" href="group__map__group.html#gabad48584a1852521ff578b647f07fdd3">ViewOrientation</a> vor = <a class="code" href="group__map__group.html#gac3ebfef360c9e7b2049ec355ac9b3bf5">SubtractOrientations</a>((<a class="code" href="group__map__group.html#gabad48584a1852521ff578b647f07fdd3">ViewOrientation</a>)(ctype - <a class="code" href="group__viewport__group.html#ggabbe637356c8cb749a9726f13658031faa917afaf61fa7538809c9043217260097">CUR_TYPE_NORTH</a>), this-&gt;<a class="code" href="classVoxelCollector.html#a95f3b9137ebbcf6851d24c27bbcece2c">orient</a>);</div>
<div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;                        <span class="keywordflow">return</span> this-&gt;<a class="code" href="classVoxelCollector.html#a8270a2843c6824b485561e9721fa215d">sprites</a>-&gt;<a class="code" href="classSpriteStorage.html#a5279f5e16c421a883edee53599230389">GetCornerSprite</a>(tslope, this-&gt;<a class="code" href="classVoxelCollector.html#a95f3b9137ebbcf6851d24c27bbcece2c">orient</a>, vor);</div>
<div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;                }</div>
<div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;</div>
<div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;                <span class="keywordflow">case</span> <a class="code" href="group__viewport__group.html#ggabbe637356c8cb749a9726f13658031faae1019b8e1fe16fadce868506261fd753">CUR_TYPE_TILE</a>:</div>
<div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;                        <span class="keywordflow">return</span> this-&gt;<a class="code" href="classVoxelCollector.html#a8270a2843c6824b485561e9721fa215d">sprites</a>-&gt;<a class="code" href="classSpriteStorage.html#ab957fef30b88d860224ca7718817f943">GetCursorSprite</a>(tslope, this-&gt;<a class="code" href="classVoxelCollector.html#a95f3b9137ebbcf6851d24c27bbcece2c">orient</a>);</div>
<div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;</div>
<div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;                <span class="keywordflow">case</span> <a class="code" href="group__viewport__group.html#ggabbe637356c8cb749a9726f13658031faa5e75ae003f5020916655bd0bf0248c4a">CUR_TYPE_ARROW_NE</a>:</div>
<div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;                <span class="keywordflow">case</span> <a class="code" href="group__viewport__group.html#ggabbe637356c8cb749a9726f13658031faafc289eaa70cdbe934252056b9d0975d9">CUR_TYPE_ARROW_SE</a>:</div>
<div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;                <span class="keywordflow">case</span> <a class="code" href="group__viewport__group.html#ggabbe637356c8cb749a9726f13658031faaf34667b209126f39a5be38cbbe233edd">CUR_TYPE_ARROW_SW</a>:</div>
<div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;                <span class="keywordflow">case</span> <a class="code" href="group__viewport__group.html#ggabbe637356c8cb749a9726f13658031faab0c51ec834f897eecda196d84bb6e538">CUR_TYPE_ARROW_NW</a>:</div>
<div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;                        <span class="keywordflow">return</span> this-&gt;<a class="code" href="classVoxelCollector.html#a8270a2843c6824b485561e9721fa215d">sprites</a>-&gt;<a class="code" href="classSpriteStorage.html#ad19f0d72d47000ff2be372ef5a865e3d">GetArrowSprite</a>(ctype - <a class="code" href="group__viewport__group.html#ggabbe637356c8cb749a9726f13658031faa5e75ae003f5020916655bd0bf0248c4a">CUR_TYPE_ARROW_NE</a>, this-&gt;<a class="code" href="classVoxelCollector.html#a95f3b9137ebbcf6851d24c27bbcece2c">orient</a>);</div>
<div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;</div>
<div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;                <span class="keywordflow">case</span> <a class="code" href="group__viewport__group.html#ggabbe637356c8cb749a9726f13658031faabf1f1bb0d119811c2f6816593a298233">CUR_TYPE_EDGE_NE</a>:</div>
<div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;                <span class="keywordflow">case</span> <a class="code" href="group__viewport__group.html#ggabbe637356c8cb749a9726f13658031faa64df374fceaf9c135a8e730e090599d3">CUR_TYPE_EDGE_SE</a>:</div>
<div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;                <span class="keywordflow">case</span> <a class="code" href="group__viewport__group.html#ggabbe637356c8cb749a9726f13658031faa2a5082d288ce007dfe479ab146c4483c">CUR_TYPE_EDGE_SW</a>:</div>
<div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;                <span class="keywordflow">case</span> <a class="code" href="group__viewport__group.html#ggabbe637356c8cb749a9726f13658031faada2443b7b4951031dd7c40b248222509">CUR_TYPE_EDGE_NW</a>: {</div>
<div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;                        <a class="code" href="classViewport.html">Viewport</a> *<a class="code" href="classVoxelCollector.html#afa04c64dc66f1adecebe2a0d7fb2681c">vp</a> = <a class="code" href="viewport_8cpp.html#a168b8e1038efc200816524bab3092311">GetViewport</a>();</div>
<div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;                        <span class="keywordflow">if</span> (vp != <span class="keyword">nullptr</span>) {</div>
<div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;                                yoffset = vp-&gt;<a class="code" href="classViewport.html#ae13c925863ce81890b375369fc6d5781">edge_cursor</a>.<a class="code" href="classEdgeCursor.html#a7d22417eaef578d4a4b3bff0877ce339">yoffset</a>;</div>
<div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;                                <span class="keywordflow">return</span> vp-&gt;<a class="code" href="classViewport.html#ae13c925863ce81890b375369fc6d5781">edge_cursor</a>.<a class="code" href="classEdgeCursor.html#af522861f61cc3eff022d1e6f2a74fe46">sprite</a>;</div>
<div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;                        }</div>
<div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;                        <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;                }</div>
<div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;</div>
<div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;                <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;                        <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;        }</div>
<div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;}</div>
<div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;</div>
<div class="line"><a name="l00800"></a><span class="lineno"><a class="line" href="classSpriteCollector.html#a9f426c1aa07df9863fd3ffe4064e6dc4">  800</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classSpriteCollector.html#a9f426c1aa07df9863fd3ffe4064e6dc4">SpriteCollector::SetupSupports</a>(<span class="keyword">const</span> <a class="code" href="classVoxelStack.html">VoxelStack</a> *stack, <a class="code" href="stdafx_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a> xpos, <a class="code" href="stdafx_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a> ypos)</div>
<div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;{</div>
<div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;        <span class="keywordflow">for</span> (<a class="code" href="stdafx_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a> i = 0; i &lt; stack-&gt;<a class="code" href="classVoxelStack.html#a26af67d6e9363114f75a6e3570a211ba">height</a>; i++) {</div>
<div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;                <span class="keyword">const</span> <a class="code" href="structVoxel.html">Voxel</a> *v = &amp;stack-&gt;<a class="code" href="classVoxelStack.html#ac44c1a794c29fd1c88f1d88f2db3c316">voxels</a>[i];</div>
<div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;                <span class="keywordflow">if</span> (v-&gt;<a class="code" href="structVoxel.html#a39b4316f246f89cc83a490c87edd7ac6">GetGroundType</a>() == <a class="code" href="group__map__group.html#ggad15436b50732bd9ef2b6f2efa5f400edaf0ceff8e769df0430417e0704018dfc7">GTP_INVALID</a>) <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;                <span class="keywordflow">if</span> (v-&gt;<a class="code" href="structVoxel.html#a78ee7c8c8e8e62d18733aed8c28cba56">GetInstance</a>() == <a class="code" href="map_8h.html#ada9f0c1420f66f999469d82ef2262280ac9a76026403b7122a5b727d52ae64a3a">SRI_FREE</a>) {</div>
<div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;                        this-&gt;<a class="code" href="classSpriteCollector.html#a1daa68f8402e1e22a7eb997eaf9195ae">ground_height</a> = stack-&gt;<a class="code" href="classVoxelStack.html#a1b4b53aef1bef7528d1eb330e32fa25e">base</a> + i;</div>
<div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;                        this-&gt;<a class="code" href="classSpriteCollector.html#a32f43c4ee8b6fb71887ac75891fc0038">ground_slope</a> = <a class="code" href="group__sprites__group.html#ga1b9fba91bd870bbbf9362b661153feed">_slope_rotation</a>[v-&gt;<a class="code" href="structVoxel.html#adf0e5dcd80753791808eca30dc90879a">GetGroundSlope</a>()][this-&gt;<a class="code" href="classVoxelCollector.html#a95f3b9137ebbcf6851d24c27bbcece2c">orient</a>];</div>
<div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;                        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;                }</div>
<div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;        }</div>
<div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;        this-&gt;<a class="code" href="classSpriteCollector.html#a1daa68f8402e1e22a7eb997eaf9195ae">ground_height</a> = -1;</div>
<div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;}</div>
<div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;</div>
<div class="line"><a name="l00829"></a><span class="lineno"><a class="line" href="viewport_8cpp.html#ab5343989a755d5a486399d48bf5b199e">  829</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="viewport_8cpp.html#ab5343989a755d5a486399d48bf5b199e">DrawRide</a>(<a class="code" href="stdafx_8h.html#a43d43196463bde49cb067f5c20ab8481">int32</a> slice, <span class="keywordtype">int</span> zpos, <a class="code" href="stdafx_8h.html#a43d43196463bde49cb067f5c20ab8481">int32</a> basex, <a class="code" href="stdafx_8h.html#a43d43196463bde49cb067f5c20ab8481">int32</a> basey, <a class="code" href="group__map__group.html#gabad48584a1852521ff578b647f07fdd3">ViewOrientation</a> orient, <a class="code" href="stdafx_8h.html#a05f6b0ae8f6a6e135b0e290c25fe0e4e">uint16</a> number, <a class="code" href="stdafx_8h.html#a05f6b0ae8f6a6e135b0e290c25fe0e4e">uint16</a> voxel_number, <a class="code" href="structDrawData.html">DrawData</a> *dd, <a class="code" href="stdafx_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> *platform)</div>
<div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;{</div>
<div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;        <span class="keyword">const</span> <a class="code" href="classRideInstance.html">RideInstance</a> *ri = <a class="code" href="ride__type_8cpp.html#a09f4be10d8b08c149e63a0b278accfef">_rides_manager</a>.<a class="code" href="classRidesManager.html#aa779068f98207a4bb13fe3ad7e16efa0">GetRideInstance</a>(number);</div>
<div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;        <span class="keywordflow">if</span> (ri == <span class="keyword">nullptr</span>) <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;        <span class="comment">/* Shops are connected in every direction. */</span></div>
<div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;        <span class="keywordflow">if</span> (platform != <span class="keyword">nullptr</span>) *platform = (ri-&gt;<a class="code" href="classRideInstance.html#af187b2634a24756124d414639344a50f">GetKind</a>() == <a class="code" href="ride__type_8h.html#a7920a38ef1d6024ec5d65be22d0c3d6ea601a3d6676990bba5aa8efaf582f5bad">RTK_SHOP</a>) ? PATH_NE_NW_SE_SW : <a class="code" href="group__map__group.html#ga3622a3eda6865ce3e357b761e4f42dbda087708a66f83c522faa1a8be2be798e9">PATH_INVALID</a>;</div>
<div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;</div>
<div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;        <span class="keyword">const</span> <a class="code" href="classImageData.html">ImageData</a> *sprites[4];</div>
<div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;        ri-&gt;<a class="code" href="classRideInstance.html#a2023a342250310d30aaa7484b66bc1c1">GetSprites</a>(voxel_number, orient, sprites);</div>
<div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;</div>
<div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;        <span class="keywordtype">int</span> idx = 0;</div>
<div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;        <span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="viewport_8h.html#ad83c05db97e3590a5da165ead3d5792d">SpriteOrder</a> sprite_numbers[4] = {<a class="code" href="viewport_8h.html#ad83c05db97e3590a5da165ead3d5792da07e58ebbb1675bae51b2a927889dd942">SO_PLATFORM_BACK</a>, <a class="code" href="viewport_8h.html#ad83c05db97e3590a5da165ead3d5792daf8ca681385899c6a3dd512fb03550d02">SO_RIDE</a>, <a class="code" href="viewport_8h.html#ad83c05db97e3590a5da165ead3d5792da949bc9e76e861a6369f0594db6baf1e2">SO_RIDE_FRONT</a>, <a class="code" href="viewport_8h.html#ad83c05db97e3590a5da165ead3d5792daf26502bc09ab65f9a74d9a7c3323f337">SO_PLATFORM_FRONT</a>};</div>
<div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; 4; i++) {</div>
<div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;                <span class="keywordflow">if</span> (sprites[i] == <span class="keyword">nullptr</span>) <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;</div>
<div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;                dd[idx].<a class="code" href="structDrawData.html#a2637f5d86a4291f50f19fa1d942e645a">level</a> = slice;</div>
<div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;                dd[idx].<a class="code" href="structDrawData.html#a49c4e8444e4bb48bdebdc7d947cdc7de">z_height</a> = zpos;</div>
<div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;                dd[idx].<a class="code" href="structDrawData.html#a9ed124116c1db658f237dfdc890f4bdb">order</a> = sprite_numbers[i];</div>
<div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;                dd[idx].<a class="code" href="structDrawData.html#a353546506625aaeffb85726b311ae4ad">sprite</a> = sprites[i];</div>
<div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;                dd[idx].<a class="code" href="structDrawData.html#ac48d72511e0ea716333781b67cf28204">base</a>.<a class="code" href="structPoint.html#af0836c7f2eec563aa7bc20d8cfa5dd2a">x</a> = basex;</div>
<div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;                dd[idx].<a class="code" href="structDrawData.html#ac48d72511e0ea716333781b67cf28204">base</a>.<a class="code" href="structPoint.html#a56c3dcea91f03182921eea9a5cf555a3">y</a> = basey;</div>
<div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;                dd[idx].<a class="code" href="structDrawData.html#a60f157d7706304439f8eee934fc80019">recolour</a> = &amp;ri-&gt;<a class="code" href="classRideInstance.html#ad022ba9e0f01e8575c505a9fd9288dc1">recolours</a>;</div>
<div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;                idx++;</div>
<div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;        }</div>
<div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;        <span class="keywordflow">return</span> idx;</div>
<div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;}</div>
<div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;</div>
<div class="line"><a name="l00864"></a><span class="lineno"><a class="line" href="classSpriteCollector.html#a338ed55297778a47ca74984b088a99a1">  864</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classSpriteCollector.html#a338ed55297778a47ca74984b088a99a1">SpriteCollector::CollectVoxel</a>(<span class="keyword">const</span> <a class="code" href="structVoxel.html">Voxel</a> *voxel, <span class="keyword">const</span> <a class="code" href="structXYZPoint.html">XYZPoint16</a> &amp;voxel_pos, <a class="code" href="stdafx_8h.html#a43d43196463bde49cb067f5c20ab8481">int32</a> xnorth, <a class="code" href="stdafx_8h.html#a43d43196463bde49cb067f5c20ab8481">int32</a> ynorth)</div>
<div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160;{</div>
<div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;        <a class="code" href="stdafx_8h.html#a43d43196463bde49cb067f5c20ab8481">int32</a> slice;</div>
<div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160;        <span class="keywordflow">switch</span> (this-&gt;<a class="code" href="classVoxelCollector.html#a95f3b9137ebbcf6851d24c27bbcece2c">orient</a>) {</div>
<div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;                <span class="keywordflow">case</span> 0: slice =  voxel_pos.<a class="code" href="structXYZPoint.html#a77a7984ac0a26ecb76acb94bbcf96a48">x</a> + voxel_pos.<a class="code" href="structXYZPoint.html#aea2c3552caee6e81c3b007ff78834b99">y</a>; <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160;                <span class="keywordflow">case</span> 1: slice =  voxel_pos.<a class="code" href="structXYZPoint.html#a77a7984ac0a26ecb76acb94bbcf96a48">x</a> - voxel_pos.<a class="code" href="structXYZPoint.html#aea2c3552caee6e81c3b007ff78834b99">y</a>; <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160;                <span class="keywordflow">case</span> 2: slice = -voxel_pos.<a class="code" href="structXYZPoint.html#a77a7984ac0a26ecb76acb94bbcf96a48">x</a> - voxel_pos.<a class="code" href="structXYZPoint.html#aea2c3552caee6e81c3b007ff78834b99">y</a>; <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;                <span class="keywordflow">case</span> 3: slice = -voxel_pos.<a class="code" href="structXYZPoint.html#a77a7984ac0a26ecb76acb94bbcf96a48">x</a> + voxel_pos.<a class="code" href="structXYZPoint.html#aea2c3552caee6e81c3b007ff78834b99">y</a>; <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160;                <span class="keywordflow">default</span>: <a class="code" href="stdafx_8h.html#a6c2edf1e500e498b687567418bf4fef6">NOT_REACHED</a>();</div>
<div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160;        }</div>
<div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160;</div>
<div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160;        <span class="keywordflow">if</span> (voxel == <span class="keyword">nullptr</span>) { <span class="comment">// Draw cursor above stack.</span></div>
<div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160;                <a class="code" href="stdafx_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> <a class="code" href="classSpriteCollector.html#a500b250eeb6332feb88f21880f769b35">yoffset</a> = 0;</div>
<div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160;                <span class="keyword">const</span> <a class="code" href="classImageData.html">ImageData</a> *mspr = this-&gt;<a class="code" href="classSpriteCollector.html#af7163b4b0c1657097def3b5fdce1b96c">GetCursorSpriteAtPos</a>(voxel_pos, <a class="code" href="group__map__group.html#ggaa25639f3980e1fa4c64a58d3a8e4d149a9ea32a3b4fa9f1cb3889a8b7da1c3ec2">SL_FLAT</a>, yoffset);</div>
<div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160;                <span class="keywordflow">if</span> (mspr != <span class="keyword">nullptr</span>) {</div>
<div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160;                        <a class="code" href="structDrawData.html">DrawData</a> dd;</div>
<div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160;                        dd.<a class="code" href="structDrawData.html#a2637f5d86a4291f50f19fa1d942e645a">level</a> = slice;</div>
<div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160;                        dd.<a class="code" href="structDrawData.html#a49c4e8444e4bb48bdebdc7d947cdc7de">z_height</a> = voxel_pos.<a class="code" href="structXYZPoint.html#a97215f048dde4da40be2742267ab7224">z</a>;</div>
<div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;                        dd.<a class="code" href="structDrawData.html#a9ed124116c1db658f237dfdc890f4bdb">order</a> = <a class="code" href="viewport_8h.html#ad83c05db97e3590a5da165ead3d5792da17c758594b4dc6508cac4b2a8b2f5346">SO_CURSOR</a>;</div>
<div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160;                        dd.<a class="code" href="structDrawData.html#a353546506625aaeffb85726b311ae4ad">sprite</a> = mspr;</div>
<div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160;                        dd.<a class="code" href="structDrawData.html#ac48d72511e0ea716333781b67cf28204">base</a>.<a class="code" href="structPoint.html#af0836c7f2eec563aa7bc20d8cfa5dd2a">x</a> = this-&gt;<a class="code" href="classSpriteCollector.html#a36f7a47d5a87c4d5f24d0f0e0641c742">xoffset</a> + xnorth - this-&gt;<a class="code" href="classVoxelCollector.html#add20fd94a174adf4898834c738b57d31">rect</a>.<a class="code" href="structRectangle.html#ab794667ffad2a46061bc417f99c031cc">base</a>.<a class="code" href="structPoint.html#af0836c7f2eec563aa7bc20d8cfa5dd2a">x</a>;</div>
<div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160;                        dd.<a class="code" href="structDrawData.html#ac48d72511e0ea716333781b67cf28204">base</a>.<a class="code" href="structPoint.html#a56c3dcea91f03182921eea9a5cf555a3">y</a> = this-&gt;yoffset + ynorth - this-&gt;<a class="code" href="classVoxelCollector.html#add20fd94a174adf4898834c738b57d31">rect</a>.<a class="code" href="structRectangle.html#ab794667ffad2a46061bc417f99c031cc">base</a>.<a class="code" href="structPoint.html#a56c3dcea91f03182921eea9a5cf555a3">y</a> + <a class="code" href="classSpriteCollector.html#a500b250eeb6332feb88f21880f769b35">yoffset</a>;</div>
<div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160;                        dd.<a class="code" href="structDrawData.html#a60f157d7706304439f8eee934fc80019">recolour</a> = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160;                        this-&gt;<a class="code" href="classSpriteCollector.html#a2ff573025924a75fa7bd200757a843ed">draw_images</a>.insert(dd);</div>
<div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160;                }</div>
<div class="line"><a name="l00889"></a><span class="lineno">  889</span>&#160;                <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160;        }</div>
<div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160;</div>
<div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;        <a class="code" href="stdafx_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> platform_shape = <a class="code" href="group__map__group.html#ga3622a3eda6865ce3e357b761e4f42dbda087708a66f83c522faa1a8be2be798e9">PATH_INVALID</a>;</div>
<div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;        <a class="code" href="map_8h.html#ada9f0c1420f66f999469d82ef2262280">SmallRideInstance</a> sri = voxel-&gt;<a class="code" href="structVoxel.html#a78ee7c8c8e8e62d18733aed8c28cba56">GetInstance</a>();</div>
<div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;        <a class="code" href="stdafx_8h.html#a05f6b0ae8f6a6e135b0e290c25fe0e4e">uint16</a> instance_data = voxel-&gt;<a class="code" href="structVoxel.html#affbc45e0be9940baf856c2ea9377b182">GetInstanceData</a>();</div>
<div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;        <span class="keywordflow">if</span> (sri == <a class="code" href="map_8h.html#ada9f0c1420f66f999469d82ef2262280aa21a61ab17228d4482507c9526547353">SRI_PATH</a> &amp;&amp; <a class="code" href="map_8h.html#aea346c5b3fab893e717a4d10fd35cca6">HasValidPath</a>(instance_data)) { <span class="comment">// A path (and not something reserved above it).</span></div>
<div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160;                <a class="code" href="structDrawData.html">DrawData</a> dd;</div>
<div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160;                dd.<a class="code" href="structDrawData.html#a2637f5d86a4291f50f19fa1d942e645a">level</a> = slice;</div>
<div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160;                dd.<a class="code" href="structDrawData.html#a49c4e8444e4bb48bdebdc7d947cdc7de">z_height</a> = voxel_pos.<a class="code" href="structXYZPoint.html#a97215f048dde4da40be2742267ab7224">z</a>;</div>
<div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160;                dd.<a class="code" href="structDrawData.html#a9ed124116c1db658f237dfdc890f4bdb">order</a> = <a class="code" href="viewport_8h.html#ad83c05db97e3590a5da165ead3d5792da81492a75f363b59bc606fc51c8d84838">SO_PATH</a>;</div>
<div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160;                platform_shape = <a class="code" href="path_8cpp.html#a9c3f71ef7e2e68c9e2377272bacf65d7">_path_rotation</a>[<a class="code" href="map_8h.html#ad44f39a179da4e3289440f17d6cde5b3">GetImplodedPathSlope</a>(instance_data)][this-&gt;<a class="code" href="classVoxelCollector.html#a95f3b9137ebbcf6851d24c27bbcece2c">orient</a>];</div>
<div class="line"><a name="l00901"></a><span class="lineno">  901</span>&#160;                dd.<a class="code" href="structDrawData.html#a353546506625aaeffb85726b311ae4ad">sprite</a> = this-&gt;<a class="code" href="classVoxelCollector.html#a8270a2843c6824b485561e9721fa215d">sprites</a>-&gt;<a class="code" href="classSpriteStorage.html#af6d10f568074c53528182934f9392762">GetPathSprite</a>(<a class="code" href="map_8h.html#a7c69b6b7a0fc4760efb220790fb60b7b">GetPathType</a>(instance_data), <a class="code" href="map_8h.html#ad44f39a179da4e3289440f17d6cde5b3">GetImplodedPathSlope</a>(instance_data), this-&gt;<a class="code" href="classVoxelCollector.html#a95f3b9137ebbcf6851d24c27bbcece2c">orient</a>);</div>
<div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160;                dd.<a class="code" href="structDrawData.html#ac48d72511e0ea716333781b67cf28204">base</a>.<a class="code" href="structPoint.html#af0836c7f2eec563aa7bc20d8cfa5dd2a">x</a> = this-&gt;<a class="code" href="classSpriteCollector.html#a36f7a47d5a87c4d5f24d0f0e0641c742">xoffset</a> + xnorth - this-&gt;<a class="code" href="classVoxelCollector.html#add20fd94a174adf4898834c738b57d31">rect</a>.<a class="code" href="structRectangle.html#ab794667ffad2a46061bc417f99c031cc">base</a>.<a class="code" href="structPoint.html#af0836c7f2eec563aa7bc20d8cfa5dd2a">x</a>;</div>
<div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;                dd.<a class="code" href="structDrawData.html#ac48d72511e0ea716333781b67cf28204">base</a>.<a class="code" href="structPoint.html#a56c3dcea91f03182921eea9a5cf555a3">y</a> = this-&gt;<a class="code" href="classSpriteCollector.html#a500b250eeb6332feb88f21880f769b35">yoffset</a> + ynorth - this-&gt;<a class="code" href="classVoxelCollector.html#add20fd94a174adf4898834c738b57d31">rect</a>.<a class="code" href="structRectangle.html#ab794667ffad2a46061bc417f99c031cc">base</a>.<a class="code" href="structPoint.html#a56c3dcea91f03182921eea9a5cf555a3">y</a>;</div>
<div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160;                dd.<a class="code" href="structDrawData.html#a60f157d7706304439f8eee934fc80019">recolour</a> = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160;                this-&gt;<a class="code" href="classSpriteCollector.html#a2ff573025924a75fa7bd200757a843ed">draw_images</a>.insert(dd);</div>
<div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (sri &gt;= <a class="code" href="map_8h.html#ada9f0c1420f66f999469d82ef2262280ae3bfbce4590e9566985d32b115b851d7">SRI_FULL_RIDES</a>) { <span class="comment">// A normal ride.</span></div>
<div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160;                <a class="code" href="structDrawData.html">DrawData</a> dd[4];</div>
<div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160;                <span class="keywordtype">int</span> count = <a class="code" href="viewport_8cpp.html#ab5343989a755d5a486399d48bf5b199e">DrawRide</a>(slice, voxel_pos.<a class="code" href="structXYZPoint.html#a97215f048dde4da40be2742267ab7224">z</a>,</div>
<div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160;                                this-&gt;xoffset + xnorth - this-&gt;rect.base.x, this-&gt;yoffset + ynorth - this-&gt;rect.base.y,</div>
<div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160;                                this-&gt;orient, sri, instance_data, dd, &amp;platform_shape);</div>
<div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160;                <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; count; i++) this-&gt;<a class="code" href="classSpriteCollector.html#a2ff573025924a75fa7bd200757a843ed">draw_images</a>.insert(dd[i]);</div>
<div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160;        }</div>
<div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160;</div>
<div class="line"><a name="l00914"></a><span class="lineno">  914</span>&#160;        <span class="comment">/* Foundations. */</span></div>
<div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160;        <span class="keywordflow">if</span> (voxel-&gt;<a class="code" href="structVoxel.html#aa827aa42d8c618d7e68a826494e19c7a">GetFoundationType</a>() != <a class="code" href="group__map__group.html#gga17a68962aecf6bf22a97d7e78da6fcfbaa5de6e54f01653b72c99a96aec13d1eb">FDT_INVALID</a>) {</div>
<div class="line"><a name="l00916"></a><span class="lineno">  916</span>&#160;                <a class="code" href="stdafx_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> fslope = voxel-&gt;<a class="code" href="structVoxel.html#a5e0540437a77b0aa7cc4e8897562bfdd">GetFoundationSlope</a>();</div>
<div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160;                <a class="code" href="stdafx_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> sw, se; <span class="comment">// SW foundations, SE foundations.</span></div>
<div class="line"><a name="l00918"></a><span class="lineno">  918</span>&#160;                <span class="keywordflow">switch</span> (this-&gt;<a class="code" href="classVoxelCollector.html#a95f3b9137ebbcf6851d24c27bbcece2c">orient</a>) {</div>
<div class="line"><a name="l00919"></a><span class="lineno">  919</span>&#160;                        <span class="keywordflow">case</span> <a class="code" href="group__map__group.html#ggabad48584a1852521ff578b647f07fdd3a555bd255b7d0fb03bd8e272ee595b49b">VOR_NORTH</a>: sw = <a class="code" href="bitmath_8h.html#aa017116a7fddd59bc588d2b927c4854d">GB</a>(fslope, 4, 2); se = <a class="code" href="bitmath_8h.html#aa017116a7fddd59bc588d2b927c4854d">GB</a>(fslope, 2, 2); <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160;                        <span class="keywordflow">case</span> <a class="code" href="group__map__group.html#ggabad48584a1852521ff578b647f07fdd3ab9f340d6a90130e2bcc75d5be2af447e">VOR_EAST</a>:  sw = <a class="code" href="bitmath_8h.html#aa017116a7fddd59bc588d2b927c4854d">GB</a>(fslope, 6, 2); se = <a class="code" href="bitmath_8h.html#aa017116a7fddd59bc588d2b927c4854d">GB</a>(fslope, 4, 2); <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00921"></a><span class="lineno">  921</span>&#160;                        <span class="keywordflow">case</span> <a class="code" href="group__map__group.html#ggabad48584a1852521ff578b647f07fdd3ae07f82bd43e8d66a7394d5ebf0f47c39">VOR_SOUTH</a>: sw = <a class="code" href="bitmath_8h.html#aa017116a7fddd59bc588d2b927c4854d">GB</a>(fslope, 0, 2); se = <a class="code" href="bitmath_8h.html#aa017116a7fddd59bc588d2b927c4854d">GB</a>(fslope, 6, 2); <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160;                        <span class="keywordflow">case</span> <a class="code" href="group__map__group.html#ggabad48584a1852521ff578b647f07fdd3a5ff3ccca79a685ddc61d0a8739d73ed1">VOR_WEST</a>:  sw = <a class="code" href="bitmath_8h.html#aa017116a7fddd59bc588d2b927c4854d">GB</a>(fslope, 2, 2); se = <a class="code" href="bitmath_8h.html#aa017116a7fddd59bc588d2b927c4854d">GB</a>(fslope, 0, 2); <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00923"></a><span class="lineno">  923</span>&#160;                        <span class="keywordflow">default</span>: <a class="code" href="stdafx_8h.html#a6c2edf1e500e498b687567418bf4fef6">NOT_REACHED</a>();</div>
<div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160;                }</div>
<div class="line"><a name="l00925"></a><span class="lineno">  925</span>&#160;                <span class="keyword">const</span> <a class="code" href="classFoundation.html">Foundation</a> *fnd = &amp;this-&gt;<a class="code" href="classVoxelCollector.html#a8270a2843c6824b485561e9721fa215d">sprites</a>-&gt;<a class="code" href="classSpriteStorage.html#ad735c5e00e33b28c30799ddc59f35e35">foundation</a>[<a class="code" href="group__map__group.html#gga17a68962aecf6bf22a97d7e78da6fcfba10ab7da315c2499443a1b74e0b1fb791">FDT_GROUND</a>];</div>
<div class="line"><a name="l00926"></a><span class="lineno">  926</span>&#160;                <span class="keywordflow">if</span> (sw != 0) {</div>
<div class="line"><a name="l00927"></a><span class="lineno">  927</span>&#160;                        <span class="keyword">const</span> <a class="code" href="classImageData.html">ImageData</a> *img = fnd-&gt;<a class="code" href="classFoundation.html#a65e48b130d17c46332acb075013644d4">sprites</a>[3 + sw - 1];</div>
<div class="line"><a name="l00928"></a><span class="lineno">  928</span>&#160;                        <span class="keywordflow">if</span> (img != <span class="keyword">nullptr</span>) {</div>
<div class="line"><a name="l00929"></a><span class="lineno">  929</span>&#160;                                <a class="code" href="structDrawData.html">DrawData</a> dd;</div>
<div class="line"><a name="l00930"></a><span class="lineno">  930</span>&#160;                                dd.<a class="code" href="structDrawData.html#a2637f5d86a4291f50f19fa1d942e645a">level</a> = slice;</div>
<div class="line"><a name="l00931"></a><span class="lineno">  931</span>&#160;                                dd.<a class="code" href="structDrawData.html#a49c4e8444e4bb48bdebdc7d947cdc7de">z_height</a> = voxel_pos.<a class="code" href="structXYZPoint.html#a97215f048dde4da40be2742267ab7224">z</a>;</div>
<div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160;                                dd.<a class="code" href="structDrawData.html#a9ed124116c1db658f237dfdc890f4bdb">order</a> = <a class="code" href="viewport_8h.html#ad83c05db97e3590a5da165ead3d5792daad0e0a8130cb9fbf2178cd209a80e4b0">SO_FOUNDATION</a>;</div>
<div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160;                                dd.<a class="code" href="structDrawData.html#a353546506625aaeffb85726b311ae4ad">sprite</a> = img;</div>
<div class="line"><a name="l00934"></a><span class="lineno">  934</span>&#160;                                dd.<a class="code" href="structDrawData.html#ac48d72511e0ea716333781b67cf28204">base</a>.<a class="code" href="structPoint.html#af0836c7f2eec563aa7bc20d8cfa5dd2a">x</a> = this-&gt;<a class="code" href="classSpriteCollector.html#a36f7a47d5a87c4d5f24d0f0e0641c742">xoffset</a> + xnorth - this-&gt;<a class="code" href="classVoxelCollector.html#add20fd94a174adf4898834c738b57d31">rect</a>.<a class="code" href="structRectangle.html#ab794667ffad2a46061bc417f99c031cc">base</a>.<a class="code" href="structPoint.html#af0836c7f2eec563aa7bc20d8cfa5dd2a">x</a>;</div>
<div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160;                                dd.<a class="code" href="structDrawData.html#ac48d72511e0ea716333781b67cf28204">base</a>.<a class="code" href="structPoint.html#a56c3dcea91f03182921eea9a5cf555a3">y</a> = this-&gt;<a class="code" href="classSpriteCollector.html#a500b250eeb6332feb88f21880f769b35">yoffset</a> + ynorth - this-&gt;<a class="code" href="classVoxelCollector.html#add20fd94a174adf4898834c738b57d31">rect</a>.<a class="code" href="structRectangle.html#ab794667ffad2a46061bc417f99c031cc">base</a>.<a class="code" href="structPoint.html#a56c3dcea91f03182921eea9a5cf555a3">y</a>;</div>
<div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160;                                dd.<a class="code" href="structDrawData.html#a60f157d7706304439f8eee934fc80019">recolour</a> = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160;                                this-&gt;<a class="code" href="classSpriteCollector.html#a2ff573025924a75fa7bd200757a843ed">draw_images</a>.insert(dd);</div>
<div class="line"><a name="l00938"></a><span class="lineno">  938</span>&#160;                        }</div>
<div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160;                }</div>
<div class="line"><a name="l00940"></a><span class="lineno">  940</span>&#160;                <span class="keywordflow">if</span> (se != 0) {</div>
<div class="line"><a name="l00941"></a><span class="lineno">  941</span>&#160;                        <span class="keyword">const</span> <a class="code" href="classImageData.html">ImageData</a> *img = fnd-&gt;<a class="code" href="classFoundation.html#a65e48b130d17c46332acb075013644d4">sprites</a>[se - 1];</div>
<div class="line"><a name="l00942"></a><span class="lineno">  942</span>&#160;                        <span class="keywordflow">if</span> (img != <span class="keyword">nullptr</span>) {</div>
<div class="line"><a name="l00943"></a><span class="lineno">  943</span>&#160;                                <a class="code" href="structDrawData.html">DrawData</a> dd;</div>
<div class="line"><a name="l00944"></a><span class="lineno">  944</span>&#160;                                dd.<a class="code" href="structDrawData.html#a2637f5d86a4291f50f19fa1d942e645a">level</a> = slice;</div>
<div class="line"><a name="l00945"></a><span class="lineno">  945</span>&#160;                                dd.<a class="code" href="structDrawData.html#a49c4e8444e4bb48bdebdc7d947cdc7de">z_height</a> = voxel_pos.<a class="code" href="structXYZPoint.html#a97215f048dde4da40be2742267ab7224">z</a>;</div>
<div class="line"><a name="l00946"></a><span class="lineno">  946</span>&#160;                                dd.<a class="code" href="structDrawData.html#a9ed124116c1db658f237dfdc890f4bdb">order</a> = <a class="code" href="viewport_8h.html#ad83c05db97e3590a5da165ead3d5792daad0e0a8130cb9fbf2178cd209a80e4b0">SO_FOUNDATION</a>;</div>
<div class="line"><a name="l00947"></a><span class="lineno">  947</span>&#160;                                dd.<a class="code" href="structDrawData.html#a353546506625aaeffb85726b311ae4ad">sprite</a> = img;</div>
<div class="line"><a name="l00948"></a><span class="lineno">  948</span>&#160;                                dd.<a class="code" href="structDrawData.html#ac48d72511e0ea716333781b67cf28204">base</a>.<a class="code" href="structPoint.html#af0836c7f2eec563aa7bc20d8cfa5dd2a">x</a> = this-&gt;<a class="code" href="classSpriteCollector.html#a36f7a47d5a87c4d5f24d0f0e0641c742">xoffset</a> + xnorth - this-&gt;<a class="code" href="classVoxelCollector.html#add20fd94a174adf4898834c738b57d31">rect</a>.<a class="code" href="structRectangle.html#ab794667ffad2a46061bc417f99c031cc">base</a>.<a class="code" href="structPoint.html#af0836c7f2eec563aa7bc20d8cfa5dd2a">x</a>;</div>
<div class="line"><a name="l00949"></a><span class="lineno">  949</span>&#160;                                dd.<a class="code" href="structDrawData.html#ac48d72511e0ea716333781b67cf28204">base</a>.<a class="code" href="structPoint.html#a56c3dcea91f03182921eea9a5cf555a3">y</a> = this-&gt;<a class="code" href="classSpriteCollector.html#a500b250eeb6332feb88f21880f769b35">yoffset</a> + ynorth - this-&gt;<a class="code" href="classVoxelCollector.html#add20fd94a174adf4898834c738b57d31">rect</a>.<a class="code" href="structRectangle.html#ab794667ffad2a46061bc417f99c031cc">base</a>.<a class="code" href="structPoint.html#a56c3dcea91f03182921eea9a5cf555a3">y</a>;</div>
<div class="line"><a name="l00950"></a><span class="lineno">  950</span>&#160;                                dd.<a class="code" href="structDrawData.html#a60f157d7706304439f8eee934fc80019">recolour</a> = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00951"></a><span class="lineno">  951</span>&#160;                                this-&gt;<a class="code" href="classSpriteCollector.html#a2ff573025924a75fa7bd200757a843ed">draw_images</a>.insert(dd);</div>
<div class="line"><a name="l00952"></a><span class="lineno">  952</span>&#160;                        }</div>
<div class="line"><a name="l00953"></a><span class="lineno">  953</span>&#160;                }</div>
<div class="line"><a name="l00954"></a><span class="lineno">  954</span>&#160;        }</div>
<div class="line"><a name="l00955"></a><span class="lineno">  955</span>&#160;</div>
<div class="line"><a name="l00956"></a><span class="lineno">  956</span>&#160;        <span class="comment">/* Ground surface. */</span></div>
<div class="line"><a name="l00957"></a><span class="lineno">  957</span>&#160;        <a class="code" href="stdafx_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> gslope = <a class="code" href="group__map__group.html#ggaa25639f3980e1fa4c64a58d3a8e4d149a9ea32a3b4fa9f1cb3889a8b7da1c3ec2">SL_FLAT</a>;</div>
<div class="line"><a name="l00958"></a><span class="lineno">  958</span>&#160;        <span class="keywordflow">if</span> (voxel-&gt;<a class="code" href="structVoxel.html#a39b4316f246f89cc83a490c87edd7ac6">GetGroundType</a>() != <a class="code" href="group__map__group.html#ggad15436b50732bd9ef2b6f2efa5f400edaf0ceff8e769df0430417e0704018dfc7">GTP_INVALID</a>) {</div>
<div class="line"><a name="l00959"></a><span class="lineno">  959</span>&#160;                <a class="code" href="structDrawData.html">DrawData</a> dd;</div>
<div class="line"><a name="l00960"></a><span class="lineno">  960</span>&#160;                dd.<a class="code" href="structDrawData.html#a2637f5d86a4291f50f19fa1d942e645a">level</a> = slice;</div>
<div class="line"><a name="l00961"></a><span class="lineno">  961</span>&#160;                dd.<a class="code" href="structDrawData.html#a49c4e8444e4bb48bdebdc7d947cdc7de">z_height</a> = voxel_pos.<a class="code" href="structXYZPoint.html#a97215f048dde4da40be2742267ab7224">z</a>;</div>
<div class="line"><a name="l00962"></a><span class="lineno">  962</span>&#160;                dd.<a class="code" href="structDrawData.html#a9ed124116c1db658f237dfdc890f4bdb">order</a> = <a class="code" href="viewport_8h.html#ad83c05db97e3590a5da165ead3d5792dab1736d60c068f615aa53700447e65121">SO_GROUND</a>;</div>
<div class="line"><a name="l00963"></a><span class="lineno">  963</span>&#160;                <a class="code" href="stdafx_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> slope = voxel-&gt;<a class="code" href="structVoxel.html#adf0e5dcd80753791808eca30dc90879a">GetGroundSlope</a>();</div>
<div class="line"><a name="l00964"></a><span class="lineno">  964</span>&#160;                <a class="code" href="stdafx_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> type = (this-&gt;<a class="code" href="classVoxelCollector.html#afadd1b6eee247fb0ba8015cb247e13e7">underground_mode</a>) ? <a class="code" href="group__map__group.html#ggad15436b50732bd9ef2b6f2efa5f400eda1ea6e1b32b16c9d9129f20da3c314a8b">GTP_UNDERGROUND</a> : voxel-&gt;<a class="code" href="structVoxel.html#a39b4316f246f89cc83a490c87edd7ac6">GetGroundType</a>();</div>
<div class="line"><a name="l00965"></a><span class="lineno">  965</span>&#160;                dd.<a class="code" href="structDrawData.html#a353546506625aaeffb85726b311ae4ad">sprite</a> = this-&gt;<a class="code" href="classVoxelCollector.html#a8270a2843c6824b485561e9721fa215d">sprites</a>-&gt;<a class="code" href="classSpriteStorage.html#ae435eacf1c908620f709e18468cc925b">GetSurfaceSprite</a>(type, slope, this-&gt;<a class="code" href="classVoxelCollector.html#a95f3b9137ebbcf6851d24c27bbcece2c">orient</a>);</div>
<div class="line"><a name="l00966"></a><span class="lineno">  966</span>&#160;                dd.<a class="code" href="structDrawData.html#ac48d72511e0ea716333781b67cf28204">base</a>.<a class="code" href="structPoint.html#af0836c7f2eec563aa7bc20d8cfa5dd2a">x</a> = this-&gt;<a class="code" href="classSpriteCollector.html#a36f7a47d5a87c4d5f24d0f0e0641c742">xoffset</a> + xnorth - this-&gt;<a class="code" href="classVoxelCollector.html#add20fd94a174adf4898834c738b57d31">rect</a>.<a class="code" href="structRectangle.html#ab794667ffad2a46061bc417f99c031cc">base</a>.<a class="code" href="structPoint.html#af0836c7f2eec563aa7bc20d8cfa5dd2a">x</a>;</div>
<div class="line"><a name="l00967"></a><span class="lineno">  967</span>&#160;                dd.<a class="code" href="structDrawData.html#ac48d72511e0ea716333781b67cf28204">base</a>.<a class="code" href="structPoint.html#a56c3dcea91f03182921eea9a5cf555a3">y</a> = this-&gt;<a class="code" href="classSpriteCollector.html#a500b250eeb6332feb88f21880f769b35">yoffset</a> + ynorth - this-&gt;<a class="code" href="classVoxelCollector.html#add20fd94a174adf4898834c738b57d31">rect</a>.<a class="code" href="structRectangle.html#ab794667ffad2a46061bc417f99c031cc">base</a>.<a class="code" href="structPoint.html#a56c3dcea91f03182921eea9a5cf555a3">y</a>;</div>
<div class="line"><a name="l00968"></a><span class="lineno">  968</span>&#160;                dd.<a class="code" href="structDrawData.html#a60f157d7706304439f8eee934fc80019">recolour</a> = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00969"></a><span class="lineno">  969</span>&#160;                this-&gt;<a class="code" href="classSpriteCollector.html#a2ff573025924a75fa7bd200757a843ed">draw_images</a>.insert(dd);</div>
<div class="line"><a name="l00970"></a><span class="lineno">  970</span>&#160;                <span class="keywordflow">switch</span> (slope) {</div>
<div class="line"><a name="l00971"></a><span class="lineno">  971</span>&#160;                        <span class="comment">// XXX There are no sprites for partial support of a platform.</span></div>
<div class="line"><a name="l00972"></a><span class="lineno">  972</span>&#160;                        <span class="keywordflow">case</span> <a class="code" href="group__map__group.html#ggaa25639f3980e1fa4c64a58d3a8e4d149a9ea32a3b4fa9f1cb3889a8b7da1c3ec2">SL_FLAT</a>:</div>
<div class="line"><a name="l00973"></a><span class="lineno">  973</span>&#160;                                <span class="keywordflow">if</span> (platform_shape &lt; <a class="code" href="group__map__group.html#ga3622a3eda6865ce3e357b761e4f42dbdab04a104637f775750f8060270c1237c4">PATH_FLAT_COUNT</a>) platform_shape = <a class="code" href="group__map__group.html#ga3622a3eda6865ce3e357b761e4f42dbda087708a66f83c522faa1a8be2be798e9">PATH_INVALID</a>;</div>
<div class="line"><a name="l00974"></a><span class="lineno">  974</span>&#160;                                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00975"></a><span class="lineno">  975</span>&#160;</div>
<div class="line"><a name="l00976"></a><span class="lineno">  976</span>&#160;                        <span class="keywordflow">case</span> <a class="code" href="group__map__group.html#ggaa25639f3980e1fa4c64a58d3a8e4d149af7665353eb042c84b4c09e82a928e2ad">TSB_SOUTHWEST</a>:</div>
<div class="line"><a name="l00977"></a><span class="lineno">  977</span>&#160;                                <span class="keywordflow">if</span> (platform_shape == <a class="code" href="group__map__group.html#ga3622a3eda6865ce3e357b761e4f42dbdaeef89d8856a3b22936d081d388e7818c">PATH_RAMP_NE</a>) platform_shape = <a class="code" href="group__map__group.html#ga3622a3eda6865ce3e357b761e4f42dbda087708a66f83c522faa1a8be2be798e9">PATH_INVALID</a>;</div>
<div class="line"><a name="l00978"></a><span class="lineno">  978</span>&#160;                                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00979"></a><span class="lineno">  979</span>&#160;</div>
<div class="line"><a name="l00980"></a><span class="lineno">  980</span>&#160;                        <span class="keywordflow">case</span> <a class="code" href="group__map__group.html#ggaa25639f3980e1fa4c64a58d3a8e4d149a8932fe03caacc5e226e54b5ee3a20395">TSB_SOUTHEAST</a>:</div>
<div class="line"><a name="l00981"></a><span class="lineno">  981</span>&#160;                                <span class="keywordflow">if</span> (platform_shape == <a class="code" href="group__map__group.html#ga3622a3eda6865ce3e357b761e4f42dbdad49b3f231c78bdc651ac699f28a463ad">PATH_RAMP_NW</a>) platform_shape = <a class="code" href="group__map__group.html#ga3622a3eda6865ce3e357b761e4f42dbda087708a66f83c522faa1a8be2be798e9">PATH_INVALID</a>;</div>
<div class="line"><a name="l00982"></a><span class="lineno">  982</span>&#160;                                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00983"></a><span class="lineno">  983</span>&#160;</div>
<div class="line"><a name="l00984"></a><span class="lineno">  984</span>&#160;                        <span class="keywordflow">case</span> <a class="code" href="group__map__group.html#ggaa25639f3980e1fa4c64a58d3a8e4d149a9ee2f14ed59a87a2ef111bbb570bf315">TSB_NORTHWEST</a>:</div>
<div class="line"><a name="l00985"></a><span class="lineno">  985</span>&#160;                                <span class="keywordflow">if</span> (platform_shape == <a class="code" href="group__map__group.html#ga3622a3eda6865ce3e357b761e4f42dbdaa87f4633ba7d5b5b64b9224afc0dafc2">PATH_RAMP_SE</a>) platform_shape = <a class="code" href="group__map__group.html#ga3622a3eda6865ce3e357b761e4f42dbda087708a66f83c522faa1a8be2be798e9">PATH_INVALID</a>;</div>
<div class="line"><a name="l00986"></a><span class="lineno">  986</span>&#160;                                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00987"></a><span class="lineno">  987</span>&#160;</div>
<div class="line"><a name="l00988"></a><span class="lineno">  988</span>&#160;                        <span class="keywordflow">case</span> <a class="code" href="group__map__group.html#ggaa25639f3980e1fa4c64a58d3a8e4d149af7d8c53d029f07b71dabd91dc0350e87">TSB_NORTHEAST</a>:</div>
<div class="line"><a name="l00989"></a><span class="lineno">  989</span>&#160;                                <span class="keywordflow">if</span> (platform_shape == <a class="code" href="group__map__group.html#ga3622a3eda6865ce3e357b761e4f42dbda5e3d5c99fbf6ee6d9a6dab627f0f32e3">PATH_RAMP_SW</a>) platform_shape = <a class="code" href="group__map__group.html#ga3622a3eda6865ce3e357b761e4f42dbda087708a66f83c522faa1a8be2be798e9">PATH_INVALID</a>;</div>
<div class="line"><a name="l00990"></a><span class="lineno">  990</span>&#160;                                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00991"></a><span class="lineno">  991</span>&#160;</div>
<div class="line"><a name="l00992"></a><span class="lineno">  992</span>&#160;                        <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l00993"></a><span class="lineno">  993</span>&#160;                                platform_shape = <a class="code" href="group__map__group.html#ga3622a3eda6865ce3e357b761e4f42dbda087708a66f83c522faa1a8be2be798e9">PATH_INVALID</a>;</div>
<div class="line"><a name="l00994"></a><span class="lineno">  994</span>&#160;                                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00995"></a><span class="lineno">  995</span>&#160;                }</div>
<div class="line"><a name="l00996"></a><span class="lineno">  996</span>&#160;</div>
<div class="line"><a name="l00997"></a><span class="lineno">  997</span>&#160;                gslope = voxel-&gt;<a class="code" href="structVoxel.html#adf0e5dcd80753791808eca30dc90879a">GetGroundSlope</a>();</div>
<div class="line"><a name="l00998"></a><span class="lineno">  998</span>&#160;        }</div>
<div class="line"><a name="l00999"></a><span class="lineno">  999</span>&#160;</div>
<div class="line"><a name="l01000"></a><span class="lineno"> 1000</span>&#160;        <span class="comment">/* Fences */</span></div>
<div class="line"><a name="l01001"></a><span class="lineno"> 1001</span>&#160;        <span class="keywordflow">for</span> (<a class="code" href="group__map__group.html#ga29bb8f9503c34074bad3c762c92ee68b">TileEdge</a> edge = <a class="code" href="group__map__group.html#gga29bb8f9503c34074bad3c762c92ee68ba9113f1260923c7d73750d0ef8c45b659">EDGE_BEGIN</a>; edge &lt; <a class="code" href="group__map__group.html#gga29bb8f9503c34074bad3c762c92ee68babd24d9c7b6e650be2bbe82b73f66cdea">EDGE_COUNT</a>; edge++) {</div>
<div class="line"><a name="l01002"></a><span class="lineno"> 1002</span>&#160;                <a class="code" href="group__map__group.html#ga2006e6d6a47129230c6995222052d403">FenceType</a> fence_type = voxel-&gt;<a class="code" href="structVoxel.html#a8135955c165682b875b608d7433aada7">GetFenceType</a>(edge);</div>
<div class="line"><a name="l01003"></a><span class="lineno"> 1003</span>&#160;                <span class="keywordflow">if</span> (fence_type != <a class="code" href="group__map__group.html#gga2006e6d6a47129230c6995222052d403a734eae0c9da8eb09787d5746d5b995f4">FENCE_TYPE_INVALID</a>) {</div>
<div class="line"><a name="l01004"></a><span class="lineno"> 1004</span>&#160;                        <a class="code" href="structDrawData.html">DrawData</a> dd;</div>
<div class="line"><a name="l01005"></a><span class="lineno"> 1005</span>&#160;                        dd.<a class="code" href="structDrawData.html#a2637f5d86a4291f50f19fa1d942e645a">level</a> = slice;</div>
<div class="line"><a name="l01006"></a><span class="lineno"> 1006</span>&#160;                        dd.<a class="code" href="structDrawData.html#a49c4e8444e4bb48bdebdc7d947cdc7de">z_height</a> = voxel_pos.<a class="code" href="structXYZPoint.html#a97215f048dde4da40be2742267ab7224">z</a>;</div>
<div class="line"><a name="l01007"></a><span class="lineno"> 1007</span>&#160;                        dd.<a class="code" href="structDrawData.html#a9ed124116c1db658f237dfdc890f4bdb">order</a> = (edge + 4 * this-&gt;<a class="code" href="classVoxelCollector.html#a95f3b9137ebbcf6851d24c27bbcece2c">orient</a> + 1) % 4 &lt; <a class="code" href="group__map__group.html#gga29bb8f9503c34074bad3c762c92ee68baa49ed1ec0f987e5a1d8a9196ff848658">EDGE_SW</a> ? <a class="code" href="viewport_8h.html#ad83c05db97e3590a5da165ead3d5792daf5536f8df54a61641fa9f4c544544df2">SO_FENCE_BACK</a> : <a class="code" href="viewport_8h.html#ad83c05db97e3590a5da165ead3d5792daa33848bf5fc3314c0777d51573798add">SO_FENCE_FRONT</a>;</div>
<div class="line"><a name="l01008"></a><span class="lineno"> 1008</span>&#160;                        <a class="code" href="group__map__group.html#gaa25639f3980e1fa4c64a58d3a8e4d149">TileSlope</a> slope = <a class="code" href="group__map__group.html#gaad0ec8bccd84a34b836d57ae88daf898">ExpandTileSlope</a>(voxel-&gt;<a class="code" href="structVoxel.html#adf0e5dcd80753791808eca30dc90879a">GetGroundSlope</a>());</div>
<div class="line"><a name="l01009"></a><span class="lineno"> 1009</span>&#160;                        dd.<a class="code" href="structDrawData.html#a353546506625aaeffb85726b311ae4ad">sprite</a> = this-&gt;<a class="code" href="classVoxelCollector.html#a8270a2843c6824b485561e9721fa215d">sprites</a>-&gt;<a class="code" href="classSpriteStorage.html#a1e4b82d07912128b591b2b25def56f20">GetFenceSprite</a>(fence_type, edge, slope, this-&gt;<a class="code" href="classVoxelCollector.html#a95f3b9137ebbcf6851d24c27bbcece2c">orient</a>);</div>
<div class="line"><a name="l01010"></a><span class="lineno"> 1010</span>&#160;                        <a class="code" href="stdafx_8h.html#a43d43196463bde49cb067f5c20ab8481">int32</a> extra_y = 0;</div>
<div class="line"><a name="l01011"></a><span class="lineno"> 1011</span>&#160;                        <span class="keywordflow">if</span> ((slope &amp; <a class="code" href="group__map__group.html#ggaa25639f3980e1fa4c64a58d3a8e4d149a64eb675ab6505f4cab2b51475aad7ddb">TSB_STEEP</a>) != 0) {</div>
<div class="line"><a name="l01012"></a><span class="lineno"> 1012</span>&#160;                                <span class="comment">/* Is lower edge of steep slope? */</span></div>
<div class="line"><a name="l01013"></a><span class="lineno"> 1013</span>&#160;                                <a class="code" href="stdafx_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> corner_height[4];</div>
<div class="line"><a name="l01014"></a><span class="lineno"> 1014</span>&#160;                                <a class="code" href="tile_8h.html#a656044e632368648bc674a8206ed4fd8">ComputeCornerHeight</a>(slope, (slope &amp; <a class="code" href="group__map__group.html#ggaa25639f3980e1fa4c64a58d3a8e4d149a162a1112fb74ac0cec258c7cc66543aa">TSB_TOP</a>) != 0 ? 1 : 0, corner_height);</div>
<div class="line"><a name="l01015"></a><span class="lineno"> 1015</span>&#160;                                <span class="keywordflow">if</span> (corner_height[edge] == 0 || corner_height[(edge+1) % 4] == 0) {</div>
<div class="line"><a name="l01016"></a><span class="lineno"> 1016</span>&#160;</div>
<div class="line"><a name="l01017"></a><span class="lineno"> 1017</span>&#160;                                        extra_y = this-&gt;<a class="code" href="classVoxelCollector.html#a5bff23a7f703800e1fed17b40a77096e">tile_height</a>;</div>
<div class="line"><a name="l01018"></a><span class="lineno"> 1018</span>&#160;                                }</div>
<div class="line"><a name="l01019"></a><span class="lineno"> 1019</span>&#160;                        }</div>
<div class="line"><a name="l01020"></a><span class="lineno"> 1020</span>&#160;                        dd.<a class="code" href="structDrawData.html#ac48d72511e0ea716333781b67cf28204">base</a>.<a class="code" href="structPoint.html#af0836c7f2eec563aa7bc20d8cfa5dd2a">x</a> = this-&gt;<a class="code" href="classSpriteCollector.html#a36f7a47d5a87c4d5f24d0f0e0641c742">xoffset</a> + xnorth - this-&gt;<a class="code" href="classVoxelCollector.html#add20fd94a174adf4898834c738b57d31">rect</a>.<a class="code" href="structRectangle.html#ab794667ffad2a46061bc417f99c031cc">base</a>.<a class="code" href="structPoint.html#af0836c7f2eec563aa7bc20d8cfa5dd2a">x</a>;</div>
<div class="line"><a name="l01021"></a><span class="lineno"> 1021</span>&#160;                        dd.<a class="code" href="structDrawData.html#ac48d72511e0ea716333781b67cf28204">base</a>.<a class="code" href="structPoint.html#a56c3dcea91f03182921eea9a5cf555a3">y</a> = this-&gt;<a class="code" href="classSpriteCollector.html#a500b250eeb6332feb88f21880f769b35">yoffset</a> + ynorth - this-&gt;<a class="code" href="classVoxelCollector.html#add20fd94a174adf4898834c738b57d31">rect</a>.<a class="code" href="structRectangle.html#ab794667ffad2a46061bc417f99c031cc">base</a>.<a class="code" href="structPoint.html#a56c3dcea91f03182921eea9a5cf555a3">y</a> + extra_y;</div>
<div class="line"><a name="l01022"></a><span class="lineno"> 1022</span>&#160;                        dd.<a class="code" href="structDrawData.html#a60f157d7706304439f8eee934fc80019">recolour</a> = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01023"></a><span class="lineno"> 1023</span>&#160;                        this-&gt;<a class="code" href="classSpriteCollector.html#a2ff573025924a75fa7bd200757a843ed">draw_images</a>.insert(dd);</div>
<div class="line"><a name="l01024"></a><span class="lineno"> 1024</span>&#160;                }</div>
<div class="line"><a name="l01025"></a><span class="lineno"> 1025</span>&#160;        }</div>
<div class="line"><a name="l01026"></a><span class="lineno"> 1026</span>&#160;</div>
<div class="line"><a name="l01027"></a><span class="lineno"> 1027</span>&#160;        <span class="comment">/* Sprite cursor (arrow) */</span></div>
<div class="line"><a name="l01028"></a><span class="lineno"> 1028</span>&#160;        <a class="code" href="stdafx_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> cursor_yoffset = 0;</div>
<div class="line"><a name="l01029"></a><span class="lineno"> 1029</span>&#160;        <span class="keyword">const</span> <a class="code" href="classImageData.html">ImageData</a> *mspr = this-&gt;<a class="code" href="classSpriteCollector.html#af7163b4b0c1657097def3b5fdce1b96c">GetCursorSpriteAtPos</a>(voxel_pos, gslope, cursor_yoffset);</div>
<div class="line"><a name="l01030"></a><span class="lineno"> 1030</span>&#160;        <span class="keywordflow">if</span> (mspr != <span class="keyword">nullptr</span>) {</div>
<div class="line"><a name="l01031"></a><span class="lineno"> 1031</span>&#160;                <a class="code" href="structDrawData.html">DrawData</a> dd;</div>
<div class="line"><a name="l01032"></a><span class="lineno"> 1032</span>&#160;                dd.<a class="code" href="structDrawData.html#a2637f5d86a4291f50f19fa1d942e645a">level</a> = slice;</div>
<div class="line"><a name="l01033"></a><span class="lineno"> 1033</span>&#160;                dd.<a class="code" href="structDrawData.html#a49c4e8444e4bb48bdebdc7d947cdc7de">z_height</a> = voxel_pos.<a class="code" href="structXYZPoint.html#a97215f048dde4da40be2742267ab7224">z</a>;</div>
<div class="line"><a name="l01034"></a><span class="lineno"> 1034</span>&#160;                dd.<a class="code" href="structDrawData.html#a9ed124116c1db658f237dfdc890f4bdb">order</a> = <a class="code" href="viewport_8h.html#ad83c05db97e3590a5da165ead3d5792da17c758594b4dc6508cac4b2a8b2f5346">SO_CURSOR</a>;</div>
<div class="line"><a name="l01035"></a><span class="lineno"> 1035</span>&#160;                dd.<a class="code" href="structDrawData.html#a353546506625aaeffb85726b311ae4ad">sprite</a> = mspr;</div>
<div class="line"><a name="l01036"></a><span class="lineno"> 1036</span>&#160;                dd.<a class="code" href="structDrawData.html#ac48d72511e0ea716333781b67cf28204">base</a>.<a class="code" href="structPoint.html#af0836c7f2eec563aa7bc20d8cfa5dd2a">x</a> = this-&gt;<a class="code" href="classSpriteCollector.html#a36f7a47d5a87c4d5f24d0f0e0641c742">xoffset</a> + xnorth - this-&gt;<a class="code" href="classVoxelCollector.html#add20fd94a174adf4898834c738b57d31">rect</a>.<a class="code" href="structRectangle.html#ab794667ffad2a46061bc417f99c031cc">base</a>.<a class="code" href="structPoint.html#af0836c7f2eec563aa7bc20d8cfa5dd2a">x</a>;</div>
<div class="line"><a name="l01037"></a><span class="lineno"> 1037</span>&#160;                dd.<a class="code" href="structDrawData.html#ac48d72511e0ea716333781b67cf28204">base</a>.<a class="code" href="structPoint.html#a56c3dcea91f03182921eea9a5cf555a3">y</a> = this-&gt;<a class="code" href="classSpriteCollector.html#a500b250eeb6332feb88f21880f769b35">yoffset</a> + ynorth - this-&gt;<a class="code" href="classVoxelCollector.html#add20fd94a174adf4898834c738b57d31">rect</a>.<a class="code" href="structRectangle.html#ab794667ffad2a46061bc417f99c031cc">base</a>.<a class="code" href="structPoint.html#a56c3dcea91f03182921eea9a5cf555a3">y</a> + cursor_yoffset;</div>
<div class="line"><a name="l01038"></a><span class="lineno"> 1038</span>&#160;                dd.<a class="code" href="structDrawData.html#a60f157d7706304439f8eee934fc80019">recolour</a> = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01039"></a><span class="lineno"> 1039</span>&#160;                this-&gt;<a class="code" href="classSpriteCollector.html#a2ff573025924a75fa7bd200757a843ed">draw_images</a>.insert(dd);</div>
<div class="line"><a name="l01040"></a><span class="lineno"> 1040</span>&#160;        }</div>
<div class="line"><a name="l01041"></a><span class="lineno"> 1041</span>&#160;</div>
<div class="line"><a name="l01042"></a><span class="lineno"> 1042</span>&#160;        <span class="comment">/* Add platforms. */</span></div>
<div class="line"><a name="l01043"></a><span class="lineno"> 1043</span>&#160;        <span class="keywordflow">if</span> (platform_shape != <a class="code" href="group__map__group.html#ga3622a3eda6865ce3e357b761e4f42dbda087708a66f83c522faa1a8be2be798e9">PATH_INVALID</a>) {</div>
<div class="line"><a name="l01044"></a><span class="lineno"> 1044</span>&#160;                <span class="comment">/* Platform gets automatically added when drawing a path or ride, without drawing ground. */</span></div>
<div class="line"><a name="l01045"></a><span class="lineno"> 1045</span>&#160;                <a class="code" href="classImageData.html">ImageData</a> *pl_spr;</div>
<div class="line"><a name="l01046"></a><span class="lineno"> 1046</span>&#160;                <span class="keywordflow">switch</span> (platform_shape) {</div>
<div class="line"><a name="l01047"></a><span class="lineno"> 1047</span>&#160;                        <span class="keywordflow">case</span> <a class="code" href="group__map__group.html#ga3622a3eda6865ce3e357b761e4f42dbdaeef89d8856a3b22936d081d388e7818c">PATH_RAMP_NE</a>: pl_spr = this-&gt;<a class="code" href="classVoxelCollector.html#a8270a2843c6824b485561e9721fa215d">sprites</a>-&gt;<a class="code" href="classSpriteStorage.html#ab064529c8a44aa3168fdae0033f22c5a">platform</a>.<a class="code" href="classPlatform.html#ae1468a2fe7cf2bcee1a48c0325a86d1a">ramp</a>[2]; <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01048"></a><span class="lineno"> 1048</span>&#160;                        <span class="keywordflow">case</span> <a class="code" href="group__map__group.html#ga3622a3eda6865ce3e357b761e4f42dbdad49b3f231c78bdc651ac699f28a463ad">PATH_RAMP_NW</a>: pl_spr = this-&gt;<a class="code" href="classVoxelCollector.html#a8270a2843c6824b485561e9721fa215d">sprites</a>-&gt;<a class="code" href="classSpriteStorage.html#ab064529c8a44aa3168fdae0033f22c5a">platform</a>.<a class="code" href="classPlatform.html#ae1468a2fe7cf2bcee1a48c0325a86d1a">ramp</a>[1]; <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01049"></a><span class="lineno"> 1049</span>&#160;                        <span class="keywordflow">case</span> <a class="code" href="group__map__group.html#ga3622a3eda6865ce3e357b761e4f42dbdaa87f4633ba7d5b5b64b9224afc0dafc2">PATH_RAMP_SE</a>: pl_spr = this-&gt;<a class="code" href="classVoxelCollector.html#a8270a2843c6824b485561e9721fa215d">sprites</a>-&gt;<a class="code" href="classSpriteStorage.html#ab064529c8a44aa3168fdae0033f22c5a">platform</a>.<a class="code" href="classPlatform.html#ae1468a2fe7cf2bcee1a48c0325a86d1a">ramp</a>[3]; <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01050"></a><span class="lineno"> 1050</span>&#160;                        <span class="keywordflow">case</span> <a class="code" href="group__map__group.html#ga3622a3eda6865ce3e357b761e4f42dbda5e3d5c99fbf6ee6d9a6dab627f0f32e3">PATH_RAMP_SW</a>: pl_spr = this-&gt;<a class="code" href="classVoxelCollector.html#a8270a2843c6824b485561e9721fa215d">sprites</a>-&gt;<a class="code" href="classSpriteStorage.html#ab064529c8a44aa3168fdae0033f22c5a">platform</a>.<a class="code" href="classPlatform.html#ae1468a2fe7cf2bcee1a48c0325a86d1a">ramp</a>[0]; <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01051"></a><span class="lineno"> 1051</span>&#160;                        <span class="keywordflow">default</span>: pl_spr = this-&gt;<a class="code" href="classVoxelCollector.html#a8270a2843c6824b485561e9721fa215d">sprites</a>-&gt;<a class="code" href="classSpriteStorage.html#ab064529c8a44aa3168fdae0033f22c5a">platform</a>.<a class="code" href="classPlatform.html#a63fbc54e00718b381f4f055a743e31a7">flat</a>[this-&gt;<a class="code" href="classVoxelCollector.html#a95f3b9137ebbcf6851d24c27bbcece2c">orient</a> &amp; 1]; <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01052"></a><span class="lineno"> 1052</span>&#160;                }</div>
<div class="line"><a name="l01053"></a><span class="lineno"> 1053</span>&#160;                <span class="keywordflow">if</span> (pl_spr != <span class="keyword">nullptr</span>) {</div>
<div class="line"><a name="l01054"></a><span class="lineno"> 1054</span>&#160;                        <a class="code" href="structDrawData.html">DrawData</a> dd;</div>
<div class="line"><a name="l01055"></a><span class="lineno"> 1055</span>&#160;                        dd.<a class="code" href="structDrawData.html#a2637f5d86a4291f50f19fa1d942e645a">level</a> = slice;</div>
<div class="line"><a name="l01056"></a><span class="lineno"> 1056</span>&#160;                        dd.<a class="code" href="structDrawData.html#a49c4e8444e4bb48bdebdc7d947cdc7de">z_height</a> = voxel_pos.<a class="code" href="structXYZPoint.html#a97215f048dde4da40be2742267ab7224">z</a>;</div>
<div class="line"><a name="l01057"></a><span class="lineno"> 1057</span>&#160;                        dd.<a class="code" href="structDrawData.html#a9ed124116c1db658f237dfdc890f4bdb">order</a> = <a class="code" href="viewport_8h.html#ad83c05db97e3590a5da165ead3d5792da7fbb35848771ed907fea827475f0b9b5">SO_PLATFORM</a>;</div>
<div class="line"><a name="l01058"></a><span class="lineno"> 1058</span>&#160;                        dd.<a class="code" href="structDrawData.html#a353546506625aaeffb85726b311ae4ad">sprite</a> = pl_spr;</div>
<div class="line"><a name="l01059"></a><span class="lineno"> 1059</span>&#160;                        dd.<a class="code" href="structDrawData.html#ac48d72511e0ea716333781b67cf28204">base</a>.<a class="code" href="structPoint.html#af0836c7f2eec563aa7bc20d8cfa5dd2a">x</a> = this-&gt;<a class="code" href="classSpriteCollector.html#a36f7a47d5a87c4d5f24d0f0e0641c742">xoffset</a> + xnorth - this-&gt;<a class="code" href="classVoxelCollector.html#add20fd94a174adf4898834c738b57d31">rect</a>.<a class="code" href="structRectangle.html#ab794667ffad2a46061bc417f99c031cc">base</a>.<a class="code" href="structPoint.html#af0836c7f2eec563aa7bc20d8cfa5dd2a">x</a>;</div>
<div class="line"><a name="l01060"></a><span class="lineno"> 1060</span>&#160;                        dd.<a class="code" href="structDrawData.html#ac48d72511e0ea716333781b67cf28204">base</a>.<a class="code" href="structPoint.html#a56c3dcea91f03182921eea9a5cf555a3">y</a> = this-&gt;<a class="code" href="classSpriteCollector.html#a500b250eeb6332feb88f21880f769b35">yoffset</a> + ynorth - this-&gt;<a class="code" href="classVoxelCollector.html#add20fd94a174adf4898834c738b57d31">rect</a>.<a class="code" href="structRectangle.html#ab794667ffad2a46061bc417f99c031cc">base</a>.<a class="code" href="structPoint.html#a56c3dcea91f03182921eea9a5cf555a3">y</a>;</div>
<div class="line"><a name="l01061"></a><span class="lineno"> 1061</span>&#160;                        dd.<a class="code" href="structDrawData.html#a60f157d7706304439f8eee934fc80019">recolour</a> = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01062"></a><span class="lineno"> 1062</span>&#160;                        this-&gt;<a class="code" href="classSpriteCollector.html#a2ff573025924a75fa7bd200757a843ed">draw_images</a>.insert(dd);</div>
<div class="line"><a name="l01063"></a><span class="lineno"> 1063</span>&#160;                }</div>
<div class="line"><a name="l01064"></a><span class="lineno"> 1064</span>&#160;</div>
<div class="line"><a name="l01065"></a><span class="lineno"> 1065</span>&#160;                <span class="comment">/* XXX Use the shape to draw handle bars. */</span></div>
<div class="line"><a name="l01066"></a><span class="lineno"> 1066</span>&#160;</div>
<div class="line"><a name="l01067"></a><span class="lineno"> 1067</span>&#160;                <span class="comment">/* Add supports. */</span></div>
<div class="line"><a name="l01068"></a><span class="lineno"> 1068</span>&#160;                <a class="code" href="stdafx_8h.html#a05f6b0ae8f6a6e135b0e290c25fe0e4e">uint16</a> height = this-&gt;<a class="code" href="classSpriteCollector.html#a1daa68f8402e1e22a7eb997eaf9195ae">ground_height</a>;</div>
<div class="line"><a name="l01069"></a><span class="lineno"> 1069</span>&#160;                this-&gt;<a class="code" href="classSpriteCollector.html#a1daa68f8402e1e22a7eb997eaf9195ae">ground_height</a> = -1;</div>
<div class="line"><a name="l01070"></a><span class="lineno"> 1070</span>&#160;                <a class="code" href="stdafx_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> slope = this-&gt;<a class="code" href="classSpriteCollector.html#a32f43c4ee8b6fb71887ac75891fc0038">ground_slope</a>;</div>
<div class="line"><a name="l01071"></a><span class="lineno"> 1071</span>&#160;                <span class="keywordflow">while</span> (height &lt; voxel_pos.<a class="code" href="structXYZPoint.html#a97215f048dde4da40be2742267ab7224">z</a>) {</div>
<div class="line"><a name="l01072"></a><span class="lineno"> 1072</span>&#160;                        <span class="keywordtype">int</span> <a class="code" href="classSpriteCollector.html#a500b250eeb6332feb88f21880f769b35">yoffset</a> = (voxel_pos.<a class="code" href="structXYZPoint.html#a97215f048dde4da40be2742267ab7224">z</a> - height) * this-&gt;<a class="code" href="classVoxelCollector.html#afa04c64dc66f1adecebe2a0d7fb2681c">vp</a>-&gt;<a class="code" href="classViewport.html#a87164c2051ecd5d9382045a785f5a009">tile_height</a>; <span class="comment">// Compensate y position of support.</span></div>
<div class="line"><a name="l01073"></a><span class="lineno"> 1073</span>&#160;                        <a class="code" href="stdafx_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a> sprnum;</div>
<div class="line"><a name="l01074"></a><span class="lineno"> 1074</span>&#160;                        if (slope == <a class="code" href="group__map__group.html#ggaa25639f3980e1fa4c64a58d3a8e4d149a9ea32a3b4fa9f1cb3889a8b7da1c3ec2">SL_FLAT</a>) {</div>
<div class="line"><a name="l01075"></a><span class="lineno"> 1075</span>&#160;                                <span class="keywordflow">if</span> (height + 1 &lt; voxel_pos.<a class="code" href="structXYZPoint.html#a97215f048dde4da40be2742267ab7224">z</a>) {</div>
<div class="line"><a name="l01076"></a><span class="lineno"> 1076</span>&#160;                                        sprnum = <a class="code" href="tile_8h.html#a642780fc34ac497216ea98fedeacb570a270e5f363245e416dc6498991718aeaf">SSP_FLAT_DOUBLE_NS</a> + (this-&gt;<a class="code" href="classVoxelCollector.html#a95f3b9137ebbcf6851d24c27bbcece2c">orient</a> &amp; 1);</div>
<div class="line"><a name="l01077"></a><span class="lineno"> 1077</span>&#160;                                        height += 2;</div>
<div class="line"><a name="l01078"></a><span class="lineno"> 1078</span>&#160;                                } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01079"></a><span class="lineno"> 1079</span>&#160;                                        sprnum = <a class="code" href="tile_8h.html#a642780fc34ac497216ea98fedeacb570a6c81b59cdecd78ab382a2adc6cbbd539">SSP_FLAT_SINGLE_NS</a> + (this-&gt;<a class="code" href="classVoxelCollector.html#a95f3b9137ebbcf6851d24c27bbcece2c">orient</a> &amp; 1);</div>
<div class="line"><a name="l01080"></a><span class="lineno"> 1080</span>&#160;                                        height += 1;</div>
<div class="line"><a name="l01081"></a><span class="lineno"> 1081</span>&#160;                                }</div>
<div class="line"><a name="l01082"></a><span class="lineno"> 1082</span>&#160;                        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01083"></a><span class="lineno"> 1083</span>&#160;                                <span class="keywordflow">if</span> (slope &gt;= 15) { <span class="comment">// Imploded steep slope.</span></div>
<div class="line"><a name="l01084"></a><span class="lineno"> 1084</span>&#160;                                        sprnum = <a class="code" href="tile_8h.html#a642780fc34ac497216ea98fedeacb570aad77265678b91219d8df3d27d4ec0589">SSP_STEEP_N</a> + ((slope - 15) + 2) % 4;</div>
<div class="line"><a name="l01085"></a><span class="lineno"> 1085</span>&#160;                                        height += 2;</div>
<div class="line"><a name="l01086"></a><span class="lineno"> 1086</span>&#160;                                } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01087"></a><span class="lineno"> 1087</span>&#160;                                        sprnum = <a class="code" href="tile_8h.html#a642780fc34ac497216ea98fedeacb570a557c85b313c107e54447c1ab2c8f3052">SSP_NONFLAT_BASE</a> + 15 - slope;</div>
<div class="line"><a name="l01088"></a><span class="lineno"> 1088</span>&#160;                                        height++;</div>
<div class="line"><a name="l01089"></a><span class="lineno"> 1089</span>&#160;                                }</div>
<div class="line"><a name="l01090"></a><span class="lineno"> 1090</span>&#160;                                slope = <a class="code" href="group__map__group.html#ggaa25639f3980e1fa4c64a58d3a8e4d149a9ea32a3b4fa9f1cb3889a8b7da1c3ec2">SL_FLAT</a>;</div>
<div class="line"><a name="l01091"></a><span class="lineno"> 1091</span>&#160;                        }</div>
<div class="line"><a name="l01092"></a><span class="lineno"> 1092</span>&#160;                        <a class="code" href="classImageData.html">ImageData</a> *img = this-&gt;<a class="code" href="classVoxelCollector.html#a8270a2843c6824b485561e9721fa215d">sprites</a>-&gt;<a class="code" href="classSpriteStorage.html#a79bef44dd025318889a7801a1965e485">support</a>.<a class="code" href="classSupport.html#a610989653010770d176d77e739a2f741">sprites</a>[sprnum];</div>
<div class="line"><a name="l01093"></a><span class="lineno"> 1093</span>&#160;                        <span class="keywordflow">if</span> (img != <span class="keyword">nullptr</span>) {</div>
<div class="line"><a name="l01094"></a><span class="lineno"> 1094</span>&#160;                                <a class="code" href="structDrawData.html">DrawData</a> dd;</div>
<div class="line"><a name="l01095"></a><span class="lineno"> 1095</span>&#160;                                dd.<a class="code" href="structDrawData.html#a2637f5d86a4291f50f19fa1d942e645a">level</a> = slice;</div>
<div class="line"><a name="l01096"></a><span class="lineno"> 1096</span>&#160;                                dd.<a class="code" href="structDrawData.html#a49c4e8444e4bb48bdebdc7d947cdc7de">z_height</a> = height;</div>
<div class="line"><a name="l01097"></a><span class="lineno"> 1097</span>&#160;                                dd.<a class="code" href="structDrawData.html#a9ed124116c1db658f237dfdc890f4bdb">order</a> = <a class="code" href="viewport_8h.html#ad83c05db97e3590a5da165ead3d5792daed4244c97084d57326a8ca2c9647e7d9">SO_SUPPORT</a>;</div>
<div class="line"><a name="l01098"></a><span class="lineno"> 1098</span>&#160;                                dd.<a class="code" href="structDrawData.html#a353546506625aaeffb85726b311ae4ad">sprite</a> = img;</div>
<div class="line"><a name="l01099"></a><span class="lineno"> 1099</span>&#160;                                dd.<a class="code" href="structDrawData.html#ac48d72511e0ea716333781b67cf28204">base</a>.<a class="code" href="structPoint.html#af0836c7f2eec563aa7bc20d8cfa5dd2a">x</a> = this-&gt;<a class="code" href="classSpriteCollector.html#a36f7a47d5a87c4d5f24d0f0e0641c742">xoffset</a> + xnorth - this-&gt;<a class="code" href="classVoxelCollector.html#add20fd94a174adf4898834c738b57d31">rect</a>.<a class="code" href="structRectangle.html#ab794667ffad2a46061bc417f99c031cc">base</a>.<a class="code" href="structPoint.html#af0836c7f2eec563aa7bc20d8cfa5dd2a">x</a>;</div>
<div class="line"><a name="l01100"></a><span class="lineno"> 1100</span>&#160;                                dd.<a class="code" href="structDrawData.html#ac48d72511e0ea716333781b67cf28204">base</a>.<a class="code" href="structPoint.html#a56c3dcea91f03182921eea9a5cf555a3">y</a> = this-&gt;yoffset + ynorth - this-&gt;<a class="code" href="classVoxelCollector.html#add20fd94a174adf4898834c738b57d31">rect</a>.<a class="code" href="structRectangle.html#ab794667ffad2a46061bc417f99c031cc">base</a>.<a class="code" href="structPoint.html#a56c3dcea91f03182921eea9a5cf555a3">y</a> + <a class="code" href="classSpriteCollector.html#a500b250eeb6332feb88f21880f769b35">yoffset</a>;</div>
<div class="line"><a name="l01101"></a><span class="lineno"> 1101</span>&#160;                                dd.<a class="code" href="structDrawData.html#a60f157d7706304439f8eee934fc80019">recolour</a> = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01102"></a><span class="lineno"> 1102</span>&#160;                                this-&gt;<a class="code" href="classSpriteCollector.html#a2ff573025924a75fa7bd200757a843ed">draw_images</a>.insert(dd);</div>
<div class="line"><a name="l01103"></a><span class="lineno"> 1103</span>&#160;                        }</div>
<div class="line"><a name="l01104"></a><span class="lineno"> 1104</span>&#160;                }</div>
<div class="line"><a name="l01105"></a><span class="lineno"> 1105</span>&#160;        }</div>
<div class="line"><a name="l01106"></a><span class="lineno"> 1106</span>&#160;</div>
<div class="line"><a name="l01107"></a><span class="lineno"> 1107</span>&#160;        <span class="comment">/* Add voxel objects (persons, ride cars, etc). */</span></div>
<div class="line"><a name="l01108"></a><span class="lineno"> 1108</span>&#160;        <span class="keyword">const</span> <a class="code" href="classVoxelObject.html">VoxelObject</a> *vo = voxel-&gt;<a class="code" href="structVoxel.html#acd06c81b4b17faa125e1403d5b1a357d">voxel_objects</a>;</div>
<div class="line"><a name="l01109"></a><span class="lineno"> 1109</span>&#160;        <span class="keywordflow">while</span> (vo != <span class="keyword">nullptr</span>) {</div>
<div class="line"><a name="l01110"></a><span class="lineno"> 1110</span>&#160;                <a class="code" href="structDrawData.html">DrawData</a> dd;</div>
<div class="line"><a name="l01111"></a><span class="lineno"> 1111</span>&#160;                <span class="keyword">const</span> <a class="code" href="classImageData.html">ImageData</a> *anim_spr = vo-&gt;<a class="code" href="classVoxelObject.html#aec92d138c7b5b3622575aee15986fad4">GetSprite</a>(this-&gt;<a class="code" href="classVoxelCollector.html#a8270a2843c6824b485561e9721fa215d">sprites</a>, this-&gt;<a class="code" href="classVoxelCollector.html#a95f3b9137ebbcf6851d24c27bbcece2c">orient</a>, &amp;dd.<a class="code" href="structDrawData.html#a60f157d7706304439f8eee934fc80019">recolour</a>);</div>
<div class="line"><a name="l01112"></a><span class="lineno"> 1112</span>&#160;                <span class="keywordflow">if</span> (anim_spr != <span class="keyword">nullptr</span>) {</div>
<div class="line"><a name="l01113"></a><span class="lineno"> 1113</span>&#160;                        <span class="keywordtype">int</span> x_off = <a class="code" href="classVoxelCollector.html#a888574dccee18b193ec92b4a6d732250">ComputeX</a>(vo-&gt;<a class="code" href="classVoxelObject.html#ab12d97f145e1b434c7cfe15db46f31cb">pix_pos</a>.<a class="code" href="structXYZPoint.html#a77a7984ac0a26ecb76acb94bbcf96a48">x</a>, vo-&gt;<a class="code" href="classVoxelObject.html#ab12d97f145e1b434c7cfe15db46f31cb">pix_pos</a>.<a class="code" href="structXYZPoint.html#aea2c3552caee6e81c3b007ff78834b99">y</a>);</div>
<div class="line"><a name="l01114"></a><span class="lineno"> 1114</span>&#160;                        <span class="keywordtype">int</span> y_off = <a class="code" href="classVoxelCollector.html#a5e598f88e6d585180f9fc94964202167">ComputeY</a>(vo-&gt;<a class="code" href="classVoxelObject.html#ab12d97f145e1b434c7cfe15db46f31cb">pix_pos</a>.<a class="code" href="structXYZPoint.html#a77a7984ac0a26ecb76acb94bbcf96a48">x</a>, vo-&gt;<a class="code" href="classVoxelObject.html#ab12d97f145e1b434c7cfe15db46f31cb">pix_pos</a>.<a class="code" href="structXYZPoint.html#aea2c3552caee6e81c3b007ff78834b99">y</a>, vo-&gt;<a class="code" href="classVoxelObject.html#ab12d97f145e1b434c7cfe15db46f31cb">pix_pos</a>.<a class="code" href="structXYZPoint.html#a97215f048dde4da40be2742267ab7224">z</a>);</div>
<div class="line"><a name="l01115"></a><span class="lineno"> 1115</span>&#160;                        dd.<a class="code" href="structDrawData.html#a2637f5d86a4291f50f19fa1d942e645a">level</a> = slice;</div>
<div class="line"><a name="l01116"></a><span class="lineno"> 1116</span>&#160;                        dd.<a class="code" href="structDrawData.html#a49c4e8444e4bb48bdebdc7d947cdc7de">z_height</a> = voxel_pos.<a class="code" href="structXYZPoint.html#a97215f048dde4da40be2742267ab7224">z</a>;</div>
<div class="line"><a name="l01117"></a><span class="lineno"> 1117</span>&#160;                        dd.<a class="code" href="structDrawData.html#a9ed124116c1db658f237dfdc890f4bdb">order</a> = <a class="code" href="viewport_8h.html#ad83c05db97e3590a5da165ead3d5792dac65ce884e2c15177c2b03526cd3f5d99">SO_PERSON</a>;</div>
<div class="line"><a name="l01118"></a><span class="lineno"> 1118</span>&#160;                        dd.<a class="code" href="structDrawData.html#a353546506625aaeffb85726b311ae4ad">sprite</a> = anim_spr;</div>
<div class="line"><a name="l01119"></a><span class="lineno"> 1119</span>&#160;                        dd.<a class="code" href="structDrawData.html#ac48d72511e0ea716333781b67cf28204">base</a>.<a class="code" href="structPoint.html#af0836c7f2eec563aa7bc20d8cfa5dd2a">x</a> = this-&gt;<a class="code" href="classSpriteCollector.html#a36f7a47d5a87c4d5f24d0f0e0641c742">xoffset</a> + this-&gt;<a class="code" href="classSpriteCollector.html#a5a776d1ad5a016265cac6093fbf2ba53">north_offsets</a>[this-&gt;<a class="code" href="classVoxelCollector.html#a95f3b9137ebbcf6851d24c27bbcece2c">orient</a>].<a class="code" href="structPoint.html#af0836c7f2eec563aa7bc20d8cfa5dd2a">x</a> + xnorth - this-&gt;<a class="code" href="classVoxelCollector.html#add20fd94a174adf4898834c738b57d31">rect</a>.<a class="code" href="structRectangle.html#ab794667ffad2a46061bc417f99c031cc">base</a>.<a class="code" href="structPoint.html#af0836c7f2eec563aa7bc20d8cfa5dd2a">x</a> + x_off;</div>
<div class="line"><a name="l01120"></a><span class="lineno"> 1120</span>&#160;                        dd.<a class="code" href="structDrawData.html#ac48d72511e0ea716333781b67cf28204">base</a>.<a class="code" href="structPoint.html#a56c3dcea91f03182921eea9a5cf555a3">y</a> = this-&gt;<a class="code" href="classSpriteCollector.html#a500b250eeb6332feb88f21880f769b35">yoffset</a> + this-&gt;<a class="code" href="classSpriteCollector.html#a5a776d1ad5a016265cac6093fbf2ba53">north_offsets</a>[this-&gt;<a class="code" href="classVoxelCollector.html#a95f3b9137ebbcf6851d24c27bbcece2c">orient</a>].<a class="code" href="structPoint.html#a56c3dcea91f03182921eea9a5cf555a3">y</a> + ynorth - this-&gt;<a class="code" href="classVoxelCollector.html#add20fd94a174adf4898834c738b57d31">rect</a>.<a class="code" href="structRectangle.html#ab794667ffad2a46061bc417f99c031cc">base</a>.<a class="code" href="structPoint.html#a56c3dcea91f03182921eea9a5cf555a3">y</a> + y_off;</div>
<div class="line"><a name="l01121"></a><span class="lineno"> 1121</span>&#160;                        this-&gt;<a class="code" href="classSpriteCollector.html#a2ff573025924a75fa7bd200757a843ed">draw_images</a>.insert(dd);</div>
<div class="line"><a name="l01122"></a><span class="lineno"> 1122</span>&#160;                }</div>
<div class="line"><a name="l01123"></a><span class="lineno"> 1123</span>&#160;                vo = vo-&gt;<a class="code" href="classVoxelObject.html#a4f033bfae34c4b46acaf1f9f2c7ec404">next_object</a>;</div>
<div class="line"><a name="l01124"></a><span class="lineno"> 1124</span>&#160;        }</div>
<div class="line"><a name="l01125"></a><span class="lineno"> 1125</span>&#160;}</div>
<div class="line"><a name="l01126"></a><span class="lineno"> 1126</span>&#160;</div>
<div class="line"><a name="l01132"></a><span class="lineno"><a class="line" href="classFinderData.html#a4e7135d531cd213ace38a9336e6e2d22"> 1132</a></span>&#160;<a class="code" href="classFinderData.html#a4e7135d531cd213ace38a9336e6e2d22">FinderData::FinderData</a>(<a class="code" href="viewport_8h.html#a7eaf31dcf3c53b721a3144bb135f8d25">ClickableSprite</a> allowed, <a class="code" href="viewport_8h.html#ac72850d8ae4e0c914f4227f845921a3f">GroundTilePart</a> select)</div>
<div class="line"><a name="l01133"></a><span class="lineno"> 1133</span>&#160;{</div>
<div class="line"><a name="l01134"></a><span class="lineno"> 1134</span>&#160;        this-&gt;allowed = <a class="code" href="classFinderData.html#a344e4f4b348a5549f2da4c66f69aa373">allowed</a>;</div>
<div class="line"><a name="l01135"></a><span class="lineno"> 1135</span>&#160;        this-&gt;select = <a class="code" href="classFinderData.html#a3f4bda28f0eaac766e7224bc4e1e0ec5">select</a>;</div>
<div class="line"><a name="l01136"></a><span class="lineno"> 1136</span>&#160;</div>
<div class="line"><a name="l01137"></a><span class="lineno"> 1137</span>&#160;        <span class="comment">/*</span></div>
<div class="line"><a name="l01138"></a><span class="lineno"> 1138</span>&#160;<span class="comment">         * CS_GROUND must not be allowed when looking for edge,</span></div>
<div class="line"><a name="l01139"></a><span class="lineno"> 1139</span>&#160;<span class="comment">         * or the other way around.</span></div>
<div class="line"><a name="l01140"></a><span class="lineno"> 1140</span>&#160;<span class="comment">         */</span></div>
<div class="line"><a name="l01141"></a><span class="lineno"> 1141</span>&#160;        assert(select != <a class="code" href="viewport_8h.html#ac72850d8ae4e0c914f4227f845921a3fa92ab52460b42f3a5b454ef385b180073">FW_EDGE</a> || (allowed &amp; <a class="code" href="viewport_8h.html#ad83c05db97e3590a5da165ead3d5792dab1736d60c068f615aa53700447e65121">SO_GROUND</a>) == 0);</div>
<div class="line"><a name="l01142"></a><span class="lineno"> 1142</span>&#160;        assert(select == <a class="code" href="viewport_8h.html#ac72850d8ae4e0c914f4227f845921a3fa92ab52460b42f3a5b454ef385b180073">FW_EDGE</a> || (allowed &amp; <a class="code" href="viewport_8h.html#ad83c05db97e3590a5da165ead3d5792da9080fbc15fb6ba3616aa0532a874a117">SO_GROUND_EDGE</a>) == 0);</div>
<div class="line"><a name="l01143"></a><span class="lineno"> 1143</span>&#160;</div>
<div class="line"><a name="l01144"></a><span class="lineno"> 1144</span>&#160;        <span class="comment">// Other data is initialized in PixelFinder::PixelFinder, or Viewport::ComputeCursorPosition.</span></div>
<div class="line"><a name="l01145"></a><span class="lineno"> 1145</span>&#160;}</div>
<div class="line"><a name="l01146"></a><span class="lineno"> 1146</span>&#160;</div>
<div class="line"><a name="l01152"></a><span class="lineno"><a class="line" href="classPixelFinder.html#a786e481e53946859cd609c23e7e5db3d"> 1152</a></span>&#160;<a class="code" href="classPixelFinder.html#a786e481e53946859cd609c23e7e5db3d">PixelFinder::PixelFinder</a>(<a class="code" href="classViewport.html">Viewport</a> *vp, <a class="code" href="classFinderData.html">FinderData</a> *fdata) : <a class="code" href="classVoxelCollector.html">VoxelCollector</a>(vp, false)</div>
<div class="line"><a name="l01153"></a><span class="lineno"> 1153</span>&#160;{</div>
<div class="line"><a name="l01154"></a><span class="lineno"> 1154</span>&#160;        this-&gt;<a class="code" href="classPixelFinder.html#aa9f614ee6d26ac2e2d5238abab133770">allowed</a> = fdata-&gt;<a class="code" href="classFinderData.html#a344e4f4b348a5549f2da4c66f69aa373">allowed</a>;</div>
<div class="line"><a name="l01155"></a><span class="lineno"> 1155</span>&#160;        this-&gt;<a class="code" href="classPixelFinder.html#a22026f65fa28030f9673fbdf70ee5415">found</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01156"></a><span class="lineno"> 1156</span>&#160;        this-&gt;<a class="code" href="classPixelFinder.html#a351817707623c57264a0be8a288eab51">pixel</a> = <a class="code" href="palette_8cpp.html#a550404bbe3732d4105e8965deba1867b">_palette</a>[0]; <span class="comment">// 0 is transparent, and is not used in sprites.</span></div>
<div class="line"><a name="l01157"></a><span class="lineno"> 1157</span>&#160;        this-&gt;fdata = <a class="code" href="classPixelFinder.html#ac2415aa0c2048a74ec2b07da48868c57">fdata</a>;</div>
<div class="line"><a name="l01158"></a><span class="lineno"> 1158</span>&#160;</div>
<div class="line"><a name="l01159"></a><span class="lineno"> 1159</span>&#160;        fdata-&gt;<a class="code" href="classFinderData.html#a12e06eb2ee43fdf050b3b86956cd93bd">voxel_pos</a> = <a class="code" href="geometry_8h.html#a71fcb91f44cc6cbf519d0c45c07e931d">XYZPoint16</a>(0, 0, 0);</div>
<div class="line"><a name="l01160"></a><span class="lineno"> 1160</span>&#160;        fdata-&gt;<a class="code" href="classFinderData.html#ac97548057108cffaeada475e1d02d6d5">person</a> = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01161"></a><span class="lineno"> 1161</span>&#160;        fdata-&gt;<a class="code" href="classFinderData.html#a0d828371987191a2190899192754822a">ride</a>   = <a class="code" href="ride__type_8h.html#a4cf3c03a141e04aea3c805a9e97f1835">INVALID_RIDE_INSTANCE</a>;</div>
<div class="line"><a name="l01162"></a><span class="lineno"> 1162</span>&#160;}</div>
<div class="line"><a name="l01163"></a><span class="lineno"> 1163</span>&#160;</div>
<div class="line"><a name="l01164"></a><span class="lineno"> 1164</span>&#160;PixelFinder::~PixelFinder()</div>
<div class="line"><a name="l01165"></a><span class="lineno"> 1165</span>&#160;{</div>
<div class="line"><a name="l01166"></a><span class="lineno"> 1166</span>&#160;}</div>
<div class="line"><a name="l01167"></a><span class="lineno"> 1167</span>&#160;</div>
<div class="line"><a name="l01175"></a><span class="lineno"><a class="line" href="classPixelFinder.html#a2f650c8fff8cec322a25af9152f5f26d"> 1175</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classPixelFinder.html#a2f650c8fff8cec322a25af9152f5f26d">PixelFinder::CollectVoxel</a>(<span class="keyword">const</span> <a class="code" href="structVoxel.html">Voxel</a> *voxel, <span class="keyword">const</span> <a class="code" href="structXYZPoint.html">XYZPoint16</a> &amp;voxel_pos, <a class="code" href="stdafx_8h.html#a43d43196463bde49cb067f5c20ab8481">int32</a> xnorth, <a class="code" href="stdafx_8h.html#a43d43196463bde49cb067f5c20ab8481">int32</a> ynorth)</div>
<div class="line"><a name="l01176"></a><span class="lineno"> 1176</span>&#160;{</div>
<div class="line"><a name="l01177"></a><span class="lineno"> 1177</span>&#160;        <a class="code" href="stdafx_8h.html#a43d43196463bde49cb067f5c20ab8481">int32</a> slice;</div>
<div class="line"><a name="l01178"></a><span class="lineno"> 1178</span>&#160;        <span class="keywordflow">switch</span> (this-&gt;<a class="code" href="classVoxelCollector.html#a95f3b9137ebbcf6851d24c27bbcece2c">orient</a>) {</div>
<div class="line"><a name="l01179"></a><span class="lineno"> 1179</span>&#160;                <span class="keywordflow">case</span> 0: slice =  voxel_pos.<a class="code" href="structXYZPoint.html#a77a7984ac0a26ecb76acb94bbcf96a48">x</a> + voxel_pos.<a class="code" href="structXYZPoint.html#aea2c3552caee6e81c3b007ff78834b99">y</a>; <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01180"></a><span class="lineno"> 1180</span>&#160;                <span class="keywordflow">case</span> 1: slice =  voxel_pos.<a class="code" href="structXYZPoint.html#a77a7984ac0a26ecb76acb94bbcf96a48">x</a> - voxel_pos.<a class="code" href="structXYZPoint.html#aea2c3552caee6e81c3b007ff78834b99">y</a>; <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01181"></a><span class="lineno"> 1181</span>&#160;                <span class="keywordflow">case</span> 2: slice = -voxel_pos.<a class="code" href="structXYZPoint.html#a77a7984ac0a26ecb76acb94bbcf96a48">x</a> - voxel_pos.<a class="code" href="structXYZPoint.html#aea2c3552caee6e81c3b007ff78834b99">y</a>; <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01182"></a><span class="lineno"> 1182</span>&#160;                <span class="keywordflow">case</span> 3: slice = -voxel_pos.<a class="code" href="structXYZPoint.html#a77a7984ac0a26ecb76acb94bbcf96a48">x</a> + voxel_pos.<a class="code" href="structXYZPoint.html#aea2c3552caee6e81c3b007ff78834b99">y</a>; <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01183"></a><span class="lineno"> 1183</span>&#160;                <span class="keywordflow">default</span>: <a class="code" href="stdafx_8h.html#a6c2edf1e500e498b687567418bf4fef6">NOT_REACHED</a>();</div>
<div class="line"><a name="l01184"></a><span class="lineno"> 1184</span>&#160;        }</div>
<div class="line"><a name="l01185"></a><span class="lineno"> 1185</span>&#160;        <span class="comment">/* Looking for surface edge? */</span></div>
<div class="line"><a name="l01186"></a><span class="lineno"> 1186</span>&#160;        <span class="keywordflow">if</span> ((this-&gt;<a class="code" href="classPixelFinder.html#aa9f614ee6d26ac2e2d5238abab133770">allowed</a> &amp; <a class="code" href="viewport_8h.html#ad83c05db97e3590a5da165ead3d5792da9080fbc15fb6ba3616aa0532a874a117">SO_GROUND_EDGE</a>) != 0 &amp;&amp; voxel-&gt;<a class="code" href="structVoxel.html#a39b4316f246f89cc83a490c87edd7ac6">GetGroundType</a>() != <a class="code" href="group__map__group.html#ggad15436b50732bd9ef2b6f2efa5f400edaf0ceff8e769df0430417e0704018dfc7">GTP_INVALID</a>) {</div>
<div class="line"><a name="l01187"></a><span class="lineno"> 1187</span>&#160;                <span class="keyword">const</span> <a class="code" href="classImageData.html">ImageData</a> *spr = this-&gt;<a class="code" href="classVoxelCollector.html#a8270a2843c6824b485561e9721fa215d">sprites</a>-&gt;<a class="code" href="classSpriteStorage.html#ae435eacf1c908620f709e18468cc925b">GetSurfaceSprite</a>(<a class="code" href="group__map__group.html#ggad15436b50732bd9ef2b6f2efa5f400eda02014fe44d751ae9d07f737a68c148de">GTP_CURSOR_EDGE_TEST</a>, voxel-&gt;<a class="code" href="structVoxel.html#adf0e5dcd80753791808eca30dc90879a">GetGroundSlope</a>(), this-&gt;<a class="code" href="classVoxelCollector.html#a95f3b9137ebbcf6851d24c27bbcece2c">orient</a>);</div>
<div class="line"><a name="l01188"></a><span class="lineno"> 1188</span>&#160;                <a class="code" href="structDrawData.html">DrawData</a> dd;</div>
<div class="line"><a name="l01189"></a><span class="lineno"> 1189</span>&#160;                dd.<a class="code" href="structDrawData.html#a2637f5d86a4291f50f19fa1d942e645a">level</a> = slice;</div>
<div class="line"><a name="l01190"></a><span class="lineno"> 1190</span>&#160;                dd.<a class="code" href="structDrawData.html#a49c4e8444e4bb48bdebdc7d947cdc7de">z_height</a> = voxel_pos.<a class="code" href="structXYZPoint.html#a97215f048dde4da40be2742267ab7224">z</a>;</div>
<div class="line"><a name="l01191"></a><span class="lineno"> 1191</span>&#160;                dd.<a class="code" href="structDrawData.html#a9ed124116c1db658f237dfdc890f4bdb">order</a> = <a class="code" href="viewport_8h.html#ad83c05db97e3590a5da165ead3d5792da9080fbc15fb6ba3616aa0532a874a117">SO_GROUND_EDGE</a>;</div>
<div class="line"><a name="l01192"></a><span class="lineno"> 1192</span>&#160;                dd.<a class="code" href="structDrawData.html#a353546506625aaeffb85726b311ae4ad">sprite</a> = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01193"></a><span class="lineno"> 1193</span>&#160;                dd.<a class="code" href="structDrawData.html#ac48d72511e0ea716333781b67cf28204">base</a>.<a class="code" href="structPoint.html#af0836c7f2eec563aa7bc20d8cfa5dd2a">x</a> = this-&gt;<a class="code" href="classVoxelCollector.html#add20fd94a174adf4898834c738b57d31">rect</a>.<a class="code" href="structRectangle.html#ab794667ffad2a46061bc417f99c031cc">base</a>.<a class="code" href="structPoint.html#af0836c7f2eec563aa7bc20d8cfa5dd2a">x</a> - xnorth;</div>
<div class="line"><a name="l01194"></a><span class="lineno"> 1194</span>&#160;                dd.<a class="code" href="structDrawData.html#ac48d72511e0ea716333781b67cf28204">base</a>.<a class="code" href="structPoint.html#a56c3dcea91f03182921eea9a5cf555a3">y</a> = this-&gt;<a class="code" href="classVoxelCollector.html#add20fd94a174adf4898834c738b57d31">rect</a>.<a class="code" href="structRectangle.html#ab794667ffad2a46061bc417f99c031cc">base</a>.<a class="code" href="structPoint.html#a56c3dcea91f03182921eea9a5cf555a3">y</a> - ynorth;</div>
<div class="line"><a name="l01195"></a><span class="lineno"> 1195</span>&#160;                dd.<a class="code" href="structDrawData.html#a60f157d7706304439f8eee934fc80019">recolour</a> = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01196"></a><span class="lineno"> 1196</span>&#160;                <span class="keywordflow">if</span> (spr != <span class="keyword">nullptr</span> &amp;&amp; (!this-&gt;<a class="code" href="classPixelFinder.html#a22026f65fa28030f9673fbdf70ee5415">found</a> || this-&gt;<a class="code" href="classPixelFinder.html#a29c2cbacbb286eed99841b873a23ce7c">data</a> &lt; dd)) {</div>
<div class="line"><a name="l01197"></a><span class="lineno"> 1197</span>&#160;                        <a class="code" href="stdafx_8h.html#a1134b580f8da4de94ca6b1de4d37975e">uint32</a> <a class="code" href="classPixelFinder.html#a351817707623c57264a0be8a288eab51">pixel</a> = spr-&gt;<a class="code" href="classImageData.html#a961b9b222bef6dd1c0f221f2d1677be4">GetPixel</a>(dd.<a class="code" href="structDrawData.html#ac48d72511e0ea716333781b67cf28204">base</a>.<a class="code" href="structPoint.html#af0836c7f2eec563aa7bc20d8cfa5dd2a">x</a> - spr-&gt;<a class="code" href="classImageData.html#ad2b115162daf7ac09e9fe4392bbadafb">xoffset</a>, dd.<a class="code" href="structDrawData.html#ac48d72511e0ea716333781b67cf28204">base</a>.<a class="code" href="structPoint.html#a56c3dcea91f03182921eea9a5cf555a3">y</a> - spr-&gt;<a class="code" href="classImageData.html#a47112f6751201d5d56b2fddbb640968d">yoffset</a>);</div>
<div class="line"><a name="l01198"></a><span class="lineno"> 1198</span>&#160;                        <span class="keywordflow">if</span> (pixel != 0) {</div>
<div class="line"><a name="l01199"></a><span class="lineno"> 1199</span>&#160;                                this-&gt;<a class="code" href="classPixelFinder.html#a22026f65fa28030f9673fbdf70ee5415">found</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01200"></a><span class="lineno"> 1200</span>&#160;                                this-&gt;<a class="code" href="classPixelFinder.html#a29c2cbacbb286eed99841b873a23ce7c">data</a> = dd;</div>
<div class="line"><a name="l01201"></a><span class="lineno"> 1201</span>&#160;                                this-&gt;<a class="code" href="classPixelFinder.html#ac2415aa0c2048a74ec2b07da48868c57">fdata</a>-&gt;<a class="code" href="classFinderData.html#a12e06eb2ee43fdf050b3b86956cd93bd">voxel_pos</a> = voxel_pos;</div>
<div class="line"><a name="l01202"></a><span class="lineno"> 1202</span>&#160;                                this-&gt;pixel = <a class="code" href="classPixelFinder.html#a351817707623c57264a0be8a288eab51">pixel</a>;</div>
<div class="line"><a name="l01203"></a><span class="lineno"> 1203</span>&#160;                        }</div>
<div class="line"><a name="l01204"></a><span class="lineno"> 1204</span>&#160;                }</div>
<div class="line"><a name="l01205"></a><span class="lineno"> 1205</span>&#160;        }</div>
<div class="line"><a name="l01206"></a><span class="lineno"> 1206</span>&#160;</div>
<div class="line"><a name="l01207"></a><span class="lineno"> 1207</span>&#160;        <span class="keywordflow">if</span> (voxel == <span class="keyword">nullptr</span>) <span class="keywordflow">return</span>; <span class="comment">// Ignore cursors, they are not clickable.</span></div>
<div class="line"><a name="l01208"></a><span class="lineno"> 1208</span>&#160;</div>
<div class="line"><a name="l01209"></a><span class="lineno"> 1209</span>&#160;        <a class="code" href="map_8h.html#ada9f0c1420f66f999469d82ef2262280">SmallRideInstance</a> number = voxel-&gt;<a class="code" href="structVoxel.html#a78ee7c8c8e8e62d18733aed8c28cba56">GetInstance</a>();</div>
<div class="line"><a name="l01210"></a><span class="lineno"> 1210</span>&#160;        <span class="keywordflow">if</span> ((this-&gt;<a class="code" href="classPixelFinder.html#aa9f614ee6d26ac2e2d5238abab133770">allowed</a> &amp; <a class="code" href="viewport_8h.html#a7eaf31dcf3c53b721a3144bb135f8d25a6b280c8073497e12ccb912cefbcbca57">CS_RIDE</a>) != 0 &amp;&amp; number &gt;= <a class="code" href="map_8h.html#ada9f0c1420f66f999469d82ef2262280ae3bfbce4590e9566985d32b115b851d7">SRI_FULL_RIDES</a>) {</div>
<div class="line"><a name="l01211"></a><span class="lineno"> 1211</span>&#160;                <span class="comment">/* Looking for a ride? */</span></div>
<div class="line"><a name="l01212"></a><span class="lineno"> 1212</span>&#160;                <a class="code" href="structDrawData.html">DrawData</a> dd[4];</div>
<div class="line"><a name="l01213"></a><span class="lineno"> 1213</span>&#160;                <span class="keywordtype">int</span> count = <a class="code" href="viewport_8cpp.html#ab5343989a755d5a486399d48bf5b199e">DrawRide</a>(slice, voxel_pos.<a class="code" href="structXYZPoint.html#a97215f048dde4da40be2742267ab7224">z</a>, this-&gt;rect.base.x - xnorth, this-&gt;rect.base.y - ynorth,</div>
<div class="line"><a name="l01214"></a><span class="lineno"> 1214</span>&#160;                                this-&gt;orient, number, voxel-&gt;<a class="code" href="structVoxel.html#affbc45e0be9940baf856c2ea9377b182">GetInstanceData</a>(), dd, <span class="keyword">nullptr</span>);</div>
<div class="line"><a name="l01215"></a><span class="lineno"> 1215</span>&#160;                <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; count; i++) {</div>
<div class="line"><a name="l01216"></a><span class="lineno"> 1216</span>&#160;                        <span class="keywordflow">if</span> (!this-&gt;<a class="code" href="classPixelFinder.html#a22026f65fa28030f9673fbdf70ee5415">found</a> || this-&gt;<a class="code" href="classPixelFinder.html#a29c2cbacbb286eed99841b873a23ce7c">data</a> &lt; dd[i]) {</div>
<div class="line"><a name="l01217"></a><span class="lineno"> 1217</span>&#160;                                <span class="keyword">const</span> <a class="code" href="classImageData.html">ImageData</a> *img = dd[i].<a class="code" href="structDrawData.html#a353546506625aaeffb85726b311ae4ad">sprite</a>;</div>
<div class="line"><a name="l01218"></a><span class="lineno"> 1218</span>&#160;                                <a class="code" href="stdafx_8h.html#a1134b580f8da4de94ca6b1de4d37975e">uint32</a> <a class="code" href="classPixelFinder.html#a351817707623c57264a0be8a288eab51">pixel</a> = img-&gt;<a class="code" href="classImageData.html#a961b9b222bef6dd1c0f221f2d1677be4">GetPixel</a>(dd[i].base.x - img-&gt;<a class="code" href="classImageData.html#ad2b115162daf7ac09e9fe4392bbadafb">xoffset</a>, dd[i].<a class="code" href="structDrawData.html#ac48d72511e0ea716333781b67cf28204">base</a>.<a class="code" href="structPoint.html#a56c3dcea91f03182921eea9a5cf555a3">y</a> - img-&gt;<a class="code" href="classImageData.html#a47112f6751201d5d56b2fddbb640968d">yoffset</a>);</div>
<div class="line"><a name="l01219"></a><span class="lineno"> 1219</span>&#160;                                <span class="keywordflow">if</span> (<a class="code" href="palette_8h.html#a7cba9cbe653c413f3371431e9af43478">GetA</a>(pixel) != <a class="code" href="palette_8h.html#abf71a188c2d46f23ded2cac6ca526b86">TRANSPARENT</a>) {</div>
<div class="line"><a name="l01220"></a><span class="lineno"> 1220</span>&#160;                                        this-&gt;<a class="code" href="classPixelFinder.html#a22026f65fa28030f9673fbdf70ee5415">found</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01221"></a><span class="lineno"> 1221</span>&#160;                                        this-&gt;<a class="code" href="classPixelFinder.html#a29c2cbacbb286eed99841b873a23ce7c">data</a> = dd[i];</div>
<div class="line"><a name="l01222"></a><span class="lineno"> 1222</span>&#160;                                        this-&gt;<a class="code" href="classPixelFinder.html#ac2415aa0c2048a74ec2b07da48868c57">fdata</a>-&gt;<a class="code" href="classFinderData.html#a12e06eb2ee43fdf050b3b86956cd93bd">voxel_pos</a> = voxel_pos;</div>
<div class="line"><a name="l01223"></a><span class="lineno"> 1223</span>&#160;                                        this-&gt;pixel = <a class="code" href="classPixelFinder.html#a351817707623c57264a0be8a288eab51">pixel</a>;</div>
<div class="line"><a name="l01224"></a><span class="lineno"> 1224</span>&#160;                                        this-&gt;<a class="code" href="classPixelFinder.html#ac2415aa0c2048a74ec2b07da48868c57">fdata</a>-&gt;<a class="code" href="classFinderData.html#a0d828371987191a2190899192754822a">ride</a> = number;</div>
<div class="line"><a name="l01225"></a><span class="lineno"> 1225</span>&#160;                                }</div>
<div class="line"><a name="l01226"></a><span class="lineno"> 1226</span>&#160;                        }</div>
<div class="line"><a name="l01227"></a><span class="lineno"> 1227</span>&#160;                }</div>
<div class="line"><a name="l01228"></a><span class="lineno"> 1228</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((this-&gt;<a class="code" href="classPixelFinder.html#aa9f614ee6d26ac2e2d5238abab133770">allowed</a> &amp; <a class="code" href="viewport_8h.html#a7eaf31dcf3c53b721a3144bb135f8d25abcab872146b299b3b600a3d351555f08">CS_PATH</a>) != 0 &amp;&amp; <a class="code" href="map_8h.html#aea346c5b3fab893e717a4d10fd35cca6">HasValidPath</a>(voxel)) {</div>
<div class="line"><a name="l01229"></a><span class="lineno"> 1229</span>&#160;                <span class="comment">/* Looking for a path? */</span></div>
<div class="line"><a name="l01230"></a><span class="lineno"> 1230</span>&#160;                <a class="code" href="stdafx_8h.html#a05f6b0ae8f6a6e135b0e290c25fe0e4e">uint16</a> instance_data = voxel-&gt;<a class="code" href="structVoxel.html#affbc45e0be9940baf856c2ea9377b182">GetInstanceData</a>();</div>
<div class="line"><a name="l01231"></a><span class="lineno"> 1231</span>&#160;                <span class="keyword">const</span> <a class="code" href="classImageData.html">ImageData</a> *img = this-&gt;<a class="code" href="classVoxelCollector.html#a8270a2843c6824b485561e9721fa215d">sprites</a>-&gt;<a class="code" href="classSpriteStorage.html#af6d10f568074c53528182934f9392762">GetPathSprite</a>(<a class="code" href="map_8h.html#a7c69b6b7a0fc4760efb220790fb60b7b">GetPathType</a>(instance_data), <a class="code" href="map_8h.html#ad44f39a179da4e3289440f17d6cde5b3">GetImplodedPathSlope</a>(instance_data), this-&gt;<a class="code" href="classVoxelCollector.html#a95f3b9137ebbcf6851d24c27bbcece2c">orient</a>);</div>
<div class="line"><a name="l01232"></a><span class="lineno"> 1232</span>&#160;                <a class="code" href="structDrawData.html">DrawData</a> dd;</div>
<div class="line"><a name="l01233"></a><span class="lineno"> 1233</span>&#160;                dd.<a class="code" href="structDrawData.html#a2637f5d86a4291f50f19fa1d942e645a">level</a> = slice;</div>
<div class="line"><a name="l01234"></a><span class="lineno"> 1234</span>&#160;                dd.<a class="code" href="structDrawData.html#a49c4e8444e4bb48bdebdc7d947cdc7de">z_height</a> = voxel_pos.<a class="code" href="structXYZPoint.html#a97215f048dde4da40be2742267ab7224">z</a>;</div>
<div class="line"><a name="l01235"></a><span class="lineno"> 1235</span>&#160;                dd.<a class="code" href="structDrawData.html#a9ed124116c1db658f237dfdc890f4bdb">order</a> = <a class="code" href="viewport_8h.html#ad83c05db97e3590a5da165ead3d5792da81492a75f363b59bc606fc51c8d84838">SO_PATH</a>;</div>
<div class="line"><a name="l01236"></a><span class="lineno"> 1236</span>&#160;                dd.<a class="code" href="structDrawData.html#a353546506625aaeffb85726b311ae4ad">sprite</a> = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01237"></a><span class="lineno"> 1237</span>&#160;                dd.<a class="code" href="structDrawData.html#ac48d72511e0ea716333781b67cf28204">base</a>.<a class="code" href="structPoint.html#af0836c7f2eec563aa7bc20d8cfa5dd2a">x</a> = this-&gt;<a class="code" href="classVoxelCollector.html#add20fd94a174adf4898834c738b57d31">rect</a>.<a class="code" href="structRectangle.html#ab794667ffad2a46061bc417f99c031cc">base</a>.<a class="code" href="structPoint.html#af0836c7f2eec563aa7bc20d8cfa5dd2a">x</a> - xnorth;</div>
<div class="line"><a name="l01238"></a><span class="lineno"> 1238</span>&#160;                dd.<a class="code" href="structDrawData.html#ac48d72511e0ea716333781b67cf28204">base</a>.<a class="code" href="structPoint.html#a56c3dcea91f03182921eea9a5cf555a3">y</a> = this-&gt;<a class="code" href="classVoxelCollector.html#add20fd94a174adf4898834c738b57d31">rect</a>.<a class="code" href="structRectangle.html#ab794667ffad2a46061bc417f99c031cc">base</a>.<a class="code" href="structPoint.html#a56c3dcea91f03182921eea9a5cf555a3">y</a> - ynorth;</div>
<div class="line"><a name="l01239"></a><span class="lineno"> 1239</span>&#160;                dd.<a class="code" href="structDrawData.html#a60f157d7706304439f8eee934fc80019">recolour</a> = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01240"></a><span class="lineno"> 1240</span>&#160;                <span class="keywordflow">if</span> (img != <span class="keyword">nullptr</span> &amp;&amp; (!this-&gt;<a class="code" href="classPixelFinder.html#a22026f65fa28030f9673fbdf70ee5415">found</a> || this-&gt;<a class="code" href="classPixelFinder.html#a29c2cbacbb286eed99841b873a23ce7c">data</a> &lt; dd)) {</div>
<div class="line"><a name="l01241"></a><span class="lineno"> 1241</span>&#160;                        <a class="code" href="stdafx_8h.html#a1134b580f8da4de94ca6b1de4d37975e">uint32</a> <a class="code" href="classPixelFinder.html#a351817707623c57264a0be8a288eab51">pixel</a> = img-&gt;<a class="code" href="classImageData.html#a961b9b222bef6dd1c0f221f2d1677be4">GetPixel</a>(dd.<a class="code" href="structDrawData.html#ac48d72511e0ea716333781b67cf28204">base</a>.<a class="code" href="structPoint.html#af0836c7f2eec563aa7bc20d8cfa5dd2a">x</a> - img-&gt;<a class="code" href="classImageData.html#ad2b115162daf7ac09e9fe4392bbadafb">xoffset</a>, dd.<a class="code" href="structDrawData.html#ac48d72511e0ea716333781b67cf28204">base</a>.<a class="code" href="structPoint.html#a56c3dcea91f03182921eea9a5cf555a3">y</a> - img-&gt;<a class="code" href="classImageData.html#a47112f6751201d5d56b2fddbb640968d">yoffset</a>);</div>
<div class="line"><a name="l01242"></a><span class="lineno"> 1242</span>&#160;                        <span class="keywordflow">if</span> (<a class="code" href="palette_8h.html#a7cba9cbe653c413f3371431e9af43478">GetA</a>(pixel) != <a class="code" href="palette_8h.html#abf71a188c2d46f23ded2cac6ca526b86">TRANSPARENT</a>) {</div>
<div class="line"><a name="l01243"></a><span class="lineno"> 1243</span>&#160;                                this-&gt;<a class="code" href="classPixelFinder.html#a22026f65fa28030f9673fbdf70ee5415">found</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01244"></a><span class="lineno"> 1244</span>&#160;                                this-&gt;<a class="code" href="classPixelFinder.html#a29c2cbacbb286eed99841b873a23ce7c">data</a> = dd;</div>
<div class="line"><a name="l01245"></a><span class="lineno"> 1245</span>&#160;                                this-&gt;<a class="code" href="classPixelFinder.html#ac2415aa0c2048a74ec2b07da48868c57">fdata</a>-&gt;<a class="code" href="classFinderData.html#a12e06eb2ee43fdf050b3b86956cd93bd">voxel_pos</a> = voxel_pos;</div>
<div class="line"><a name="l01246"></a><span class="lineno"> 1246</span>&#160;                                this-&gt;pixel = <a class="code" href="classPixelFinder.html#a351817707623c57264a0be8a288eab51">pixel</a>;</div>
<div class="line"><a name="l01247"></a><span class="lineno"> 1247</span>&#160;                        }</div>
<div class="line"><a name="l01248"></a><span class="lineno"> 1248</span>&#160;                }</div>
<div class="line"><a name="l01249"></a><span class="lineno"> 1249</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((this-&gt;<a class="code" href="classPixelFinder.html#aa9f614ee6d26ac2e2d5238abab133770">allowed</a> &amp; <a class="code" href="viewport_8h.html#a7eaf31dcf3c53b721a3144bb135f8d25a5b37d82d058ce4aa5041817e0eced64f">CS_GROUND</a>) != 0 &amp;&amp; voxel-&gt;<a class="code" href="structVoxel.html#a39b4316f246f89cc83a490c87edd7ac6">GetGroundType</a>() != <a class="code" href="group__map__group.html#ggad15436b50732bd9ef2b6f2efa5f400edaf0ceff8e769df0430417e0704018dfc7">GTP_INVALID</a>) {</div>
<div class="line"><a name="l01250"></a><span class="lineno"> 1250</span>&#160;                <span class="comment">/* Looking for surface? */</span></div>
<div class="line"><a name="l01251"></a><span class="lineno"> 1251</span>&#160;                <span class="keyword">const</span> <a class="code" href="classImageData.html">ImageData</a> *spr = this-&gt;<a class="code" href="classVoxelCollector.html#a8270a2843c6824b485561e9721fa215d">sprites</a>-&gt;<a class="code" href="classSpriteStorage.html#ae435eacf1c908620f709e18468cc925b">GetSurfaceSprite</a>(<a class="code" href="group__map__group.html#ggad15436b50732bd9ef2b6f2efa5f400eda8bc5605f0feda73854dc3bcbb1f056e6">GTP_CURSOR_TEST</a>, voxel-&gt;<a class="code" href="structVoxel.html#adf0e5dcd80753791808eca30dc90879a">GetGroundSlope</a>(), this-&gt;<a class="code" href="classVoxelCollector.html#a95f3b9137ebbcf6851d24c27bbcece2c">orient</a>);</div>
<div class="line"><a name="l01252"></a><span class="lineno"> 1252</span>&#160;                <a class="code" href="structDrawData.html">DrawData</a> dd;</div>
<div class="line"><a name="l01253"></a><span class="lineno"> 1253</span>&#160;                dd.<a class="code" href="structDrawData.html#a2637f5d86a4291f50f19fa1d942e645a">level</a> = slice;</div>
<div class="line"><a name="l01254"></a><span class="lineno"> 1254</span>&#160;                dd.<a class="code" href="structDrawData.html#a49c4e8444e4bb48bdebdc7d947cdc7de">z_height</a> = voxel_pos.<a class="code" href="structXYZPoint.html#a97215f048dde4da40be2742267ab7224">z</a>;</div>
<div class="line"><a name="l01255"></a><span class="lineno"> 1255</span>&#160;                dd.<a class="code" href="structDrawData.html#a9ed124116c1db658f237dfdc890f4bdb">order</a> = <a class="code" href="viewport_8h.html#ad83c05db97e3590a5da165ead3d5792dab1736d60c068f615aa53700447e65121">SO_GROUND</a>;</div>
<div class="line"><a name="l01256"></a><span class="lineno"> 1256</span>&#160;                dd.<a class="code" href="structDrawData.html#a353546506625aaeffb85726b311ae4ad">sprite</a> = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01257"></a><span class="lineno"> 1257</span>&#160;                dd.<a class="code" href="structDrawData.html#ac48d72511e0ea716333781b67cf28204">base</a>.<a class="code" href="structPoint.html#af0836c7f2eec563aa7bc20d8cfa5dd2a">x</a> = this-&gt;<a class="code" href="classVoxelCollector.html#add20fd94a174adf4898834c738b57d31">rect</a>.<a class="code" href="structRectangle.html#ab794667ffad2a46061bc417f99c031cc">base</a>.<a class="code" href="structPoint.html#af0836c7f2eec563aa7bc20d8cfa5dd2a">x</a> - xnorth;</div>
<div class="line"><a name="l01258"></a><span class="lineno"> 1258</span>&#160;                dd.<a class="code" href="structDrawData.html#ac48d72511e0ea716333781b67cf28204">base</a>.<a class="code" href="structPoint.html#a56c3dcea91f03182921eea9a5cf555a3">y</a> = this-&gt;<a class="code" href="classVoxelCollector.html#add20fd94a174adf4898834c738b57d31">rect</a>.<a class="code" href="structRectangle.html#ab794667ffad2a46061bc417f99c031cc">base</a>.<a class="code" href="structPoint.html#a56c3dcea91f03182921eea9a5cf555a3">y</a> - ynorth;</div>
<div class="line"><a name="l01259"></a><span class="lineno"> 1259</span>&#160;                dd.<a class="code" href="structDrawData.html#a60f157d7706304439f8eee934fc80019">recolour</a> = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01260"></a><span class="lineno"> 1260</span>&#160;                <span class="keywordflow">if</span> (spr != <span class="keyword">nullptr</span> &amp;&amp; (!this-&gt;<a class="code" href="classPixelFinder.html#a22026f65fa28030f9673fbdf70ee5415">found</a> || this-&gt;<a class="code" href="classPixelFinder.html#a29c2cbacbb286eed99841b873a23ce7c">data</a> &lt; dd)) {</div>
<div class="line"><a name="l01261"></a><span class="lineno"> 1261</span>&#160;                        <a class="code" href="stdafx_8h.html#a1134b580f8da4de94ca6b1de4d37975e">uint32</a> <a class="code" href="classPixelFinder.html#a351817707623c57264a0be8a288eab51">pixel</a> = spr-&gt;<a class="code" href="classImageData.html#a961b9b222bef6dd1c0f221f2d1677be4">GetPixel</a>(dd.<a class="code" href="structDrawData.html#ac48d72511e0ea716333781b67cf28204">base</a>.<a class="code" href="structPoint.html#af0836c7f2eec563aa7bc20d8cfa5dd2a">x</a> - spr-&gt;<a class="code" href="classImageData.html#ad2b115162daf7ac09e9fe4392bbadafb">xoffset</a>, dd.<a class="code" href="structDrawData.html#ac48d72511e0ea716333781b67cf28204">base</a>.<a class="code" href="structPoint.html#a56c3dcea91f03182921eea9a5cf555a3">y</a> - spr-&gt;<a class="code" href="classImageData.html#a47112f6751201d5d56b2fddbb640968d">yoffset</a>);</div>
<div class="line"><a name="l01262"></a><span class="lineno"> 1262</span>&#160;                        <span class="keywordflow">if</span> (<a class="code" href="palette_8h.html#a7cba9cbe653c413f3371431e9af43478">GetA</a>(pixel) != <a class="code" href="palette_8h.html#abf71a188c2d46f23ded2cac6ca526b86">TRANSPARENT</a>) {</div>
<div class="line"><a name="l01263"></a><span class="lineno"> 1263</span>&#160;                                this-&gt;<a class="code" href="classPixelFinder.html#a22026f65fa28030f9673fbdf70ee5415">found</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01264"></a><span class="lineno"> 1264</span>&#160;                                this-&gt;<a class="code" href="classPixelFinder.html#a29c2cbacbb286eed99841b873a23ce7c">data</a> = dd;</div>
<div class="line"><a name="l01265"></a><span class="lineno"> 1265</span>&#160;                                this-&gt;<a class="code" href="classPixelFinder.html#ac2415aa0c2048a74ec2b07da48868c57">fdata</a>-&gt;<a class="code" href="classFinderData.html#a12e06eb2ee43fdf050b3b86956cd93bd">voxel_pos</a> = voxel_pos;</div>
<div class="line"><a name="l01266"></a><span class="lineno"> 1266</span>&#160;                                this-&gt;pixel = <a class="code" href="classPixelFinder.html#a351817707623c57264a0be8a288eab51">pixel</a>;</div>
<div class="line"><a name="l01267"></a><span class="lineno"> 1267</span>&#160;                        }</div>
<div class="line"><a name="l01268"></a><span class="lineno"> 1268</span>&#160;                }</div>
<div class="line"><a name="l01269"></a><span class="lineno"> 1269</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((this-&gt;<a class="code" href="classPixelFinder.html#aa9f614ee6d26ac2e2d5238abab133770">allowed</a> &amp; <a class="code" href="viewport_8h.html#a7eaf31dcf3c53b721a3144bb135f8d25a59ce66633650f8a1b7e56a3ca2e82cb3">CS_PERSON</a>) != 0) {</div>
<div class="line"><a name="l01270"></a><span class="lineno"> 1270</span>&#160;                <span class="comment">/* Looking for persons? */</span></div>
<div class="line"><a name="l01271"></a><span class="lineno"> 1271</span>&#160;                <span class="keyword">const</span> <a class="code" href="classVoxelObject.html">VoxelObject</a> *vo = voxel-&gt;<a class="code" href="structVoxel.html#acd06c81b4b17faa125e1403d5b1a357d">voxel_objects</a>;</div>
<div class="line"><a name="l01272"></a><span class="lineno"> 1272</span>&#160;                <span class="keywordflow">while</span> (vo != <span class="keyword">nullptr</span>) {</div>
<div class="line"><a name="l01273"></a><span class="lineno"> 1273</span>&#160;                        <span class="keyword">const</span> <a class="code" href="classPerson.html">Person</a> *pers = <span class="keyword">static_cast&lt;</span><span class="keyword">const </span><a class="code" href="classPerson.html">Person</a> *<span class="keyword">&gt;</span>(vo);</div>
<div class="line"><a name="l01274"></a><span class="lineno"> 1274</span>&#160;                        assert(pers != <span class="keyword">nullptr</span> &amp;&amp; pers-&gt;<a class="code" href="classPerson.html#a463a7452b5a64f66d7589bb3e45236bb">walk</a> != <span class="keyword">nullptr</span>);</div>
<div class="line"><a name="l01275"></a><span class="lineno"> 1275</span>&#160;                        <a class="code" href="sprite__store_8h.html#affb455e5ea72d01e065758c70f810a95">AnimationType</a> anim_type = pers-&gt;<a class="code" href="classPerson.html#a463a7452b5a64f66d7589bb3e45236bb">walk</a>-&gt;<a class="code" href="structWalkInformation.html#a383c042ee2e1cf475034c8f0854e68d1">anim_type</a>;</div>
<div class="line"><a name="l01276"></a><span class="lineno"> 1276</span>&#160;                        <span class="keyword">const</span> <a class="code" href="classImageData.html">ImageData</a> *anim_spr = this-&gt;<a class="code" href="classVoxelCollector.html#a8270a2843c6824b485561e9721fa215d">sprites</a>-&gt;<a class="code" href="classSpriteStorage.html#a61ff0ce89464b6f4d8777d5b8e7bb27f">GetAnimationSprite</a>(anim_type, pers-&gt;<a class="code" href="classPerson.html#ac615e9c13bb30a7f42f37eeb515275b4">frame_index</a>, pers-&gt;<a class="code" href="classPerson.html#a05c0fce495dd0851d81b8bff159d3691">type</a>, this-&gt;orient);</div>
<div class="line"><a name="l01277"></a><span class="lineno"> 1277</span>&#160;                        <span class="keywordtype">int</span> x_off = <a class="code" href="classVoxelCollector.html#a888574dccee18b193ec92b4a6d732250">ComputeX</a>(pers-&gt;<a class="code" href="classVoxelObject.html#ab12d97f145e1b434c7cfe15db46f31cb">pix_pos</a>.<a class="code" href="structXYZPoint.html#a77a7984ac0a26ecb76acb94bbcf96a48">x</a>, pers-&gt;<a class="code" href="classVoxelObject.html#ab12d97f145e1b434c7cfe15db46f31cb">pix_pos</a>.<a class="code" href="structXYZPoint.html#aea2c3552caee6e81c3b007ff78834b99">y</a>);</div>
<div class="line"><a name="l01278"></a><span class="lineno"> 1278</span>&#160;                        <span class="keywordtype">int</span> y_off = <a class="code" href="classVoxelCollector.html#a5e598f88e6d585180f9fc94964202167">ComputeY</a>(pers-&gt;<a class="code" href="classVoxelObject.html#ab12d97f145e1b434c7cfe15db46f31cb">pix_pos</a>.<a class="code" href="structXYZPoint.html#a77a7984ac0a26ecb76acb94bbcf96a48">x</a>, pers-&gt;<a class="code" href="classVoxelObject.html#ab12d97f145e1b434c7cfe15db46f31cb">pix_pos</a>.<a class="code" href="structXYZPoint.html#aea2c3552caee6e81c3b007ff78834b99">y</a>, pers-&gt;<a class="code" href="classVoxelObject.html#ab12d97f145e1b434c7cfe15db46f31cb">pix_pos</a>.<a class="code" href="structXYZPoint.html#a97215f048dde4da40be2742267ab7224">z</a>);</div>
<div class="line"><a name="l01279"></a><span class="lineno"> 1279</span>&#160;                        <a class="code" href="structDrawData.html">DrawData</a> dd;</div>
<div class="line"><a name="l01280"></a><span class="lineno"> 1280</span>&#160;                        dd.<a class="code" href="structDrawData.html#a2637f5d86a4291f50f19fa1d942e645a">level</a> = slice;</div>
<div class="line"><a name="l01281"></a><span class="lineno"> 1281</span>&#160;                        dd.<a class="code" href="structDrawData.html#a49c4e8444e4bb48bdebdc7d947cdc7de">z_height</a> = voxel_pos.<a class="code" href="structXYZPoint.html#a97215f048dde4da40be2742267ab7224">z</a>;</div>
<div class="line"><a name="l01282"></a><span class="lineno"> 1282</span>&#160;                        dd.<a class="code" href="structDrawData.html#a9ed124116c1db658f237dfdc890f4bdb">order</a> = <a class="code" href="viewport_8h.html#ad83c05db97e3590a5da165ead3d5792dac65ce884e2c15177c2b03526cd3f5d99">SO_PERSON</a>;</div>
<div class="line"><a name="l01283"></a><span class="lineno"> 1283</span>&#160;                        dd.<a class="code" href="structDrawData.html#a353546506625aaeffb85726b311ae4ad">sprite</a> = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01284"></a><span class="lineno"> 1284</span>&#160;                        dd.<a class="code" href="structDrawData.html#ac48d72511e0ea716333781b67cf28204">base</a>.<a class="code" href="structPoint.html#af0836c7f2eec563aa7bc20d8cfa5dd2a">x</a> = this-&gt;<a class="code" href="classVoxelCollector.html#add20fd94a174adf4898834c738b57d31">rect</a>.<a class="code" href="structRectangle.html#ab794667ffad2a46061bc417f99c031cc">base</a>.<a class="code" href="structPoint.html#af0836c7f2eec563aa7bc20d8cfa5dd2a">x</a> - xnorth - x_off;</div>
<div class="line"><a name="l01285"></a><span class="lineno"> 1285</span>&#160;                        dd.<a class="code" href="structDrawData.html#ac48d72511e0ea716333781b67cf28204">base</a>.<a class="code" href="structPoint.html#a56c3dcea91f03182921eea9a5cf555a3">y</a> = this-&gt;<a class="code" href="classVoxelCollector.html#add20fd94a174adf4898834c738b57d31">rect</a>.<a class="code" href="structRectangle.html#ab794667ffad2a46061bc417f99c031cc">base</a>.<a class="code" href="structPoint.html#a56c3dcea91f03182921eea9a5cf555a3">y</a> - ynorth - y_off;</div>
<div class="line"><a name="l01286"></a><span class="lineno"> 1286</span>&#160;                        dd.<a class="code" href="structDrawData.html#a60f157d7706304439f8eee934fc80019">recolour</a> = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01287"></a><span class="lineno"> 1287</span>&#160;                        <span class="keywordflow">if</span> (anim_spr &amp;&amp; (!this-&gt;<a class="code" href="classPixelFinder.html#a22026f65fa28030f9673fbdf70ee5415">found</a> || this-&gt;<a class="code" href="classPixelFinder.html#a29c2cbacbb286eed99841b873a23ce7c">data</a> &lt; dd)) {</div>
<div class="line"><a name="l01288"></a><span class="lineno"> 1288</span>&#160;                                <a class="code" href="stdafx_8h.html#a1134b580f8da4de94ca6b1de4d37975e">uint32</a> <a class="code" href="classPixelFinder.html#a351817707623c57264a0be8a288eab51">pixel</a> = anim_spr-&gt;<a class="code" href="classImageData.html#a961b9b222bef6dd1c0f221f2d1677be4">GetPixel</a>(dd.<a class="code" href="structDrawData.html#ac48d72511e0ea716333781b67cf28204">base</a>.<a class="code" href="structPoint.html#af0836c7f2eec563aa7bc20d8cfa5dd2a">x</a> - anim_spr-&gt;<a class="code" href="classImageData.html#ad2b115162daf7ac09e9fe4392bbadafb">xoffset</a>, dd.<a class="code" href="structDrawData.html#ac48d72511e0ea716333781b67cf28204">base</a>.<a class="code" href="structPoint.html#a56c3dcea91f03182921eea9a5cf555a3">y</a> - anim_spr-&gt;<a class="code" href="classImageData.html#a47112f6751201d5d56b2fddbb640968d">yoffset</a>);</div>
<div class="line"><a name="l01289"></a><span class="lineno"> 1289</span>&#160;                                <span class="keywordflow">if</span> (<a class="code" href="palette_8h.html#a7cba9cbe653c413f3371431e9af43478">GetA</a>(pixel) != <a class="code" href="palette_8h.html#abf71a188c2d46f23ded2cac6ca526b86">TRANSPARENT</a>) {</div>
<div class="line"><a name="l01290"></a><span class="lineno"> 1290</span>&#160;                                        this-&gt;<a class="code" href="classPixelFinder.html#a22026f65fa28030f9673fbdf70ee5415">found</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01291"></a><span class="lineno"> 1291</span>&#160;                                        this-&gt;<a class="code" href="classPixelFinder.html#a29c2cbacbb286eed99841b873a23ce7c">data</a> = dd;</div>
<div class="line"><a name="l01292"></a><span class="lineno"> 1292</span>&#160;                                        this-&gt;<a class="code" href="classPixelFinder.html#ac2415aa0c2048a74ec2b07da48868c57">fdata</a>-&gt;<a class="code" href="classFinderData.html#a12e06eb2ee43fdf050b3b86956cd93bd">voxel_pos</a> = voxel_pos;</div>
<div class="line"><a name="l01293"></a><span class="lineno"> 1293</span>&#160;                                        this-&gt;pixel = <a class="code" href="classPixelFinder.html#a351817707623c57264a0be8a288eab51">pixel</a>;</div>
<div class="line"><a name="l01294"></a><span class="lineno"> 1294</span>&#160;                                        this-&gt;<a class="code" href="classPixelFinder.html#ac2415aa0c2048a74ec2b07da48868c57">fdata</a>-&gt;<a class="code" href="classFinderData.html#ac97548057108cffaeada475e1d02d6d5">person</a> = pers;</div>
<div class="line"><a name="l01295"></a><span class="lineno"> 1295</span>&#160;                                }</div>
<div class="line"><a name="l01296"></a><span class="lineno"> 1296</span>&#160;                        }</div>
<div class="line"><a name="l01297"></a><span class="lineno"> 1297</span>&#160;                        vo = vo-&gt;<a class="code" href="classVoxelObject.html#a4f033bfae34c4b46acaf1f9f2c7ec404">next_object</a>;</div>
<div class="line"><a name="l01298"></a><span class="lineno"> 1298</span>&#160;                }</div>
<div class="line"><a name="l01299"></a><span class="lineno"> 1299</span>&#160;        }</div>
<div class="line"><a name="l01300"></a><span class="lineno"> 1300</span>&#160;}</div>
<div class="line"><a name="l01301"></a><span class="lineno"> 1301</span>&#160;</div>
<div class="line"><a name="l01306"></a><span class="lineno"><a class="line" href="classViewport.html#a505db1334014f270149f7f07b64139e0"> 1306</a></span>&#160;<a class="code" href="classViewport.html#a505db1334014f270149f7f07b64139e0">Viewport::Viewport</a>(<span class="keyword">const</span> <a class="code" href="structXYZPoint.html">XYZPoint32</a> &amp;view_pos) : <a class="code" href="classWindow.html">Window</a>(<a class="code" href="group__window__group.html#gga58ad3159a8b1f24a1d3497efcd541b69afa9ace0097b96bd3c88e03c5c743684f">WC_MAINDISPLAY</a>, <a class="code" href="window_8h.html#ada744cd8f44581ff7ac7f7eda514779a">ALL_WINDOWS_OF_TYPE</a>), tile_cursor(this), arrow_cursor(this), area_cursor(this), edge_cursor(this)</div>
<div class="line"><a name="l01307"></a><span class="lineno"> 1307</span>&#160;{</div>
<div class="line"><a name="l01308"></a><span class="lineno"> 1308</span>&#160;        this-&gt;view_pos = <a class="code" href="classViewport.html#a5a238302d2aaeccf11d004c66637bfd7">view_pos</a>;</div>
<div class="line"><a name="l01309"></a><span class="lineno"> 1309</span>&#160;        this-&gt;<a class="code" href="classViewport.html#a4cf69d0f86ba6b3fd59e733628c87bc4">tile_width</a>  = 64;</div>
<div class="line"><a name="l01310"></a><span class="lineno"> 1310</span>&#160;        this-&gt;<a class="code" href="classViewport.html#a87164c2051ecd5d9382045a785f5a009">tile_height</a> = 16;</div>
<div class="line"><a name="l01311"></a><span class="lineno"> 1311</span>&#160;        this-&gt;<a class="code" href="classViewport.html#adeeab711682948cdfa386bca98734f25">orientation</a> = <a class="code" href="group__map__group.html#ggabad48584a1852521ff578b647f07fdd3a555bd255b7d0fb03bd8e272ee595b49b">VOR_NORTH</a>;</div>
<div class="line"><a name="l01312"></a><span class="lineno"> 1312</span>&#160;</div>
<div class="line"><a name="l01313"></a><span class="lineno"> 1313</span>&#160;        _mouse_modes.<a class="code" href="classMouseModes.html#a16db84eb6ab33fd242373b7f1f6c45e6">main_display</a> = <span class="keyword">this</span>;</div>
<div class="line"><a name="l01314"></a><span class="lineno"> 1314</span>&#160;</div>
<div class="line"><a name="l01315"></a><span class="lineno"> 1315</span>&#160;        this-&gt;<a class="code" href="classViewport.html#a18b4fb0ad0bcbee66ee2658498bdcc5a">mouse_pos</a>.<a class="code" href="structPoint.html#af0836c7f2eec563aa7bc20d8cfa5dd2a">x</a> = 0;</div>
<div class="line"><a name="l01316"></a><span class="lineno"> 1316</span>&#160;        this-&gt;<a class="code" href="classViewport.html#a18b4fb0ad0bcbee66ee2658498bdcc5a">mouse_pos</a>.<a class="code" href="structPoint.html#a56c3dcea91f03182921eea9a5cf555a3">y</a> = 0;</div>
<div class="line"><a name="l01317"></a><span class="lineno"> 1317</span>&#160;        this-&gt;<a class="code" href="classViewport.html#a6bd1183c6460d8561206839907d9f05f">additions_enabled</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01318"></a><span class="lineno"> 1318</span>&#160;        this-&gt;<a class="code" href="classViewport.html#ab7074c86c413aeb1f663521b61e2279a">additions_displayed</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01319"></a><span class="lineno"> 1319</span>&#160;        this-&gt;<a class="code" href="classViewport.html#a31d04253bf19b343e6bdce35847a5526">underground_mode</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01320"></a><span class="lineno"> 1320</span>&#160;</div>
<div class="line"><a name="l01321"></a><span class="lineno"> 1321</span>&#160;        <a class="code" href="stdafx_8h.html#a05f6b0ae8f6a6e135b0e290c25fe0e4e">uint16</a> width  = <a class="code" href="video_8cpp.html#a232b6e7cb0a75c12228a8aa17d75fd18">_video</a>.<a class="code" href="classVideoSystem.html#a76811e1c7bfdbf64eaa1da90a812a7ca">GetXSize</a>();</div>
<div class="line"><a name="l01322"></a><span class="lineno"> 1322</span>&#160;        <a class="code" href="stdafx_8h.html#a05f6b0ae8f6a6e135b0e290c25fe0e4e">uint16</a> height = <a class="code" href="video_8cpp.html#a232b6e7cb0a75c12228a8aa17d75fd18">_video</a>.<a class="code" href="classVideoSystem.html#a16e90a3e4cd3100a02dc37e928224363">GetYSize</a>();</div>
<div class="line"><a name="l01323"></a><span class="lineno"> 1323</span>&#160;        assert(width &gt;= 120 &amp;&amp; height &gt;= 120); <span class="comment">// Arbitrary lower limit as sanity check.</span></div>
<div class="line"><a name="l01324"></a><span class="lineno"> 1324</span>&#160;</div>
<div class="line"><a name="l01325"></a><span class="lineno"> 1325</span>&#160;        this-&gt;<a class="code" href="classWindow.html#ab35bc7185cdb4e3ccd144e3b37f3224d">SetSize</a>(width, height);</div>
<div class="line"><a name="l01326"></a><span class="lineno"> 1326</span>&#160;        this-&gt;<a class="code" href="classWindow.html#a2e6641f14a62a9b2a4853e10e0ffe5fb">SetPosition</a>(0, 0);</div>
<div class="line"><a name="l01327"></a><span class="lineno"> 1327</span>&#160;}</div>
<div class="line"><a name="l01328"></a><span class="lineno"> 1328</span>&#160;</div>
<div class="line"><a name="l01329"></a><span class="lineno"> 1329</span>&#160;Viewport::~Viewport()</div>
<div class="line"><a name="l01330"></a><span class="lineno"> 1330</span>&#160;{</div>
<div class="line"><a name="l01331"></a><span class="lineno"> 1331</span>&#160;        _mouse_modes.<a class="code" href="classMouseModes.html#a16db84eb6ab33fd242373b7f1f6c45e6">main_display</a> = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01332"></a><span class="lineno"> 1332</span>&#160;}</div>
<div class="line"><a name="l01333"></a><span class="lineno"> 1333</span>&#160;</div>
<div class="line"><a name="l01338"></a><span class="lineno"><a class="line" href="classViewport.html#a1e0a1af618c67fcef5d46e809bfcfe01"> 1338</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classViewport.html#a1e0a1af618c67fcef5d46e809bfcfe01">Viewport::IsUndergroundModeAvailable</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l01339"></a><span class="lineno"> 1339</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l01340"></a><span class="lineno"> 1340</span>&#160;        <span class="keyword">const</span> <a class="code" href="classSpriteStorage.html">SpriteStorage</a> *storage = <a class="code" href="sprite__store_8cpp.html#aceecbbda4fed58053329eced561b20fa">_sprite_manager</a>.<a class="code" href="classSpriteManager.html#a4a506110aec7cecde2e27c476f09b489">GetSprites</a>(this-&gt;<a class="code" href="classViewport.html#a4cf69d0f86ba6b3fd59e733628c87bc4">tile_width</a>);</div>
<div class="line"><a name="l01341"></a><span class="lineno"> 1341</span>&#160;        <span class="keywordflow">return</span> storage-&gt;<a class="code" href="classSpriteStorage.html#ac1ead8c0b31f92a5da7f12fa973bc225">surface</a>[<a class="code" href="group__map__group.html#ggad15436b50732bd9ef2b6f2efa5f400eda1ea6e1b32b16c9d9129f20da3c314a8b">GTP_UNDERGROUND</a>].<a class="code" href="classSurfaceData.html#aba304ba16029243e52e8ee14c3c00715">HasAllSprites</a>();</div>
<div class="line"><a name="l01342"></a><span class="lineno"> 1342</span>&#160;}</div>
<div class="line"><a name="l01343"></a><span class="lineno"> 1343</span>&#160;</div>
<div class="line"><a name="l01345"></a><span class="lineno"><a class="line" href="classViewport.html#a5a9bacb50913e2d5ecc22027b6096cbd"> 1345</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classViewport.html#a5a9bacb50913e2d5ecc22027b6096cbd">Viewport::SetUndergroundMode</a>()</div>
<div class="line"><a name="l01346"></a><span class="lineno"> 1346</span>&#160;{</div>
<div class="line"><a name="l01347"></a><span class="lineno"> 1347</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="classViewport.html#a1e0a1af618c67fcef5d46e809bfcfe01">IsUndergroundModeAvailable</a>()) <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01348"></a><span class="lineno"> 1348</span>&#160;        this-&gt;<a class="code" href="classViewport.html#a31d04253bf19b343e6bdce35847a5526">underground_mode</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01349"></a><span class="lineno"> 1349</span>&#160;        this-&gt;<a class="code" href="classWindow.html#a52b7f858345bf4ce8902e144e8076522">MarkDirty</a>();</div>
<div class="line"><a name="l01350"></a><span class="lineno"> 1350</span>&#160;}</div>
<div class="line"><a name="l01351"></a><span class="lineno"> 1351</span>&#160;</div>
<div class="line"><a name="l01353"></a><span class="lineno"><a class="line" href="classViewport.html#a4633a976ae1cf9d873162ddf29c64cf5"> 1353</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classViewport.html#a4633a976ae1cf9d873162ddf29c64cf5">Viewport::ToggleUndergroundMode</a>()</div>
<div class="line"><a name="l01354"></a><span class="lineno"> 1354</span>&#160;{</div>
<div class="line"><a name="l01355"></a><span class="lineno"> 1355</span>&#160;        <span class="keywordflow">if</span> (this-&gt;<a class="code" href="classViewport.html#a31d04253bf19b343e6bdce35847a5526">underground_mode</a>) {</div>
<div class="line"><a name="l01356"></a><span class="lineno"> 1356</span>&#160;                this-&gt;<a class="code" href="classViewport.html#a31d04253bf19b343e6bdce35847a5526">underground_mode</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01357"></a><span class="lineno"> 1357</span>&#160;                this-&gt;<a class="code" href="classWindow.html#a52b7f858345bf4ce8902e144e8076522">MarkDirty</a>();</div>
<div class="line"><a name="l01358"></a><span class="lineno"> 1358</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01359"></a><span class="lineno"> 1359</span>&#160;                this-&gt;<a class="code" href="classViewport.html#a5a9bacb50913e2d5ecc22027b6096cbd">SetUndergroundMode</a>();</div>
<div class="line"><a name="l01360"></a><span class="lineno"> 1360</span>&#160;        }</div>
<div class="line"><a name="l01361"></a><span class="lineno"> 1361</span>&#160;}</div>
<div class="line"><a name="l01362"></a><span class="lineno"> 1362</span>&#160;</div>
<div class="line"><a name="l01369"></a><span class="lineno"><a class="line" href="classViewport.html#a8a0e45b531578052b03d8435f0f3df5c"> 1369</a></span>&#160;<a class="code" href="stdafx_8h.html#a43d43196463bde49cb067f5c20ab8481">int32</a> <a class="code" href="classViewport.html#a8a0e45b531578052b03d8435f0f3df5c">Viewport::ComputeX</a>(<a class="code" href="stdafx_8h.html#a43d43196463bde49cb067f5c20ab8481">int32</a> xpos, <a class="code" href="stdafx_8h.html#a43d43196463bde49cb067f5c20ab8481">int32</a> ypos)</div>
<div class="line"><a name="l01370"></a><span class="lineno"> 1370</span>&#160;{</div>
<div class="line"><a name="l01371"></a><span class="lineno"> 1371</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="viewport_8cpp.html#adc21e3bb272d935ad38dd52bd0c03974">ComputeXFunction</a>(xpos, ypos, this-&gt;<a class="code" href="classViewport.html#adeeab711682948cdfa386bca98734f25">orientation</a>, this-&gt;<a class="code" href="classViewport.html#a4cf69d0f86ba6b3fd59e733628c87bc4">tile_width</a>);</div>
<div class="line"><a name="l01372"></a><span class="lineno"> 1372</span>&#160;}</div>
<div class="line"><a name="l01373"></a><span class="lineno"> 1373</span>&#160;</div>
<div class="line"><a name="l01381"></a><span class="lineno"><a class="line" href="classViewport.html#a9ffc3b53f8f141f7a54c7f5aeab5a566"> 1381</a></span>&#160;<a class="code" href="stdafx_8h.html#a43d43196463bde49cb067f5c20ab8481">int32</a> <a class="code" href="classViewport.html#a9ffc3b53f8f141f7a54c7f5aeab5a566">Viewport::ComputeY</a>(<a class="code" href="stdafx_8h.html#a43d43196463bde49cb067f5c20ab8481">int32</a> xpos, <a class="code" href="stdafx_8h.html#a43d43196463bde49cb067f5c20ab8481">int32</a> ypos, <a class="code" href="stdafx_8h.html#a43d43196463bde49cb067f5c20ab8481">int32</a> zpos)</div>
<div class="line"><a name="l01382"></a><span class="lineno"> 1382</span>&#160;{</div>
<div class="line"><a name="l01383"></a><span class="lineno"> 1383</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="viewport_8cpp.html#a05568a347fb205b4a83b7c4b02ec518d">ComputeYFunction</a>(xpos, ypos, zpos, this-&gt;<a class="code" href="classViewport.html#adeeab711682948cdfa386bca98734f25">orientation</a>, this-&gt;<a class="code" href="classViewport.html#a4cf69d0f86ba6b3fd59e733628c87bc4">tile_width</a>, this-&gt;<a class="code" href="classViewport.html#a87164c2051ecd5d9382045a785f5a009">tile_height</a>);</div>
<div class="line"><a name="l01384"></a><span class="lineno"> 1384</span>&#160;}</div>
<div class="line"><a name="l01385"></a><span class="lineno"> 1385</span>&#160;</div>
<div class="line"><a name="l01386"></a><span class="lineno"><a class="line" href="classViewport.html#abf30438687247733d94674d5e174c206"> 1386</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classViewport.html#abf30438687247733d94674d5e174c206">Viewport::OnDraw</a>()</div>
<div class="line"><a name="l01387"></a><span class="lineno"> 1387</span>&#160;{</div>
<div class="line"><a name="l01388"></a><span class="lineno"> 1388</span>&#160;        <a class="code" href="classSpriteCollector.html">SpriteCollector</a> collector(<span class="keyword">this</span>, _mouse_modes.<a class="code" href="classMouseModes.html#ac5978eebc85e35aad57b87d123375c7a">current</a>-&gt;<a class="code" href="classMouseMode.html#ad6a36d0faeab665730130ed0d7795b27">EnableCursors</a>());</div>
<div class="line"><a name="l01389"></a><span class="lineno"> 1389</span>&#160;        collector.<a class="code" href="classVoxelCollector.html#a4a9d577a8b54caf8acb14a7fadda1c61">SetWindowSize</a>(-(<a class="code" href="stdafx_8h.html#a259fa4834387bd68627ddf37bb3ebdb9">int16</a>)this-&gt;<a class="code" href="classWindow.html#a28e5baa158219bb8485764c99239d211">rect</a>.<a class="code" href="structRectangle.html#a82ad3c804a2bdb269926f29a2574c22b">width</a> / 2, -(<a class="code" href="stdafx_8h.html#a259fa4834387bd68627ddf37bb3ebdb9">int16</a>)this-&gt;rect.height / 2, this-&gt;rect.width, this-&gt;rect.height);</div>
<div class="line"><a name="l01390"></a><span class="lineno"> 1390</span>&#160;        collector.Collect(this-&gt;<a class="code" href="classViewport.html#a6bd1183c6460d8561206839907d9f05f">additions_enabled</a> &amp;&amp; this-&gt;<a class="code" href="classViewport.html#ab7074c86c413aeb1f663521b61e2279a">additions_displayed</a>);</div>
<div class="line"><a name="l01391"></a><span class="lineno"> 1391</span>&#160;        <span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classRecolouring.html">Recolouring</a> recolour;</div>
<div class="line"><a name="l01392"></a><span class="lineno"> 1392</span>&#160;</div>
<div class="line"><a name="l01393"></a><span class="lineno"> 1393</span>&#160;        <a class="code" href="video_8cpp.html#a232b6e7cb0a75c12228a8aa17d75fd18">_video</a>.<a class="code" href="classVideoSystem.html#a09358c104a7c283a51e5474a8ea80feb">FillRectangle</a>(this-&gt;<a class="code" href="classWindow.html#a28e5baa158219bb8485764c99239d211">rect</a>, <a class="code" href="palette_8h.html#a17856d397bca4be306f035b47f5abe56">MakeRGBA</a>(0, 0, 0, <a class="code" href="palette_8h.html#a8807ff43e9480e8baea8ec2fcbd6f010">OPAQUE</a>)); <span class="comment">// Black background.</span></div>
<div class="line"><a name="l01394"></a><span class="lineno"> 1394</span>&#160;</div>
<div class="line"><a name="l01395"></a><span class="lineno"> 1395</span>&#160;        <a class="code" href="classClippedRectangle.html">ClippedRectangle</a> cr = <a class="code" href="video_8cpp.html#a232b6e7cb0a75c12228a8aa17d75fd18">_video</a>.<a class="code" href="classVideoSystem.html#a86bb12336a2a4cc8130ead2befce579d">GetClippedRectangle</a>();</div>
<div class="line"><a name="l01396"></a><span class="lineno"> 1396</span>&#160;        assert(this-&gt;<a class="code" href="classWindow.html#a28e5baa158219bb8485764c99239d211">rect</a>.<a class="code" href="structRectangle.html#ab794667ffad2a46061bc417f99c031cc">base</a>.<a class="code" href="structPoint.html#af0836c7f2eec563aa7bc20d8cfa5dd2a">x</a> &gt;= 0 &amp;&amp; this-&gt;rect.base.y &gt;= 0);</div>
<div class="line"><a name="l01397"></a><span class="lineno"> 1397</span>&#160;        <a class="code" href="classClippedRectangle.html">ClippedRectangle</a> draw_rect(cr, this-&gt;<a class="code" href="classWindow.html#a28e5baa158219bb8485764c99239d211">rect</a>.<a class="code" href="structRectangle.html#ab794667ffad2a46061bc417f99c031cc">base</a>.<a class="code" href="structPoint.html#af0836c7f2eec563aa7bc20d8cfa5dd2a">x</a>, this-&gt;rect.base.y, this-&gt;rect.width, this-&gt;rect.height);</div>
<div class="line"><a name="l01398"></a><span class="lineno"> 1398</span>&#160;        <a class="code" href="video_8cpp.html#a232b6e7cb0a75c12228a8aa17d75fd18">_video</a>.<a class="code" href="classVideoSystem.html#afe5066abb188fe0db4f2f5dced6a5435">SetClippedRectangle</a>(draw_rect);</div>
<div class="line"><a name="l01399"></a><span class="lineno"> 1399</span>&#160;</div>
<div class="line"><a name="l01400"></a><span class="lineno"> 1400</span>&#160;        <a class="code" href="palette_8h.html#a7bb9fa2a7a1b4386b2f16dca8d47223f">GradientShift</a> gs = <span class="keyword">static_cast&lt;</span><a class="code" href="palette_8h.html#a7bb9fa2a7a1b4386b2f16dca8d47223f">GradientShift</a><span class="keyword">&gt;</span>(<a class="code" href="palette_8h.html#a7bb9fa2a7a1b4386b2f16dca8d47223fa3f51b5cc0cf2d62c4cbd1e7984acf369">GS_LIGHT</a> - <a class="code" href="weather_8cpp.html#acd061df3ecf93b174e170aee3381cebe">_weather</a>.<a class="code" href="classWeather.html#a08a993b67761c57c1e42093d00244f19">GetWeatherType</a>());</div>
<div class="line"><a name="l01401"></a><span class="lineno"> 1401</span>&#160;        <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span> &amp;iter : collector.draw_images) {</div>
<div class="line"><a name="l01402"></a><span class="lineno"> 1402</span>&#160;                <span class="keyword">const</span> <a class="code" href="structDrawData.html">DrawData</a> &amp;dd = iter;</div>
<div class="line"><a name="l01403"></a><span class="lineno"> 1403</span>&#160;                <span class="keyword">const</span> <a class="code" href="classRecolouring.html">Recolouring</a> &amp;rec = (dd.<a class="code" href="structDrawData.html#a60f157d7706304439f8eee934fc80019">recolour</a> == <span class="keyword">nullptr</span>) ? recolour : *dd.<a class="code" href="structDrawData.html#a60f157d7706304439f8eee934fc80019">recolour</a>;</div>
<div class="line"><a name="l01404"></a><span class="lineno"> 1404</span>&#160;                <a class="code" href="video_8cpp.html#a232b6e7cb0a75c12228a8aa17d75fd18">_video</a>.<a class="code" href="classVideoSystem.html#a8c406a287d4aaa5ad390327d6437dee5">BlitImage</a>(dd.<a class="code" href="structDrawData.html#ac48d72511e0ea716333781b67cf28204">base</a>, dd.<a class="code" href="structDrawData.html#a353546506625aaeffb85726b311ae4ad">sprite</a>, rec, gs);</div>
<div class="line"><a name="l01405"></a><span class="lineno"> 1405</span>&#160;        }</div>
<div class="line"><a name="l01406"></a><span class="lineno"> 1406</span>&#160;</div>
<div class="line"><a name="l01407"></a><span class="lineno"> 1407</span>&#160;        <a class="code" href="video_8cpp.html#a232b6e7cb0a75c12228a8aa17d75fd18">_video</a>.<a class="code" href="classVideoSystem.html#afe5066abb188fe0db4f2f5dced6a5435">SetClippedRectangle</a>(cr);</div>
<div class="line"><a name="l01408"></a><span class="lineno"> 1408</span>&#160;}</div>
<div class="line"><a name="l01409"></a><span class="lineno"> 1409</span>&#160;</div>
<div class="line"><a name="l01415"></a><span class="lineno"><a class="line" href="classViewport.html#a8f1babfcd8b2768b3251c0c879afe19b"> 1415</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classViewport.html#a8f1babfcd8b2768b3251c0c879afe19b">Viewport::MarkVoxelDirty</a>(<span class="keyword">const</span> <a class="code" href="structXYZPoint.html">XYZPoint16</a> &amp;voxel_pos, <a class="code" href="stdafx_8h.html#a259fa4834387bd68627ddf37bb3ebdb9">int16</a> height)</div>
<div class="line"><a name="l01416"></a><span class="lineno"> 1416</span>&#160;{</div>
<div class="line"><a name="l01417"></a><span class="lineno"> 1417</span>&#160;        <span class="keywordflow">if</span> (height &lt;= 0) {</div>
<div class="line"><a name="l01418"></a><span class="lineno"> 1418</span>&#160;                <span class="keyword">const</span> <a class="code" href="structVoxel.html">Voxel</a> *v = <a class="code" href="group__map__group.html#gae1beaf14b9effb4a54e82830c7b36616">_world</a>.<a class="code" href="classVoxelWorld.html#a942eb654ddce96b29807beb7a2c25de0">GetVoxel</a>(voxel_pos);</div>
<div class="line"><a name="l01419"></a><span class="lineno"> 1419</span>&#160;                <span class="keywordflow">if</span> (v == <span class="keyword">nullptr</span>) {</div>
<div class="line"><a name="l01420"></a><span class="lineno"> 1420</span>&#160;                        height = 1;</div>
<div class="line"><a name="l01421"></a><span class="lineno"> 1421</span>&#160;                } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01422"></a><span class="lineno"> 1422</span>&#160;                        height = 1; <span class="comment">// There are no steep slopes, so 1 covers paths already.</span></div>
<div class="line"><a name="l01423"></a><span class="lineno"> 1423</span>&#160;                        <span class="keywordflow">if</span> (v-&gt;<a class="code" href="structVoxel.html#a39b4316f246f89cc83a490c87edd7ac6">GetGroundType</a>() != <a class="code" href="group__map__group.html#ggad15436b50732bd9ef2b6f2efa5f400edaf0ceff8e769df0430417e0704018dfc7">GTP_INVALID</a>) {</div>
<div class="line"><a name="l01424"></a><span class="lineno"> 1424</span>&#160;                                <span class="keywordflow">if</span> (<a class="code" href="tile_8h.html#a9e972149bbb18515cf3a69ee0d5b80ea">IsImplodedSteepSlope</a>(v-&gt;<a class="code" href="structVoxel.html#adf0e5dcd80753791808eca30dc90879a">GetGroundSlope</a>())) height = 2;</div>
<div class="line"><a name="l01425"></a><span class="lineno"> 1425</span>&#160;                        }</div>
<div class="line"><a name="l01426"></a><span class="lineno"> 1426</span>&#160;                        <a class="code" href="map_8h.html#ada9f0c1420f66f999469d82ef2262280">SmallRideInstance</a> number = v-&gt;<a class="code" href="structVoxel.html#a78ee7c8c8e8e62d18733aed8c28cba56">GetInstance</a>();</div>
<div class="line"><a name="l01427"></a><span class="lineno"> 1427</span>&#160;                        <span class="keywordflow">if</span> (number &gt;= <a class="code" href="map_8h.html#ada9f0c1420f66f999469d82ef2262280ae3bfbce4590e9566985d32b115b851d7">SRI_FULL_RIDES</a>) { <span class="comment">// A ride.</span></div>
<div class="line"><a name="l01428"></a><span class="lineno"> 1428</span>&#160;                                <span class="keyword">const</span> <a class="code" href="classRideInstance.html">RideInstance</a> *ri = <a class="code" href="ride__type_8cpp.html#a09f4be10d8b08c149e63a0b278accfef">_rides_manager</a>.<a class="code" href="classRidesManager.html#aa779068f98207a4bb13fe3ad7e16efa0">GetRideInstance</a>(number);</div>
<div class="line"><a name="l01429"></a><span class="lineno"> 1429</span>&#160;                                <span class="keywordflow">if</span> (ri != <span class="keyword">nullptr</span>) {</div>
<div class="line"><a name="l01430"></a><span class="lineno"> 1430</span>&#160;                                        <span class="keywordflow">switch</span> (ri-&gt;<a class="code" href="classRideInstance.html#af187b2634a24756124d414639344a50f">GetKind</a>()) {</div>
<div class="line"><a name="l01431"></a><span class="lineno"> 1431</span>&#160;                                                <span class="keywordflow">case</span> <a class="code" href="ride__type_8h.html#a7920a38ef1d6024ec5d65be22d0c3d6ea601a3d6676990bba5aa8efaf582f5bad">RTK_SHOP</a>: {</div>
<div class="line"><a name="l01432"></a><span class="lineno"> 1432</span>&#160;                                                        <span class="keyword">const</span> <a class="code" href="classShopInstance.html">ShopInstance</a> *si = <span class="keyword">static_cast&lt;</span><span class="keyword">const </span><a class="code" href="classShopInstance.html">ShopInstance</a> *<span class="keyword">&gt;</span>(ri);</div>
<div class="line"><a name="l01433"></a><span class="lineno"> 1433</span>&#160;                                                        height = si-&gt;<a class="code" href="classShopInstance.html#adcf705be2f439877bb4804ba73e9ec57">GetShopType</a>()-&gt;<a class="code" href="classShopType.html#aeec1e71debdfda40fe02ddbc62322037">height</a>;</div>
<div class="line"><a name="l01434"></a><span class="lineno"> 1434</span>&#160;                                                        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01435"></a><span class="lineno"> 1435</span>&#160;                                                }</div>
<div class="line"><a name="l01436"></a><span class="lineno"> 1436</span>&#160;</div>
<div class="line"><a name="l01437"></a><span class="lineno"> 1437</span>&#160;                                                <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l01438"></a><span class="lineno"> 1438</span>&#160;                                                        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01439"></a><span class="lineno"> 1439</span>&#160;                                        }</div>
<div class="line"><a name="l01440"></a><span class="lineno"> 1440</span>&#160;                                }</div>
<div class="line"><a name="l01441"></a><span class="lineno"> 1441</span>&#160;                        }</div>
<div class="line"><a name="l01442"></a><span class="lineno"> 1442</span>&#160;                }</div>
<div class="line"><a name="l01443"></a><span class="lineno"> 1443</span>&#160;        }</div>
<div class="line"><a name="l01444"></a><span class="lineno"> 1444</span>&#160;</div>
<div class="line"><a name="l01445"></a><span class="lineno"> 1445</span>&#160;        <a class="code" href="structRectangle.html">Rectangle32</a> <a class="code" href="classWindow.html#a28e5baa158219bb8485764c99239d211">rect</a>;</div>
<div class="line"><a name="l01446"></a><span class="lineno"> 1446</span>&#160;        <span class="keyword">const</span> <a class="code" href="structPoint.html">Point16</a> *pt;</div>
<div class="line"><a name="l01447"></a><span class="lineno"> 1447</span>&#160;</div>
<div class="line"><a name="l01448"></a><span class="lineno"> 1448</span>&#160;        <a class="code" href="stdafx_8h.html#a43d43196463bde49cb067f5c20ab8481">int32</a> center_x = this-&gt;<a class="code" href="classViewport.html#a8a0e45b531578052b03d8435f0f3df5c">ComputeX</a>(this-&gt;<a class="code" href="classViewport.html#a5a238302d2aaeccf11d004c66637bfd7">view_pos</a>.<a class="code" href="structXYZPoint.html#a77a7984ac0a26ecb76acb94bbcf96a48">x</a>, this-&gt;view_pos.y) - this-&gt;rect.<a class="code" href="structRectangle.html#ab794667ffad2a46061bc417f99c031cc">base</a>.<a class="code" href="structPoint.html#af0836c7f2eec563aa7bc20d8cfa5dd2a">x</a> - this-&gt;rect.<a class="code" href="structRectangle.html#a82ad3c804a2bdb269926f29a2574c22b">width</a> / 2;</div>
<div class="line"><a name="l01449"></a><span class="lineno"> 1449</span>&#160;        <a class="code" href="stdafx_8h.html#a43d43196463bde49cb067f5c20ab8481">int32</a> center_y = this-&gt;<a class="code" href="classViewport.html#a9ffc3b53f8f141f7a54c7f5aeab5a566">ComputeY</a>(this-&gt;<a class="code" href="classViewport.html#a5a238302d2aaeccf11d004c66637bfd7">view_pos</a>.<a class="code" href="structXYZPoint.html#a77a7984ac0a26ecb76acb94bbcf96a48">x</a>, this-&gt;view_pos.y, this-&gt;view_pos.z) - this-&gt;rect.<a class="code" href="structRectangle.html#ab794667ffad2a46061bc417f99c031cc">base</a>.<a class="code" href="structPoint.html#a56c3dcea91f03182921eea9a5cf555a3">y</a> - this-&gt;rect.<a class="code" href="structRectangle.html#aa81e161d1fdaa8801d202f59b4d541e0">height</a> / 2;</div>
<div class="line"><a name="l01450"></a><span class="lineno"> 1450</span>&#160;</div>
<div class="line"><a name="l01451"></a><span class="lineno"> 1451</span>&#160;        pt = &amp;<a class="code" href="tile_8h.html#a1e34c411cbad05567495cb8d3e937ac1">_corner_dxy</a>[this-&gt;<a class="code" href="classViewport.html#adeeab711682948cdfa386bca98734f25">orientation</a>];</div>
<div class="line"><a name="l01452"></a><span class="lineno"> 1452</span>&#160;        rect.<a class="code" href="structRectangle.html#ab794667ffad2a46061bc417f99c031cc">base</a>.<a class="code" href="structPoint.html#a56c3dcea91f03182921eea9a5cf555a3">y</a> = this-&gt;<a class="code" href="classViewport.html#a9ffc3b53f8f141f7a54c7f5aeab5a566">ComputeY</a>((voxel_pos.<a class="code" href="structXYZPoint.html#a77a7984ac0a26ecb76acb94bbcf96a48">x</a> + pt-&gt;<a class="code" href="structPoint.html#af0836c7f2eec563aa7bc20d8cfa5dd2a">x</a>) * 256, (voxel_pos.<a class="code" href="structXYZPoint.html#aea2c3552caee6e81c3b007ff78834b99">y</a> + pt-&gt;<a class="code" href="structPoint.html#a56c3dcea91f03182921eea9a5cf555a3">y</a>) * 256, (voxel_pos.<a class="code" href="structXYZPoint.html#a97215f048dde4da40be2742267ab7224">z</a> + height) * 256) - center_y;</div>
<div class="line"><a name="l01453"></a><span class="lineno"> 1453</span>&#160;</div>
<div class="line"><a name="l01454"></a><span class="lineno"> 1454</span>&#160;        pt = &amp;<a class="code" href="tile_8h.html#a1e34c411cbad05567495cb8d3e937ac1">_corner_dxy</a>[<a class="code" href="group__map__group.html#ga8ba2da28d22f859cbc51bf49f7ca1cfd">RotateCounterClockwise</a>(this-&gt;<a class="code" href="classViewport.html#adeeab711682948cdfa386bca98734f25">orientation</a>)];</div>
<div class="line"><a name="l01455"></a><span class="lineno"> 1455</span>&#160;        rect.<a class="code" href="structRectangle.html#ab794667ffad2a46061bc417f99c031cc">base</a>.<a class="code" href="structPoint.html#af0836c7f2eec563aa7bc20d8cfa5dd2a">x</a> = this-&gt;<a class="code" href="classViewport.html#a8a0e45b531578052b03d8435f0f3df5c">ComputeX</a>((voxel_pos.<a class="code" href="structXYZPoint.html#a77a7984ac0a26ecb76acb94bbcf96a48">x</a> + pt-&gt;<a class="code" href="structPoint.html#af0836c7f2eec563aa7bc20d8cfa5dd2a">x</a>) * 256, (voxel_pos.<a class="code" href="structXYZPoint.html#aea2c3552caee6e81c3b007ff78834b99">y</a> + pt-&gt;<a class="code" href="structPoint.html#a56c3dcea91f03182921eea9a5cf555a3">y</a>) * 256) - center_x;</div>
<div class="line"><a name="l01456"></a><span class="lineno"> 1456</span>&#160;</div>
<div class="line"><a name="l01457"></a><span class="lineno"> 1457</span>&#160;        pt = &amp;<a class="code" href="tile_8h.html#a1e34c411cbad05567495cb8d3e937ac1">_corner_dxy</a>[<a class="code" href="group__map__group.html#ga16543508a2eb72462e0747786d43778a">RotateClockwise</a>(this-&gt;<a class="code" href="classViewport.html#adeeab711682948cdfa386bca98734f25">orientation</a>)];</div>
<div class="line"><a name="l01458"></a><span class="lineno"> 1458</span>&#160;        <a class="code" href="stdafx_8h.html#a43d43196463bde49cb067f5c20ab8481">int32</a> d = this-&gt;<a class="code" href="classViewport.html#a8a0e45b531578052b03d8435f0f3df5c">ComputeX</a>((voxel_pos.<a class="code" href="structXYZPoint.html#a77a7984ac0a26ecb76acb94bbcf96a48">x</a> + pt-&gt;<a class="code" href="structPoint.html#af0836c7f2eec563aa7bc20d8cfa5dd2a">x</a>) * 256, (voxel_pos.<a class="code" href="structXYZPoint.html#aea2c3552caee6e81c3b007ff78834b99">y</a> + pt-&gt;<a class="code" href="structPoint.html#a56c3dcea91f03182921eea9a5cf555a3">y</a>) * 256) - center_x;</div>
<div class="line"><a name="l01459"></a><span class="lineno"> 1459</span>&#160;        assert(d &gt;= rect.<a class="code" href="structRectangle.html#ab794667ffad2a46061bc417f99c031cc">base</a>.<a class="code" href="structPoint.html#af0836c7f2eec563aa7bc20d8cfa5dd2a">x</a>);</div>
<div class="line"><a name="l01460"></a><span class="lineno"> 1460</span>&#160;        rect.<a class="code" href="structRectangle.html#a82ad3c804a2bdb269926f29a2574c22b">width</a> = d - rect.<a class="code" href="structRectangle.html#ab794667ffad2a46061bc417f99c031cc">base</a>.<a class="code" href="structPoint.html#af0836c7f2eec563aa7bc20d8cfa5dd2a">x</a> + 1;</div>
<div class="line"><a name="l01461"></a><span class="lineno"> 1461</span>&#160;</div>
<div class="line"><a name="l01462"></a><span class="lineno"> 1462</span>&#160;        pt = &amp;<a class="code" href="tile_8h.html#a1e34c411cbad05567495cb8d3e937ac1">_corner_dxy</a>[<a class="code" href="group__map__group.html#ga16543508a2eb72462e0747786d43778a">RotateClockwise</a>(<a class="code" href="group__map__group.html#ga16543508a2eb72462e0747786d43778a">RotateClockwise</a>(this-&gt;<a class="code" href="classViewport.html#adeeab711682948cdfa386bca98734f25">orientation</a>))];</div>
<div class="line"><a name="l01463"></a><span class="lineno"> 1463</span>&#160;        d = this-&gt;<a class="code" href="classViewport.html#a9ffc3b53f8f141f7a54c7f5aeab5a566">ComputeY</a>((voxel_pos.<a class="code" href="structXYZPoint.html#a77a7984ac0a26ecb76acb94bbcf96a48">x</a> + pt-&gt;<a class="code" href="structPoint.html#af0836c7f2eec563aa7bc20d8cfa5dd2a">x</a>) * 256, (voxel_pos.<a class="code" href="structXYZPoint.html#aea2c3552caee6e81c3b007ff78834b99">y</a> + pt-&gt;<a class="code" href="structPoint.html#a56c3dcea91f03182921eea9a5cf555a3">y</a>) * 256, voxel_pos.<a class="code" href="structXYZPoint.html#a97215f048dde4da40be2742267ab7224">z</a> * 256) - center_y;</div>
<div class="line"><a name="l01464"></a><span class="lineno"> 1464</span>&#160;        assert(d &gt;= rect.<a class="code" href="structRectangle.html#ab794667ffad2a46061bc417f99c031cc">base</a>.<a class="code" href="structPoint.html#a56c3dcea91f03182921eea9a5cf555a3">y</a>);</div>
<div class="line"><a name="l01465"></a><span class="lineno"> 1465</span>&#160;        rect.<a class="code" href="structRectangle.html#aa81e161d1fdaa8801d202f59b4d541e0">height</a> = d - rect.<a class="code" href="structRectangle.html#ab794667ffad2a46061bc417f99c031cc">base</a>.<a class="code" href="structPoint.html#a56c3dcea91f03182921eea9a5cf555a3">y</a> + 1;</div>
<div class="line"><a name="l01466"></a><span class="lineno"> 1466</span>&#160;</div>
<div class="line"><a name="l01467"></a><span class="lineno"> 1467</span>&#160;        <a class="code" href="video_8cpp.html#a232b6e7cb0a75c12228a8aa17d75fd18">_video</a>.<a class="code" href="classVideoSystem.html#aae5730446e164c2a484a2222640d143d">MarkDisplayDirty</a>(rect);</div>
<div class="line"><a name="l01468"></a><span class="lineno"> 1468</span>&#160;}</div>
<div class="line"><a name="l01469"></a><span class="lineno"> 1469</span>&#160;</div>
<div class="line"><a name="l01475"></a><span class="lineno"><a class="line" href="classViewport.html#ac2f43f9ca5af54296d614f1891597c0a"> 1475</a></span>&#160;<a class="code" href="viewport_8h.html#a7eaf31dcf3c53b721a3144bb135f8d25">ClickableSprite</a> <a class="code" href="classViewport.html#ac2f43f9ca5af54296d614f1891597c0a">Viewport::ComputeCursorPosition</a>(<a class="code" href="classFinderData.html">FinderData</a> *fdata)</div>
<div class="line"><a name="l01476"></a><span class="lineno"> 1476</span>&#160;{</div>
<div class="line"><a name="l01477"></a><span class="lineno"> 1477</span>&#160;        <a class="code" href="stdafx_8h.html#a259fa4834387bd68627ddf37bb3ebdb9">int16</a> xp = this-&gt;<a class="code" href="classViewport.html#a18b4fb0ad0bcbee66ee2658498bdcc5a">mouse_pos</a>.<a class="code" href="structPoint.html#af0836c7f2eec563aa7bc20d8cfa5dd2a">x</a> - this-&gt;<a class="code" href="classWindow.html#a28e5baa158219bb8485764c99239d211">rect</a>.<a class="code" href="structRectangle.html#a82ad3c804a2bdb269926f29a2574c22b">width</a> / 2;</div>
<div class="line"><a name="l01478"></a><span class="lineno"> 1478</span>&#160;        <a class="code" href="stdafx_8h.html#a259fa4834387bd68627ddf37bb3ebdb9">int16</a> yp = this-&gt;<a class="code" href="classViewport.html#a18b4fb0ad0bcbee66ee2658498bdcc5a">mouse_pos</a>.<a class="code" href="structPoint.html#a56c3dcea91f03182921eea9a5cf555a3">y</a> - this-&gt;<a class="code" href="classWindow.html#a28e5baa158219bb8485764c99239d211">rect</a>.<a class="code" href="structRectangle.html#aa81e161d1fdaa8801d202f59b4d541e0">height</a> / 2;</div>
<div class="line"><a name="l01479"></a><span class="lineno"> 1479</span>&#160;        <a class="code" href="classPixelFinder.html">PixelFinder</a> collector(<span class="keyword">this</span>, fdata);</div>
<div class="line"><a name="l01480"></a><span class="lineno"> 1480</span>&#160;        collector.<a class="code" href="classVoxelCollector.html#a4a9d577a8b54caf8acb14a7fadda1c61">SetWindowSize</a>(xp, yp, 1, 1);</div>
<div class="line"><a name="l01481"></a><span class="lineno"> 1481</span>&#160;        collector.<a class="code" href="classVoxelCollector.html#a05a198f3b94bfff20c1bf1ccdf4ae365">Collect</a>(<span class="keyword">false</span>);</div>
<div class="line"><a name="l01482"></a><span class="lineno"> 1482</span>&#160;        <span class="keywordflow">if</span> (!collector.<a class="code" href="classPixelFinder.html#a22026f65fa28030f9673fbdf70ee5415">found</a>) <span class="keywordflow">return</span> <a class="code" href="viewport_8h.html#a7eaf31dcf3c53b721a3144bb135f8d25ad9f72db2c1d806e711ad1b28d8e54525">CS_NONE</a>;</div>
<div class="line"><a name="l01483"></a><span class="lineno"> 1483</span>&#160;</div>
<div class="line"><a name="l01484"></a><span class="lineno"> 1484</span>&#160;        fdata-&gt;<a class="code" href="classFinderData.html#ad42b1b2e05e45729a9a506ed49f40e36">cursor</a> = fdata-&gt;<a class="code" href="classFinderData.html#a3f4bda28f0eaac766e7224bc4e1e0ec5">select</a> == <a class="code" href="viewport_8h.html#ac72850d8ae4e0c914f4227f845921a3fa92ab52460b42f3a5b454ef385b180073">FW_EDGE</a> ? <a class="code" href="group__viewport__group.html#ggabbe637356c8cb749a9726f13658031faabf1f1bb0d119811c2f6816593a298233">CUR_TYPE_EDGE_NE</a> : <a class="code" href="group__viewport__group.html#ggabbe637356c8cb749a9726f13658031faae1019b8e1fe16fadce868506261fd753">CUR_TYPE_TILE</a>;</div>
<div class="line"><a name="l01485"></a><span class="lineno"> 1485</span>&#160;        <span class="keywordflow">if</span> (fdata-&gt;<a class="code" href="classFinderData.html#a3f4bda28f0eaac766e7224bc4e1e0ec5">select</a> == <a class="code" href="viewport_8h.html#ac72850d8ae4e0c914f4227f845921a3fa12f53752e371946a6d5537d603937caf">FW_CORNER</a> &amp;&amp; (collector.<a class="code" href="classPixelFinder.html#a29c2cbacbb286eed99841b873a23ce7c">data</a>.<a class="code" href="structDrawData.html#a9ed124116c1db658f237dfdc890f4bdb">order</a> &amp; <a class="code" href="viewport_8h.html#a7eaf31dcf3c53b721a3144bb135f8d25aa2b66245f086718aa20cf6450393b0a6">CS_MASK</a>) == <a class="code" href="viewport_8h.html#a7eaf31dcf3c53b721a3144bb135f8d25a5b37d82d058ce4aa5041817e0eced64f">CS_GROUND</a>) {</div>
<div class="line"><a name="l01486"></a><span class="lineno"> 1486</span>&#160;                <span class="keywordflow">if</span> (collector.<a class="code" href="classPixelFinder.html#a351817707623c57264a0be8a288eab51">pixel</a> == <a class="code" href="palette_8cpp.html#a550404bbe3732d4105e8965deba1867b">_palette</a>[181]) {</div>
<div class="line"><a name="l01487"></a><span class="lineno"> 1487</span>&#160;                        fdata-&gt;<a class="code" href="classFinderData.html#ad42b1b2e05e45729a9a506ed49f40e36">cursor</a> = (<a class="code" href="group__viewport__group.html#gabbe637356c8cb749a9726f13658031fa">CursorType</a>)<a class="code" href="group__map__group.html#ga5c4cddbc2042d88434691f0b2d00db45">AddOrientations</a>(<a class="code" href="group__map__group.html#ggabad48584a1852521ff578b647f07fdd3a555bd255b7d0fb03bd8e272ee595b49b">VOR_NORTH</a>, this-&gt;<a class="code" href="classViewport.html#adeeab711682948cdfa386bca98734f25">orientation</a>);</div>
<div class="line"><a name="l01488"></a><span class="lineno"> 1488</span>&#160;                } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (collector.<a class="code" href="classPixelFinder.html#a351817707623c57264a0be8a288eab51">pixel</a> == <a class="code" href="palette_8cpp.html#a550404bbe3732d4105e8965deba1867b">_palette</a>[182]) {</div>
<div class="line"><a name="l01489"></a><span class="lineno"> 1489</span>&#160;                        fdata-&gt;<a class="code" href="classFinderData.html#ad42b1b2e05e45729a9a506ed49f40e36">cursor</a> = (<a class="code" href="group__viewport__group.html#gabbe637356c8cb749a9726f13658031fa">CursorType</a>)<a class="code" href="group__map__group.html#ga5c4cddbc2042d88434691f0b2d00db45">AddOrientations</a>(<a class="code" href="group__map__group.html#ggabad48584a1852521ff578b647f07fdd3ab9f340d6a90130e2bcc75d5be2af447e">VOR_EAST</a>,  this-&gt;<a class="code" href="classViewport.html#adeeab711682948cdfa386bca98734f25">orientation</a>);</div>
<div class="line"><a name="l01490"></a><span class="lineno"> 1490</span>&#160;                } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (collector.<a class="code" href="classPixelFinder.html#a351817707623c57264a0be8a288eab51">pixel</a> == <a class="code" href="palette_8cpp.html#a550404bbe3732d4105e8965deba1867b">_palette</a>[184]) {</div>
<div class="line"><a name="l01491"></a><span class="lineno"> 1491</span>&#160;                        fdata-&gt;<a class="code" href="classFinderData.html#ad42b1b2e05e45729a9a506ed49f40e36">cursor</a> = (<a class="code" href="group__viewport__group.html#gabbe637356c8cb749a9726f13658031fa">CursorType</a>)<a class="code" href="group__map__group.html#ga5c4cddbc2042d88434691f0b2d00db45">AddOrientations</a>(<a class="code" href="group__map__group.html#ggabad48584a1852521ff578b647f07fdd3a5ff3ccca79a685ddc61d0a8739d73ed1">VOR_WEST</a>,  this-&gt;<a class="code" href="classViewport.html#adeeab711682948cdfa386bca98734f25">orientation</a>);</div>
<div class="line"><a name="l01492"></a><span class="lineno"> 1492</span>&#160;                } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (collector.<a class="code" href="classPixelFinder.html#a351817707623c57264a0be8a288eab51">pixel</a> == <a class="code" href="palette_8cpp.html#a550404bbe3732d4105e8965deba1867b">_palette</a>[185]) {</div>
<div class="line"><a name="l01493"></a><span class="lineno"> 1493</span>&#160;                        fdata-&gt;<a class="code" href="classFinderData.html#ad42b1b2e05e45729a9a506ed49f40e36">cursor</a> = (<a class="code" href="group__viewport__group.html#gabbe637356c8cb749a9726f13658031fa">CursorType</a>)<a class="code" href="group__map__group.html#ga5c4cddbc2042d88434691f0b2d00db45">AddOrientations</a>(<a class="code" href="group__map__group.html#ggabad48584a1852521ff578b647f07fdd3ae07f82bd43e8d66a7394d5ebf0f47c39">VOR_SOUTH</a>, this-&gt;<a class="code" href="classViewport.html#adeeab711682948cdfa386bca98734f25">orientation</a>);</div>
<div class="line"><a name="l01494"></a><span class="lineno"> 1494</span>&#160;                }</div>
<div class="line"><a name="l01495"></a><span class="lineno"> 1495</span>&#160;        }</div>
<div class="line"><a name="l01496"></a><span class="lineno"> 1496</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (fdata-&gt;<a class="code" href="classFinderData.html#a3f4bda28f0eaac766e7224bc4e1e0ec5">select</a> == <a class="code" href="viewport_8h.html#ac72850d8ae4e0c914f4227f845921a3fa92ab52460b42f3a5b454ef385b180073">FW_EDGE</a> &amp;&amp; (collector.<a class="code" href="classPixelFinder.html#a29c2cbacbb286eed99841b873a23ce7c">data</a>.<a class="code" href="structDrawData.html#a9ed124116c1db658f237dfdc890f4bdb">order</a> &amp; <a class="code" href="viewport_8h.html#a7eaf31dcf3c53b721a3144bb135f8d25aa2b66245f086718aa20cf6450393b0a6">CS_MASK</a>) == <a class="code" href="viewport_8h.html#a7eaf31dcf3c53b721a3144bb135f8d25adfa7036ff7c4dcc0edbe62c3df63222b">CS_GROUND_EDGE</a>) {</div>
<div class="line"><a name="l01497"></a><span class="lineno"> 1497</span>&#160;                <a class="code" href="stdafx_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> base_edge = <a class="code" href="group__map__group.html#gga29bb8f9503c34074bad3c762c92ee68babd24d9c7b6e650be2bbe82b73f66cdea">EDGE_COUNT</a>;</div>
<div class="line"><a name="l01498"></a><span class="lineno"> 1498</span>&#160;                <span class="keywordflow">if</span> (collector.<a class="code" href="classPixelFinder.html#a351817707623c57264a0be8a288eab51">pixel</a> == <a class="code" href="palette_8cpp.html#a550404bbe3732d4105e8965deba1867b">_palette</a>[181]) {</div>
<div class="line"><a name="l01499"></a><span class="lineno"> 1499</span>&#160;                        base_edge = (<a class="code" href="stdafx_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a>)<a class="code" href="group__map__group.html#gga29bb8f9503c34074bad3c762c92ee68ba91a648042eb156a3d0d9538907ce1242">EDGE_NE</a>;</div>
<div class="line"><a name="l01500"></a><span class="lineno"> 1500</span>&#160;                } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (collector.<a class="code" href="classPixelFinder.html#a351817707623c57264a0be8a288eab51">pixel</a> == <a class="code" href="palette_8cpp.html#a550404bbe3732d4105e8965deba1867b">_palette</a>[182]) {</div>
<div class="line"><a name="l01501"></a><span class="lineno"> 1501</span>&#160;                        base_edge = (<a class="code" href="stdafx_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a>)<a class="code" href="group__map__group.html#gga29bb8f9503c34074bad3c762c92ee68bad242fafb31c89544eebffc371fcc07d5">EDGE_SE</a>;</div>
<div class="line"><a name="l01502"></a><span class="lineno"> 1502</span>&#160;                } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (collector.<a class="code" href="classPixelFinder.html#a351817707623c57264a0be8a288eab51">pixel</a> == <a class="code" href="palette_8cpp.html#a550404bbe3732d4105e8965deba1867b">_palette</a>[184]) {</div>
<div class="line"><a name="l01503"></a><span class="lineno"> 1503</span>&#160;                        base_edge = (<a class="code" href="stdafx_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a>)<a class="code" href="group__map__group.html#gga29bb8f9503c34074bad3c762c92ee68ba63bdd25665e0a98d96e4cda2147b2135">EDGE_NW</a>;</div>
<div class="line"><a name="l01504"></a><span class="lineno"> 1504</span>&#160;                } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (collector.<a class="code" href="classPixelFinder.html#a351817707623c57264a0be8a288eab51">pixel</a> == <a class="code" href="palette_8cpp.html#a550404bbe3732d4105e8965deba1867b">_palette</a>[185]) {</div>
<div class="line"><a name="l01505"></a><span class="lineno"> 1505</span>&#160;                        base_edge = (<a class="code" href="stdafx_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a>)<a class="code" href="group__map__group.html#gga29bb8f9503c34074bad3c762c92ee68baa49ed1ec0f987e5a1d8a9196ff848658">EDGE_SW</a>;</div>
<div class="line"><a name="l01506"></a><span class="lineno"> 1506</span>&#160;                }</div>
<div class="line"><a name="l01507"></a><span class="lineno"> 1507</span>&#160;                <span class="keywordflow">if</span> (base_edge &lt; <a class="code" href="group__map__group.html#gga29bb8f9503c34074bad3c762c92ee68babd24d9c7b6e650be2bbe82b73f66cdea">EDGE_COUNT</a>) {</div>
<div class="line"><a name="l01508"></a><span class="lineno"> 1508</span>&#160;                        fdata-&gt;<a class="code" href="classFinderData.html#ad42b1b2e05e45729a9a506ed49f40e36">cursor</a> = (<a class="code" href="group__viewport__group.html#gabbe637356c8cb749a9726f13658031fa">CursorType</a>)((base_edge + (<a class="code" href="stdafx_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a>)this-&gt;<a class="code" href="classViewport.html#adeeab711682948cdfa386bca98734f25">orientation</a>) % 4 + (<a class="code" href="stdafx_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a>)<a class="code" href="group__viewport__group.html#ggabbe637356c8cb749a9726f13658031faabf1f1bb0d119811c2f6816593a298233">CUR_TYPE_EDGE_NE</a>);</div>
<div class="line"><a name="l01509"></a><span class="lineno"> 1509</span>&#160;                }</div>
<div class="line"><a name="l01510"></a><span class="lineno"> 1510</span>&#160;        }</div>
<div class="line"><a name="l01511"></a><span class="lineno"> 1511</span>&#160;        <span class="keywordflow">return</span> (<a class="code" href="viewport_8h.html#a7eaf31dcf3c53b721a3144bb135f8d25">ClickableSprite</a>)(collector.<a class="code" href="classPixelFinder.html#a29c2cbacbb286eed99841b873a23ce7c">data</a>.<a class="code" href="structDrawData.html#a9ed124116c1db658f237dfdc890f4bdb">order</a> &amp; <a class="code" href="viewport_8h.html#a7eaf31dcf3c53b721a3144bb135f8d25aa2b66245f086718aa20cf6450393b0a6">CS_MASK</a>);</div>
<div class="line"><a name="l01512"></a><span class="lineno"> 1512</span>&#160;}</div>
<div class="line"><a name="l01513"></a><span class="lineno"> 1513</span>&#160;</div>
<div class="line"><a name="l01518"></a><span class="lineno"><a class="line" href="classViewport.html#a2e66c565031330e9cc9c67dfedd24ec8"> 1518</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classViewport.html#a2e66c565031330e9cc9c67dfedd24ec8">Viewport::Rotate</a>(<span class="keywordtype">int</span> direction)</div>
<div class="line"><a name="l01519"></a><span class="lineno"> 1519</span>&#160;{</div>
<div class="line"><a name="l01520"></a><span class="lineno"> 1520</span>&#160;        this-&gt;<a class="code" href="classViewport.html#adeeab711682948cdfa386bca98734f25">orientation</a> = (<a class="code" href="group__map__group.html#gabad48584a1852521ff578b647f07fdd3">ViewOrientation</a>)((this-&gt;<a class="code" href="classViewport.html#adeeab711682948cdfa386bca98734f25">orientation</a> + <a class="code" href="group__map__group.html#ggabad48584a1852521ff578b647f07fdd3a4b831527a6910705d695845ae3f4d139">VOR_NUM_ORIENT</a> + ((direction &gt; 0) ? 1 : -1)) % <a class="code" href="group__map__group.html#ggabad48584a1852521ff578b647f07fdd3a4b831527a6910705d695845ae3f4d139">VOR_NUM_ORIENT</a>);</div>
<div class="line"><a name="l01521"></a><span class="lineno"> 1521</span>&#160;        <a class="code" href="structPoint.html">Point16</a> pt = this-&gt;<a class="code" href="classViewport.html#a18b4fb0ad0bcbee66ee2658498bdcc5a">mouse_pos</a>;</div>
<div class="line"><a name="l01522"></a><span class="lineno"> 1522</span>&#160;        this-&gt;<a class="code" href="classViewport.html#ab2ab6f182f78c602adace74e2f2541b0">OnMouseMoveEvent</a>(pt);</div>
<div class="line"><a name="l01523"></a><span class="lineno"> 1523</span>&#160;        this-&gt;<a class="code" href="classWindow.html#a52b7f858345bf4ce8902e144e8076522">MarkDirty</a>();</div>
<div class="line"><a name="l01524"></a><span class="lineno"> 1524</span>&#160;</div>
<div class="line"><a name="l01525"></a><span class="lineno"> 1525</span>&#160;        <a class="code" href="window_8cpp.html#a4e83041d9bb7c20fe3f7e8e389b2b416">NotifyChange</a>(<a class="code" href="group__window__group.html#gga58ad3159a8b1f24a1d3497efcd541b69a9603c6f348a9e2e607912f97d6422ffc">WC_PATH_BUILDER</a>, <a class="code" href="window_8h.html#ada744cd8f44581ff7ac7f7eda514779a">ALL_WINDOWS_OF_TYPE</a>, <a class="code" href="window_8h.html#aab6fa040b57445f74c311c245079e741a7b13136a540375136ae7e413d4dfb6c9">CHG_VIEWPORT_ROTATED</a>, direction);</div>
<div class="line"><a name="l01526"></a><span class="lineno"> 1526</span>&#160;}</div>
<div class="line"><a name="l01527"></a><span class="lineno"> 1527</span>&#160;</div>
<div class="line"><a name="l01534"></a><span class="lineno"><a class="line" href="classViewport.html#af3a34c6e7eb9ed1452ff1fb911bbd31a"> 1534</a></span>&#160;<a class="code" href="structPoint.html">Point32</a> <a class="code" href="classViewport.html#af3a34c6e7eb9ed1452ff1fb911bbd31a">Viewport::ComputeHorizontalTranslation</a>(<span class="keywordtype">int</span> dx, <span class="keywordtype">int</span> dy)</div>
<div class="line"><a name="l01535"></a><span class="lineno"> 1535</span>&#160;{</div>
<div class="line"><a name="l01536"></a><span class="lineno"> 1536</span>&#160;        <a class="code" href="structPoint.html">Point32</a> new_xy;</div>
<div class="line"><a name="l01537"></a><span class="lineno"> 1537</span>&#160;        <span class="keywordflow">switch</span> (this-&gt;<a class="code" href="classViewport.html#adeeab711682948cdfa386bca98734f25">orientation</a>) {</div>
<div class="line"><a name="l01538"></a><span class="lineno"> 1538</span>&#160;                <span class="keywordflow">case</span> <a class="code" href="group__map__group.html#ggabad48584a1852521ff578b647f07fdd3a555bd255b7d0fb03bd8e272ee595b49b">VOR_NORTH</a>:</div>
<div class="line"><a name="l01539"></a><span class="lineno"> 1539</span>&#160;                        new_xy.<a class="code" href="structPoint.html#af0836c7f2eec563aa7bc20d8cfa5dd2a">x</a> = this-&gt;<a class="code" href="classViewport.html#a5a238302d2aaeccf11d004c66637bfd7">view_pos</a>.<a class="code" href="structXYZPoint.html#a77a7984ac0a26ecb76acb94bbcf96a48">x</a> + dx * 256 / this-&gt;<a class="code" href="classViewport.html#a4cf69d0f86ba6b3fd59e733628c87bc4">tile_width</a> - dy * 512 / this-&gt;<a class="code" href="classViewport.html#a4cf69d0f86ba6b3fd59e733628c87bc4">tile_width</a>;</div>
<div class="line"><a name="l01540"></a><span class="lineno"> 1540</span>&#160;                        new_xy.<a class="code" href="structPoint.html#a56c3dcea91f03182921eea9a5cf555a3">y</a> = this-&gt;<a class="code" href="classViewport.html#a5a238302d2aaeccf11d004c66637bfd7">view_pos</a>.<a class="code" href="structXYZPoint.html#aea2c3552caee6e81c3b007ff78834b99">y</a> - dx * 256 / this-&gt;<a class="code" href="classViewport.html#a4cf69d0f86ba6b3fd59e733628c87bc4">tile_width</a> - dy * 512 / this-&gt;<a class="code" href="classViewport.html#a4cf69d0f86ba6b3fd59e733628c87bc4">tile_width</a>;</div>
<div class="line"><a name="l01541"></a><span class="lineno"> 1541</span>&#160;                        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01542"></a><span class="lineno"> 1542</span>&#160;</div>
<div class="line"><a name="l01543"></a><span class="lineno"> 1543</span>&#160;                <span class="keywordflow">case</span> <a class="code" href="group__map__group.html#ggabad48584a1852521ff578b647f07fdd3ab9f340d6a90130e2bcc75d5be2af447e">VOR_EAST</a>:</div>
<div class="line"><a name="l01544"></a><span class="lineno"> 1544</span>&#160;                        new_xy.<a class="code" href="structPoint.html#af0836c7f2eec563aa7bc20d8cfa5dd2a">x</a> = this-&gt;<a class="code" href="classViewport.html#a5a238302d2aaeccf11d004c66637bfd7">view_pos</a>.<a class="code" href="structXYZPoint.html#a77a7984ac0a26ecb76acb94bbcf96a48">x</a> - dx * 256 / this-&gt;<a class="code" href="classViewport.html#a4cf69d0f86ba6b3fd59e733628c87bc4">tile_width</a> - dy * 512 / this-&gt;<a class="code" href="classViewport.html#a4cf69d0f86ba6b3fd59e733628c87bc4">tile_width</a>;</div>
<div class="line"><a name="l01545"></a><span class="lineno"> 1545</span>&#160;                        new_xy.<a class="code" href="structPoint.html#a56c3dcea91f03182921eea9a5cf555a3">y</a> = this-&gt;<a class="code" href="classViewport.html#a5a238302d2aaeccf11d004c66637bfd7">view_pos</a>.<a class="code" href="structXYZPoint.html#aea2c3552caee6e81c3b007ff78834b99">y</a> - dx * 256 / this-&gt;<a class="code" href="classViewport.html#a4cf69d0f86ba6b3fd59e733628c87bc4">tile_width</a> + dy * 512 / this-&gt;<a class="code" href="classViewport.html#a4cf69d0f86ba6b3fd59e733628c87bc4">tile_width</a>;</div>
<div class="line"><a name="l01546"></a><span class="lineno"> 1546</span>&#160;                        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01547"></a><span class="lineno"> 1547</span>&#160;</div>
<div class="line"><a name="l01548"></a><span class="lineno"> 1548</span>&#160;                <span class="keywordflow">case</span> <a class="code" href="group__map__group.html#ggabad48584a1852521ff578b647f07fdd3ae07f82bd43e8d66a7394d5ebf0f47c39">VOR_SOUTH</a>:</div>
<div class="line"><a name="l01549"></a><span class="lineno"> 1549</span>&#160;                        new_xy.<a class="code" href="structPoint.html#af0836c7f2eec563aa7bc20d8cfa5dd2a">x</a> = this-&gt;<a class="code" href="classViewport.html#a5a238302d2aaeccf11d004c66637bfd7">view_pos</a>.<a class="code" href="structXYZPoint.html#a77a7984ac0a26ecb76acb94bbcf96a48">x</a> - dx * 256 / this-&gt;<a class="code" href="classViewport.html#a4cf69d0f86ba6b3fd59e733628c87bc4">tile_width</a> + dy * 512 / this-&gt;<a class="code" href="classViewport.html#a4cf69d0f86ba6b3fd59e733628c87bc4">tile_width</a>;</div>
<div class="line"><a name="l01550"></a><span class="lineno"> 1550</span>&#160;                        new_xy.<a class="code" href="structPoint.html#a56c3dcea91f03182921eea9a5cf555a3">y</a> = this-&gt;<a class="code" href="classViewport.html#a5a238302d2aaeccf11d004c66637bfd7">view_pos</a>.<a class="code" href="structXYZPoint.html#aea2c3552caee6e81c3b007ff78834b99">y</a> + dx * 256 / this-&gt;<a class="code" href="classViewport.html#a4cf69d0f86ba6b3fd59e733628c87bc4">tile_width</a> + dy * 512 / this-&gt;<a class="code" href="classViewport.html#a4cf69d0f86ba6b3fd59e733628c87bc4">tile_width</a>;</div>
<div class="line"><a name="l01551"></a><span class="lineno"> 1551</span>&#160;                        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01552"></a><span class="lineno"> 1552</span>&#160;</div>
<div class="line"><a name="l01553"></a><span class="lineno"> 1553</span>&#160;                <span class="keywordflow">case</span> <a class="code" href="group__map__group.html#ggabad48584a1852521ff578b647f07fdd3a5ff3ccca79a685ddc61d0a8739d73ed1">VOR_WEST</a>:</div>
<div class="line"><a name="l01554"></a><span class="lineno"> 1554</span>&#160;                        new_xy.<a class="code" href="structPoint.html#af0836c7f2eec563aa7bc20d8cfa5dd2a">x</a> = this-&gt;<a class="code" href="classViewport.html#a5a238302d2aaeccf11d004c66637bfd7">view_pos</a>.<a class="code" href="structXYZPoint.html#a77a7984ac0a26ecb76acb94bbcf96a48">x</a> + dx * 256 / this-&gt;<a class="code" href="classViewport.html#a4cf69d0f86ba6b3fd59e733628c87bc4">tile_width</a> + dy * 512 / this-&gt;<a class="code" href="classViewport.html#a4cf69d0f86ba6b3fd59e733628c87bc4">tile_width</a>;</div>
<div class="line"><a name="l01555"></a><span class="lineno"> 1555</span>&#160;                        new_xy.<a class="code" href="structPoint.html#a56c3dcea91f03182921eea9a5cf555a3">y</a> = this-&gt;<a class="code" href="classViewport.html#a5a238302d2aaeccf11d004c66637bfd7">view_pos</a>.<a class="code" href="structXYZPoint.html#aea2c3552caee6e81c3b007ff78834b99">y</a> + dx * 256 / this-&gt;<a class="code" href="classViewport.html#a4cf69d0f86ba6b3fd59e733628c87bc4">tile_width</a> - dy * 512 / this-&gt;<a class="code" href="classViewport.html#a4cf69d0f86ba6b3fd59e733628c87bc4">tile_width</a>;</div>
<div class="line"><a name="l01556"></a><span class="lineno"> 1556</span>&#160;                        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01557"></a><span class="lineno"> 1557</span>&#160;</div>
<div class="line"><a name="l01558"></a><span class="lineno"> 1558</span>&#160;                <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l01559"></a><span class="lineno"> 1559</span>&#160;                        <a class="code" href="stdafx_8h.html#a6c2edf1e500e498b687567418bf4fef6">NOT_REACHED</a>();</div>
<div class="line"><a name="l01560"></a><span class="lineno"> 1560</span>&#160;        }</div>
<div class="line"><a name="l01561"></a><span class="lineno"> 1561</span>&#160;        <span class="keywordflow">return</span> new_xy;</div>
<div class="line"><a name="l01562"></a><span class="lineno"> 1562</span>&#160;}</div>
<div class="line"><a name="l01563"></a><span class="lineno"> 1563</span>&#160;</div>
<div class="line"><a name="l01569"></a><span class="lineno"><a class="line" href="classViewport.html#aba252f1b77ad16f08f7d828de99c16b1"> 1569</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classViewport.html#aba252f1b77ad16f08f7d828de99c16b1">Viewport::MoveViewport</a>(<span class="keywordtype">int</span> dx, <span class="keywordtype">int</span> dy)</div>
<div class="line"><a name="l01570"></a><span class="lineno"> 1570</span>&#160;{</div>
<div class="line"><a name="l01571"></a><span class="lineno"> 1571</span>&#160;        <span class="keywordflow">if</span> (dx == 0 &amp;&amp; dy == 0) <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01572"></a><span class="lineno"> 1572</span>&#160;</div>
<div class="line"><a name="l01573"></a><span class="lineno"> 1573</span>&#160;        <a class="code" href="structPoint.html">Point32</a> new_xy = this-&gt;<a class="code" href="classViewport.html#af3a34c6e7eb9ed1452ff1fb911bbd31a">ComputeHorizontalTranslation</a>(dx, dy);</div>
<div class="line"><a name="l01574"></a><span class="lineno"> 1574</span>&#160;        <a class="code" href="stdafx_8h.html#a43d43196463bde49cb067f5c20ab8481">int32</a> new_x = Clamp&lt;int32&gt;(new_xy.<a class="code" href="structPoint.html#af0836c7f2eec563aa7bc20d8cfa5dd2a">x</a>, 0, <a class="code" href="group__map__group.html#gae1beaf14b9effb4a54e82830c7b36616">_world</a>.<a class="code" href="classVoxelWorld.html#a5bc499626f6ca0544683535d36b5917a">GetXSize</a>() * 256 - 1);</div>
<div class="line"><a name="l01575"></a><span class="lineno"> 1575</span>&#160;        <a class="code" href="stdafx_8h.html#a43d43196463bde49cb067f5c20ab8481">int32</a> new_y = Clamp&lt;int32&gt;(new_xy.<a class="code" href="structPoint.html#a56c3dcea91f03182921eea9a5cf555a3">y</a>, 0, <a class="code" href="group__map__group.html#gae1beaf14b9effb4a54e82830c7b36616">_world</a>.<a class="code" href="classVoxelWorld.html#a4b99ca56b6b030033263b1397b2bdc41">GetYSize</a>() * 256 - 1);</div>
<div class="line"><a name="l01576"></a><span class="lineno"> 1576</span>&#160;        <span class="keywordflow">if</span> (new_x != this-&gt;<a class="code" href="classViewport.html#a5a238302d2aaeccf11d004c66637bfd7">view_pos</a>.<a class="code" href="structXYZPoint.html#a77a7984ac0a26ecb76acb94bbcf96a48">x</a> || new_y != this-&gt;view_pos.y) {</div>
<div class="line"><a name="l01577"></a><span class="lineno"> 1577</span>&#160;                this-&gt;<a class="code" href="classViewport.html#a5a238302d2aaeccf11d004c66637bfd7">view_pos</a>.<a class="code" href="structXYZPoint.html#a77a7984ac0a26ecb76acb94bbcf96a48">x</a> = new_x;</div>
<div class="line"><a name="l01578"></a><span class="lineno"> 1578</span>&#160;                this-&gt;<a class="code" href="classViewport.html#a5a238302d2aaeccf11d004c66637bfd7">view_pos</a>.<a class="code" href="structXYZPoint.html#aea2c3552caee6e81c3b007ff78834b99">y</a> = new_y;</div>
<div class="line"><a name="l01579"></a><span class="lineno"> 1579</span>&#160;                this-&gt;<a class="code" href="classWindow.html#a52b7f858345bf4ce8902e144e8076522">MarkDirty</a>();</div>
<div class="line"><a name="l01580"></a><span class="lineno"> 1580</span>&#160;        }</div>
<div class="line"><a name="l01581"></a><span class="lineno"> 1581</span>&#160;}</div>
<div class="line"><a name="l01582"></a><span class="lineno"> 1582</span>&#160;</div>
<div class="line"><a name="l01583"></a><span class="lineno"><a class="line" href="classViewport.html#ab2ab6f182f78c602adace74e2f2541b0"> 1583</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classViewport.html#ab2ab6f182f78c602adace74e2f2541b0">Viewport::OnMouseMoveEvent</a>(<span class="keyword">const</span> <a class="code" href="structPoint.html">Point16</a> &amp;pos)</div>
<div class="line"><a name="l01584"></a><span class="lineno"> 1584</span>&#160;{</div>
<div class="line"><a name="l01585"></a><span class="lineno"> 1585</span>&#160;        <a class="code" href="structPoint.html">Point16</a> old_mouse_pos = this-&gt;<a class="code" href="classViewport.html#a18b4fb0ad0bcbee66ee2658498bdcc5a">mouse_pos</a>;</div>
<div class="line"><a name="l01586"></a><span class="lineno"> 1586</span>&#160;        this-&gt;<a class="code" href="classViewport.html#a18b4fb0ad0bcbee66ee2658498bdcc5a">mouse_pos</a> = pos;</div>
<div class="line"><a name="l01587"></a><span class="lineno"> 1587</span>&#160;</div>
<div class="line"><a name="l01588"></a><span class="lineno"> 1588</span>&#160;        _mouse_modes.<a class="code" href="classMouseModes.html#ac5978eebc85e35aad57b87d123375c7a">current</a>-&gt;<a class="code" href="classMouseMode.html#aca1a120320a2266729af76f9aff0d58c">OnMouseMoveEvent</a>(<span class="keyword">this</span>, old_mouse_pos, pos);</div>
<div class="line"><a name="l01589"></a><span class="lineno"> 1589</span>&#160;}</div>
<div class="line"><a name="l01590"></a><span class="lineno"> 1590</span>&#160;</div>
<div class="line"><a name="l01591"></a><span class="lineno"><a class="line" href="classViewport.html#a9e8eb0eada3cacc538ae3a5075e96b40"> 1591</a></span>&#160;<a class="code" href="group__window__group.html#gac5457c01326811dc155c7660ba2190a0">WmMouseEvent</a> <a class="code" href="classViewport.html#a9e8eb0eada3cacc538ae3a5075e96b40">Viewport::OnMouseButtonEvent</a>(<a class="code" href="stdafx_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> state)</div>
<div class="line"><a name="l01592"></a><span class="lineno"> 1592</span>&#160;{</div>
<div class="line"><a name="l01593"></a><span class="lineno"> 1593</span>&#160;        _mouse_modes.<a class="code" href="classMouseModes.html#ac5978eebc85e35aad57b87d123375c7a">current</a>-&gt;<a class="code" href="classMouseMode.html#a63e36618cc08ec47d8d1b73cdb079704">OnMouseButtonEvent</a>(<span class="keyword">this</span>, state);</div>
<div class="line"><a name="l01594"></a><span class="lineno"> 1594</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="group__window__group.html#ggac5457c01326811dc155c7660ba2190a0a180f2ec2e3f1bd64b43178cd177722f1">WMME_NONE</a>;</div>
<div class="line"><a name="l01595"></a><span class="lineno"> 1595</span>&#160;}</div>
<div class="line"><a name="l01596"></a><span class="lineno"> 1596</span>&#160;</div>
<div class="line"><a name="l01597"></a><span class="lineno"><a class="line" href="classViewport.html#a7b202069fc87026639e7cf8ebe6156f7"> 1597</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classViewport.html#a7b202069fc87026639e7cf8ebe6156f7">Viewport::OnMouseWheelEvent</a>(<span class="keywordtype">int</span> direction)</div>
<div class="line"><a name="l01598"></a><span class="lineno"> 1598</span>&#160;{</div>
<div class="line"><a name="l01599"></a><span class="lineno"> 1599</span>&#160;        _mouse_modes.<a class="code" href="classMouseModes.html#ac5978eebc85e35aad57b87d123375c7a">current</a>-&gt;<a class="code" href="classMouseMode.html#ae1ee81cf8cbf3e667627df22dde83040">OnMouseWheelEvent</a>(<span class="keyword">this</span>, direction);</div>
<div class="line"><a name="l01600"></a><span class="lineno"> 1600</span>&#160;}</div>
<div class="line"><a name="l01601"></a><span class="lineno"> 1601</span>&#160;</div>
<div class="line"><a name="l01607"></a><span class="lineno"><a class="line" href="classMouseMode.html#a5b714fc26b93d0f2f3a8e949aedd01a8"> 1607</a></span>&#160;<a class="code" href="classMouseMode.html#a5b714fc26b93d0f2f3a8e949aedd01a8">MouseMode::MouseMode</a>(<a class="code" href="group__window__group.html#ga58ad3159a8b1f24a1d3497efcd541b69">WindowTypes</a> p_wtype, <a class="code" href="group__viewport__group.html#ga1e53aab612718f53f9838d49f13be786">ViewportMouseMode</a> p_mode) : wtype(p_wtype), mode(p_mode)</div>
<div class="line"><a name="l01608"></a><span class="lineno"> 1608</span>&#160;{</div>
<div class="line"><a name="l01609"></a><span class="lineno"> 1609</span>&#160;}</div>
<div class="line"><a name="l01610"></a><span class="lineno"> 1610</span>&#160;</div>
<div class="line"><a name="l01611"></a><span class="lineno"> 1611</span>&#160;MouseMode::~MouseMode()</div>
<div class="line"><a name="l01612"></a><span class="lineno"> 1612</span>&#160;{</div>
<div class="line"><a name="l01613"></a><span class="lineno"> 1613</span>&#160;}</div>
<div class="line"><a name="l01614"></a><span class="lineno"> 1614</span>&#160;</div>
<div class="line"><a name="l01621"></a><span class="lineno"><a class="line" href="classMouseMode.html#aca1a120320a2266729af76f9aff0d58c"> 1621</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classMouseMode.html#aca1a120320a2266729af76f9aff0d58c">MouseMode::OnMouseMoveEvent</a>(<a class="code" href="classViewport.html">Viewport</a> *vp, <span class="keyword">const</span> <a class="code" href="structPoint.html">Point16</a> &amp;old_pos, <span class="keyword">const</span> <a class="code" href="structPoint.html">Point16</a> &amp;pos)</div>
<div class="line"><a name="l01622"></a><span class="lineno"> 1622</span>&#160;{</div>
<div class="line"><a name="l01623"></a><span class="lineno"> 1623</span>&#160;}</div>
<div class="line"><a name="l01624"></a><span class="lineno"> 1624</span>&#160;</div>
<div class="line"><a name="l01630"></a><span class="lineno"><a class="line" href="classMouseMode.html#a63e36618cc08ec47d8d1b73cdb079704"> 1630</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classMouseMode.html#a63e36618cc08ec47d8d1b73cdb079704">MouseMode::OnMouseButtonEvent</a>(<a class="code" href="classViewport.html">Viewport</a> *vp, <a class="code" href="stdafx_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> state)</div>
<div class="line"><a name="l01631"></a><span class="lineno"> 1631</span>&#160;{</div>
<div class="line"><a name="l01632"></a><span class="lineno"> 1632</span>&#160;}</div>
<div class="line"><a name="l01633"></a><span class="lineno"> 1633</span>&#160;</div>
<div class="line"><a name="l01639"></a><span class="lineno"><a class="line" href="classMouseMode.html#ae1ee81cf8cbf3e667627df22dde83040"> 1639</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classMouseMode.html#ae1ee81cf8cbf3e667627df22dde83040">MouseMode::OnMouseWheelEvent</a>(<a class="code" href="classViewport.html">Viewport</a> *vp, <span class="keywordtype">int</span> direction)</div>
<div class="line"><a name="l01640"></a><span class="lineno"> 1640</span>&#160;{</div>
<div class="line"><a name="l01641"></a><span class="lineno"> 1641</span>&#160;}</div>
<div class="line"><a name="l01642"></a><span class="lineno"> 1642</span>&#160;</div>
<div class="line"><a name="l01643"></a><span class="lineno"> 1643</span>&#160;DefaultMouseMode::DefaultMouseMode() : <a class="code" href="classMouseMode.html">MouseMode</a>(<a class="code" href="group__window__group.html#gga58ad3159a8b1f24a1d3497efcd541b69a5b978e5218b282017d08c1144c9beb37">WC_NONE</a>, <a class="code" href="group__viewport__group.html#gga1e53aab612718f53f9838d49f13be786a405766c49b89f731b71be9b7b1b6f469">MM_INACTIVE</a>)</div>
<div class="line"><a name="l01644"></a><span class="lineno"> 1644</span>&#160;{</div>
<div class="line"><a name="l01645"></a><span class="lineno"> 1645</span>&#160;}</div>
<div class="line"><a name="l01646"></a><span class="lineno"> 1646</span>&#160;</div>
<div class="line"><a name="l01647"></a><span class="lineno"><a class="line" href="classDefaultMouseMode.html#afd528ebd02c81ea9e1a219e5f9479da6"> 1647</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classDefaultMouseMode.html#afd528ebd02c81ea9e1a219e5f9479da6">DefaultMouseMode::MayActivateMode</a>()</div>
<div class="line"><a name="l01648"></a><span class="lineno"> 1648</span>&#160;{</div>
<div class="line"><a name="l01649"></a><span class="lineno"> 1649</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01650"></a><span class="lineno"> 1650</span>&#160;}</div>
<div class="line"><a name="l01651"></a><span class="lineno"> 1651</span>&#160;</div>
<div class="line"><a name="l01652"></a><span class="lineno"><a class="line" href="classDefaultMouseMode.html#a8670baff759fba441a05d4d56af54333"> 1652</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classDefaultMouseMode.html#a8670baff759fba441a05d4d56af54333">DefaultMouseMode::ActivateMode</a>(<span class="keyword">const</span> <a class="code" href="structPoint.html">Point16</a> &amp;pos)</div>
<div class="line"><a name="l01653"></a><span class="lineno"> 1653</span>&#160;{</div>
<div class="line"><a name="l01654"></a><span class="lineno"> 1654</span>&#160;}</div>
<div class="line"><a name="l01655"></a><span class="lineno"> 1655</span>&#160;</div>
<div class="line"><a name="l01656"></a><span class="lineno"><a class="line" href="classDefaultMouseMode.html#aacc2b36c5e758d42c8cafea7b23ef211"> 1656</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classDefaultMouseMode.html#aacc2b36c5e758d42c8cafea7b23ef211">DefaultMouseMode::LeaveMode</a>()</div>
<div class="line"><a name="l01657"></a><span class="lineno"> 1657</span>&#160;{</div>
<div class="line"><a name="l01658"></a><span class="lineno"> 1658</span>&#160;}</div>
<div class="line"><a name="l01659"></a><span class="lineno"> 1659</span>&#160;</div>
<div class="line"><a name="l01660"></a><span class="lineno"><a class="line" href="classDefaultMouseMode.html#aef433bc4835a11abac004999fd409b97"> 1660</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classDefaultMouseMode.html#aef433bc4835a11abac004999fd409b97">DefaultMouseMode::EnableCursors</a>()</div>
<div class="line"><a name="l01661"></a><span class="lineno"> 1661</span>&#160;{</div>
<div class="line"><a name="l01662"></a><span class="lineno"> 1662</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01663"></a><span class="lineno"> 1663</span>&#160;}</div>
<div class="line"><a name="l01664"></a><span class="lineno"> 1664</span>&#160;</div>
<div class="line"><a name="l01665"></a><span class="lineno"> 1665</span>&#160;MouseModes::MouseModes()</div>
<div class="line"><a name="l01666"></a><span class="lineno"> 1666</span>&#160;{</div>
<div class="line"><a name="l01667"></a><span class="lineno"> 1667</span>&#160;        this-&gt;<a class="code" href="classMouseModes.html#a16db84eb6ab33fd242373b7f1f6c45e6">main_display</a> = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01668"></a><span class="lineno"> 1668</span>&#160;        this-&gt;<a class="code" href="classMouseModes.html#ac5978eebc85e35aad57b87d123375c7a">current</a> = &amp;<a class="code" href="classMouseModes.html#a92db6b46adf07a39ebd580dda02f17dd">default_mode</a>;</div>
<div class="line"><a name="l01669"></a><span class="lineno"> 1669</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="group__viewport__group.html#gga1e53aab612718f53f9838d49f13be786ad119479c57cebad54988e7241f118396">MM_COUNT</a>; i++) this-&gt;<a class="code" href="classMouseModes.html#a9226265f6e91d19901df74a7c705b2ca">modes</a>[i] = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01670"></a><span class="lineno"> 1670</span>&#160;}</div>
<div class="line"><a name="l01671"></a><span class="lineno"> 1671</span>&#160;</div>
<div class="line"><a name="l01676"></a><span class="lineno"><a class="line" href="classMouseModes.html#a6a315b570f089f4aeae9cbf503973cff"> 1676</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classMouseModes.html#a6a315b570f089f4aeae9cbf503973cff">MouseModes::RegisterMode</a>(<a class="code" href="classMouseMode.html">MouseMode</a> *mm)</div>
<div class="line"><a name="l01677"></a><span class="lineno"> 1677</span>&#160;{</div>
<div class="line"><a name="l01678"></a><span class="lineno"> 1678</span>&#160;        assert(mm-&gt;<a class="code" href="classMouseMode.html#a5861718b2dd403c8a8d80b6847cae318">mode</a> &lt; <a class="code" href="group__viewport__group.html#gga1e53aab612718f53f9838d49f13be786ad119479c57cebad54988e7241f118396">MM_COUNT</a>);</div>
<div class="line"><a name="l01679"></a><span class="lineno"> 1679</span>&#160;        assert(this-&gt;<a class="code" href="classMouseModes.html#a9226265f6e91d19901df74a7c705b2ca">modes</a>[mm-&gt;<a class="code" href="classMouseMode.html#a5861718b2dd403c8a8d80b6847cae318">mode</a>] == <span class="keyword">nullptr</span>);</div>
<div class="line"><a name="l01680"></a><span class="lineno"> 1680</span>&#160;        this-&gt;<a class="code" href="classMouseModes.html#a9226265f6e91d19901df74a7c705b2ca">modes</a>[mm-&gt;<a class="code" href="classMouseMode.html#a5861718b2dd403c8a8d80b6847cae318">mode</a>] = mm;</div>
<div class="line"><a name="l01681"></a><span class="lineno"> 1681</span>&#160;}</div>
<div class="line"><a name="l01682"></a><span class="lineno"> 1682</span>&#160;</div>
<div class="line"><a name="l01688"></a><span class="lineno"><a class="line" href="viewport_8h.html#a168b8e1038efc200816524bab3092311"> 1688</a></span>&#160;<a class="code" href="classViewport.html">Viewport</a> *<a class="code" href="viewport_8cpp.html#a168b8e1038efc200816524bab3092311">GetViewport</a>()</div>
<div class="line"><a name="l01689"></a><span class="lineno"> 1689</span>&#160;{</div>
<div class="line"><a name="l01690"></a><span class="lineno"> 1690</span>&#160;        <span class="keywordflow">return</span> _mouse_modes.<a class="code" href="classMouseModes.html#a16db84eb6ab33fd242373b7f1f6c45e6">main_display</a>;</div>
<div class="line"><a name="l01691"></a><span class="lineno"> 1691</span>&#160;}</div>
<div class="line"><a name="l01692"></a><span class="lineno"> 1692</span>&#160;</div>
<div class="line"><a name="l01698"></a><span class="lineno"><a class="line" href="viewport_8h.html#a2fce31cede1ac0f401ed6a6325e672e1"> 1698</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="viewport_8cpp.html#ac9d508bfc28352f0f790bd6eb7567186">MarkVoxelDirty</a>(<span class="keyword">const</span> <a class="code" href="structXYZPoint.html">XYZPoint16</a> &amp;voxel_pos, <a class="code" href="stdafx_8h.html#a259fa4834387bd68627ddf37bb3ebdb9">int16</a> height)</div>
<div class="line"><a name="l01699"></a><span class="lineno"> 1699</span>&#160;{</div>
<div class="line"><a name="l01700"></a><span class="lineno"> 1700</span>&#160;        <a class="code" href="classViewport.html">Viewport</a> *vp = <a class="code" href="viewport_8cpp.html#a168b8e1038efc200816524bab3092311">GetViewport</a>();</div>
<div class="line"><a name="l01701"></a><span class="lineno"> 1701</span>&#160;        <span class="keywordflow">if</span> (vp != <span class="keyword">nullptr</span>) vp-&gt;<a class="code" href="classViewport.html#a8f1babfcd8b2768b3251c0c879afe19b">MarkVoxelDirty</a>(voxel_pos, height);</div>
<div class="line"><a name="l01702"></a><span class="lineno"> 1702</span>&#160;}</div>
<div class="line"><a name="l01703"></a><span class="lineno"> 1703</span>&#160;</div>
<div class="line"><a name="l01709"></a><span class="lineno"><a class="line" href="classMouseModes.html#a017410b133ee48dfb89c1e3c89d9b382"> 1709</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classMouseModes.html#a017410b133ee48dfb89c1e3c89d9b382">MouseModes::SetViewportMousemode</a>()</div>
<div class="line"><a name="l01710"></a><span class="lineno"> 1710</span>&#160;{</div>
<div class="line"><a name="l01711"></a><span class="lineno"> 1711</span>&#160;        <span class="keywordflow">if</span> (this-&gt;<a class="code" href="classMouseModes.html#a16db84eb6ab33fd242373b7f1f6c45e6">main_display</a> == <span class="keyword">nullptr</span>) <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01712"></a><span class="lineno"> 1712</span>&#160;</div>
<div class="line"><a name="l01713"></a><span class="lineno"> 1713</span>&#160;        <span class="comment">/* First try all windows from top to bottom. */</span></div>
<div class="line"><a name="l01714"></a><span class="lineno"> 1714</span>&#160;        <a class="code" href="classWindow.html">Window</a> *w = <a class="code" href="group__window__group.html#gad7cee9ea46c04d30488a7264843b3010">_window_manager</a>.<a class="code" href="classWindowManager.html#aa0e086aeee06994b6390093491149801">top</a>;</div>
<div class="line"><a name="l01715"></a><span class="lineno"> 1715</span>&#160;        <span class="keywordflow">while</span> (w != <span class="keyword">nullptr</span>) {</div>
<div class="line"><a name="l01716"></a><span class="lineno"> 1716</span>&#160;                <span class="keywordflow">for</span> (<a class="code" href="stdafx_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a> i = 0; i &lt; <a class="code" href="stdafx_8h.html#ae72e6e2ae552a721f8916813a92f723b">lengthof</a>(this-&gt;<a class="code" href="classMouseModes.html#a9226265f6e91d19901df74a7c705b2ca">modes</a>); i++) {</div>
<div class="line"><a name="l01717"></a><span class="lineno"> 1717</span>&#160;                        <a class="code" href="classMouseMode.html">MouseMode</a> *mm = this-&gt;<a class="code" href="classMouseModes.html#a9226265f6e91d19901df74a7c705b2ca">modes</a>[i];</div>
<div class="line"><a name="l01718"></a><span class="lineno"> 1718</span>&#160;                        <span class="keywordflow">if</span> (mm != <span class="keyword">nullptr</span> &amp;&amp; mm-&gt;<a class="code" href="classMouseMode.html#aaa7f13619e5a1bcebbfa3789f5ef1da9">wtype</a> == w-&gt;<a class="code" href="classWindow.html#a1b03fb3cf0a71a48f34c31ec691a50ef">wtype</a> &amp;&amp; mm-&gt;<a class="code" href="classMouseMode.html#a0278e5a0f9ec226902d0e0bd27ffb65c">MayActivateMode</a>()) {</div>
<div class="line"><a name="l01719"></a><span class="lineno"> 1719</span>&#160;                                this-&gt;<a class="code" href="classMouseModes.html#a02982918a7f422b77fa2500d9bace213">SwitchMode</a>(mm);</div>
<div class="line"><a name="l01720"></a><span class="lineno"> 1720</span>&#160;                                <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01721"></a><span class="lineno"> 1721</span>&#160;                        }</div>
<div class="line"><a name="l01722"></a><span class="lineno"> 1722</span>&#160;                }</div>
<div class="line"><a name="l01723"></a><span class="lineno"> 1723</span>&#160;                w = w-&gt;<a class="code" href="classWindow.html#a0f262fea5cd10c0382ad8a0e5cd9ff45">lower</a>;</div>
<div class="line"><a name="l01724"></a><span class="lineno"> 1724</span>&#160;        }</div>
<div class="line"><a name="l01725"></a><span class="lineno"> 1725</span>&#160;        <span class="comment">/* Try all mouse modes without a window. */</span></div>
<div class="line"><a name="l01726"></a><span class="lineno"> 1726</span>&#160;        <span class="keywordflow">for</span> (<a class="code" href="stdafx_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a> i = 0; i &lt; <a class="code" href="stdafx_8h.html#ae72e6e2ae552a721f8916813a92f723b">lengthof</a>(this-&gt;<a class="code" href="classMouseModes.html#a9226265f6e91d19901df74a7c705b2ca">modes</a>); i++) {</div>
<div class="line"><a name="l01727"></a><span class="lineno"> 1727</span>&#160;                <a class="code" href="classMouseMode.html">MouseMode</a> *mm = this-&gt;<a class="code" href="classMouseModes.html#a9226265f6e91d19901df74a7c705b2ca">modes</a>[i];</div>
<div class="line"><a name="l01728"></a><span class="lineno"> 1728</span>&#160;                <span class="keywordflow">if</span> (mm != <span class="keyword">nullptr</span> &amp;&amp; mm-&gt;<a class="code" href="classMouseMode.html#aaa7f13619e5a1bcebbfa3789f5ef1da9">wtype</a> == <a class="code" href="group__window__group.html#gga58ad3159a8b1f24a1d3497efcd541b69a5b978e5218b282017d08c1144c9beb37">WC_NONE</a> &amp;&amp; mm-&gt;<a class="code" href="classMouseMode.html#a0278e5a0f9ec226902d0e0bd27ffb65c">MayActivateMode</a>()) {</div>
<div class="line"><a name="l01729"></a><span class="lineno"> 1729</span>&#160;                        this-&gt;<a class="code" href="classMouseModes.html#a02982918a7f422b77fa2500d9bace213">SwitchMode</a>(mm);</div>
<div class="line"><a name="l01730"></a><span class="lineno"> 1730</span>&#160;                        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01731"></a><span class="lineno"> 1731</span>&#160;                }</div>
<div class="line"><a name="l01732"></a><span class="lineno"> 1732</span>&#160;        }</div>
<div class="line"><a name="l01733"></a><span class="lineno"> 1733</span>&#160;        <span class="comment">/* Switch to the default mouse mode unconditionally. */</span></div>
<div class="line"><a name="l01734"></a><span class="lineno"> 1734</span>&#160;        this-&gt;<a class="code" href="classMouseModes.html#a02982918a7f422b77fa2500d9bace213">SwitchMode</a>(&amp;<a class="code" href="classMouseModes.html#a92db6b46adf07a39ebd580dda02f17dd">default_mode</a>);</div>
<div class="line"><a name="l01735"></a><span class="lineno"> 1735</span>&#160;}</div>
<div class="line"><a name="l01736"></a><span class="lineno"> 1736</span>&#160;</div>
<div class="line"><a name="l01741"></a><span class="lineno"><a class="line" href="classMouseModes.html#a064eb03f4a6d5f8111128ffc75df2452"> 1741</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classMouseModes.html#a064eb03f4a6d5f8111128ffc75df2452">MouseModes::SetMouseMode</a>(<a class="code" href="group__viewport__group.html#ga1e53aab612718f53f9838d49f13be786">ViewportMouseMode</a> mode)</div>
<div class="line"><a name="l01742"></a><span class="lineno"> 1742</span>&#160;{</div>
<div class="line"><a name="l01743"></a><span class="lineno"> 1743</span>&#160;        <span class="keywordflow">for</span> (<a class="code" href="stdafx_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a> i = 0; i &lt; <a class="code" href="stdafx_8h.html#ae72e6e2ae552a721f8916813a92f723b">lengthof</a>(this-&gt;<a class="code" href="classMouseModes.html#a9226265f6e91d19901df74a7c705b2ca">modes</a>); i++) {</div>
<div class="line"><a name="l01744"></a><span class="lineno"> 1744</span>&#160;                <a class="code" href="classMouseMode.html">MouseMode</a> *mm = this-&gt;<a class="code" href="classMouseModes.html#a9226265f6e91d19901df74a7c705b2ca">modes</a>[i];</div>
<div class="line"><a name="l01745"></a><span class="lineno"> 1745</span>&#160;                <span class="keywordflow">if</span> (mm != <span class="keyword">nullptr</span> &amp;&amp; mm-&gt;<a class="code" href="classMouseMode.html#a5861718b2dd403c8a8d80b6847cae318">mode</a> == mode) {</div>
<div class="line"><a name="l01746"></a><span class="lineno"> 1746</span>&#160;                        <span class="keywordflow">if</span> (mm-&gt;<a class="code" href="classMouseMode.html#a0278e5a0f9ec226902d0e0bd27ffb65c">MayActivateMode</a>()) this-&gt;<a class="code" href="classMouseModes.html#a02982918a7f422b77fa2500d9bace213">SwitchMode</a>(mm);</div>
<div class="line"><a name="l01747"></a><span class="lineno"> 1747</span>&#160;                        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01748"></a><span class="lineno"> 1748</span>&#160;                }</div>
<div class="line"><a name="l01749"></a><span class="lineno"> 1749</span>&#160;        }</div>
<div class="line"><a name="l01750"></a><span class="lineno"> 1750</span>&#160;}</div>
<div class="line"><a name="l01751"></a><span class="lineno"> 1751</span>&#160;</div>
<div class="line"><a name="l01757"></a><span class="lineno"><a class="line" href="classMouseModes.html#a02982918a7f422b77fa2500d9bace213"> 1757</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classMouseModes.html#a02982918a7f422b77fa2500d9bace213">MouseModes::SwitchMode</a>(<a class="code" href="classMouseMode.html">MouseMode</a> *new_mode)</div>
<div class="line"><a name="l01758"></a><span class="lineno"> 1758</span>&#160;{</div>
<div class="line"><a name="l01759"></a><span class="lineno"> 1759</span>&#160;        assert(new_mode-&gt;<a class="code" href="classMouseMode.html#a0278e5a0f9ec226902d0e0bd27ffb65c">MayActivateMode</a>());</div>
<div class="line"><a name="l01760"></a><span class="lineno"> 1760</span>&#160;        <span class="keywordflow">if</span> (this-&gt;<a class="code" href="classMouseModes.html#a16db84eb6ab33fd242373b7f1f6c45e6">main_display</a> == <span class="keyword">nullptr</span> || new_mode == this-&gt;<a class="code" href="classMouseModes.html#ac5978eebc85e35aad57b87d123375c7a">current</a>) <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01761"></a><span class="lineno"> 1761</span>&#160;</div>
<div class="line"><a name="l01762"></a><span class="lineno"> 1762</span>&#160;        this-&gt;<a class="code" href="classMouseModes.html#ac5978eebc85e35aad57b87d123375c7a">current</a>-&gt;<a class="code" href="classMouseMode.html#a36e8aab8b458d9d1973388e5813a1af4">LeaveMode</a>();</div>
<div class="line"><a name="l01763"></a><span class="lineno"> 1763</span>&#160;        this-&gt;<a class="code" href="classMouseModes.html#ac5978eebc85e35aad57b87d123375c7a">current</a> = new_mode;</div>
<div class="line"><a name="l01764"></a><span class="lineno"> 1764</span>&#160;        this-&gt;<a class="code" href="classMouseModes.html#ac5978eebc85e35aad57b87d123375c7a">current</a>-&gt;<a class="code" href="classMouseMode.html#ac28b070af073b693313ab39557d64d7a">ActivateMode</a>(this-&gt;<a class="code" href="classMouseModes.html#a16db84eb6ab33fd242373b7f1f6c45e6">main_display</a>-&gt;<a class="code" href="classViewport.html#a18b4fb0ad0bcbee66ee2658498bdcc5a">mouse_pos</a>);</div>
<div class="line"><a name="l01765"></a><span class="lineno"> 1765</span>&#160;}</div>
<div class="line"><a name="l01766"></a><span class="lineno"> 1766</span>&#160;</div>
<div class="line"><a name="l01771"></a><span class="lineno"><a class="line" href="classMouseModes.html#ab5d6b997165a7f1b2eebda43d23d38a4"> 1771</a></span>&#160;<a class="code" href="group__viewport__group.html#ga1e53aab612718f53f9838d49f13be786">ViewportMouseMode</a> <a class="code" href="classMouseModes.html#ab5d6b997165a7f1b2eebda43d23d38a4">MouseModes::GetMouseMode</a>()</div>
<div class="line"><a name="l01772"></a><span class="lineno"> 1772</span>&#160;{</div>
<div class="line"><a name="l01773"></a><span class="lineno"> 1773</span>&#160;        <span class="keywordflow">return</span> this-&gt;<a class="code" href="classMouseModes.html#ac5978eebc85e35aad57b87d123375c7a">current</a>-&gt;<a class="code" href="classMouseMode.html#a5861718b2dd403c8a8d80b6847cae318">mode</a>;</div>
<div class="line"><a name="l01774"></a><span class="lineno"> 1774</span>&#160;}</div>
<div class="line"><a name="l01775"></a><span class="lineno"> 1775</span>&#160;</div>
<div class="line"><a name="l01781"></a><span class="lineno"><a class="line" href="group__viewport__group.html#ga0dc4080a39ea5f89477c0989aeb98fff"> 1781</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="group__viewport__group.html#ga0dc4080a39ea5f89477c0989aeb98fff">ShowMainDisplay</a>(<span class="keyword">const</span> <a class="code" href="structXYZPoint.html">XYZPoint32</a> &amp;view_pos)</div>
<div class="line"><a name="l01782"></a><span class="lineno"> 1782</span>&#160;{</div>
<div class="line"><a name="l01783"></a><span class="lineno"> 1783</span>&#160;        <span class="keyword">new</span> <a class="code" href="classViewport.html">Viewport</a>(view_pos);</div>
<div class="line"><a name="l01784"></a><span class="lineno"> 1784</span>&#160;        _mouse_modes.<a class="code" href="classMouseModes.html#a017410b133ee48dfb89c1e3c89d9b382">SetViewportMousemode</a>();</div>
<div class="line"><a name="l01785"></a><span class="lineno"> 1785</span>&#160;}</div>
<div class="line"><a name="l01786"></a><span class="lineno"> 1786</span>&#160;</div>
<div class="line"><a name="l01788"></a><span class="lineno"><a class="line" href="viewport_8cpp.html#a0dafeaffbb866e3726bb18cdae3d2a11"> 1788</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="viewport_8cpp.html#a0dafeaffbb866e3726bb18cdae3d2a11">InitMouseModes</a>()</div>
<div class="line"><a name="l01789"></a><span class="lineno"> 1789</span>&#160;{</div>
<div class="line"><a name="l01790"></a><span class="lineno"> 1790</span>&#160;        _mouse_modes.<a class="code" href="classMouseModes.html#a6a315b570f089f4aeae9cbf503973cff">RegisterMode</a>(&amp;<a class="code" href="terraform_8cpp.html#ab25c1f13e11bd2df46101e44b3e1760e">_terraformer</a>);</div>
<div class="line"><a name="l01791"></a><span class="lineno"> 1791</span>&#160;        _mouse_modes.<a class="code" href="classMouseModes.html#a6a315b570f089f4aeae9cbf503973cff">RegisterMode</a>(&amp;<a class="code" href="path__build_8cpp.html#a27e5e590cb1ddac2214842a359bda80b">_path_builder</a>);</div>
<div class="line"><a name="l01792"></a><span class="lineno"> 1792</span>&#160;        _mouse_modes.<a class="code" href="classMouseModes.html#a6a315b570f089f4aeae9cbf503973cff">RegisterMode</a>(&amp;<a class="code" href="ride__gui_8cpp.html#a338a982dd3d6b4f5919647364e1b6f7c">_shop_placer</a>);</div>
<div class="line"><a name="l01793"></a><span class="lineno"> 1793</span>&#160;        _mouse_modes.<a class="code" href="classMouseModes.html#a6a315b570f089f4aeae9cbf503973cff">RegisterMode</a>(&amp;<a class="code" href="select__mode_8cpp.html#af1238e40327ed9b3c9d021629a4f5f3d">_select_mousemode</a>);</div>
<div class="line"><a name="l01794"></a><span class="lineno"> 1794</span>&#160;        _mouse_modes.<a class="code" href="classMouseModes.html#a6a315b570f089f4aeae9cbf503973cff">RegisterMode</a>(&amp;<a class="code" href="coaster__build_8h.html#ada412247821f7dec538f27e3266c179a">_coaster_builder</a>);</div>
<div class="line"><a name="l01795"></a><span class="lineno"> 1795</span>&#160;        _mouse_modes.<a class="code" href="classMouseModes.html#a6a315b570f089f4aeae9cbf503973cff">RegisterMode</a>(&amp;<a class="code" href="fence__build_8cpp.html#aca68d93e48151cc09b159acc3c865e24">_fence_builder</a>);</div>
<div class="line"><a name="l01796"></a><span class="lineno"> 1796</span>&#160;}</div>
<div class="ttc" id="fence__build_8h_html"><div class="ttname"><a href="fence__build_8h.html">fence_build.h</a></div><div class="ttdoc">Fence building manager declarations. </div></div>
<div class="ttc" id="classWindow_html_a52b7f858345bf4ce8902e144e8076522"><div class="ttname"><a href="classWindow.html#a52b7f858345bf4ce8902e144e8076522">Window::MarkDirty</a></div><div class="ttdeci">void MarkDirty()</div><div class="ttdoc">Mark windows as being dirty (needing a repaint). </div><div class="ttdef"><b>Definition:</b> <a href="window_8cpp_source.html#l00228">window.cpp:228</a></div></div>
<div class="ttc" id="map_8h_html_aea346c5b3fab893e717a4d10fd35cca6"><div class="ttname"><a href="map_8h.html#aea346c5b3fab893e717a4d10fd35cca6">HasValidPath</a></div><div class="ttdeci">static bool HasValidPath(uint16 instance_data)</div><div class="ttdoc">Does the instance data indicate a valid path (that is, a voxel with an actual path tile)...</div><div class="ttdef"><b>Definition:</b> <a href="map_8h_source.html#l00368">map.h:368</a></div></div>
<div class="ttc" id="palette_8h_html_a17856d397bca4be306f035b47f5abe56"><div class="ttname"><a href="palette_8h.html#a17856d397bca4be306f035b47f5abe56">MakeRGBA</a></div><div class="ttdeci">static uint32 MakeRGBA(uint8 r, uint8 g, uint8 b, uint8 a)</div><div class="ttdoc">Construct a 32bpp pixel value from its components. </div><div class="ttdef"><b>Definition:</b> <a href="palette_8h_source.html#l00033">palette.h:33</a></div></div>
<div class="ttc" id="classMultiCursor_html_ae7741fd6e48ad4b55a9e113a71f37740"><div class="ttname"><a href="classMultiCursor.html#ae7741fd6e48ad4b55a9e113a71f37740">MultiCursor::ClearZPositions</a></div><div class="ttdeci">void ClearZPositions()</div><div class="ttdoc">Clear the z-positions cache. </div><div class="ttdef"><b>Definition:</b> <a href="viewport_8cpp_source.html#l00548">viewport.cpp:548</a></div></div>
<div class="ttc" id="classSpriteCollector_html_a9f426c1aa07df9863fd3ffe4064e6dc4"><div class="ttname"><a href="classSpriteCollector.html#a9f426c1aa07df9863fd3ffe4064e6dc4">SpriteCollector::SetupSupports</a></div><div class="ttdeci">void SetupSupports(const VoxelStack *stack, uint xpos, uint ypos) override</div><div class="ttdoc">Decide where supports should be raised. </div><div class="ttdef"><b>Definition:</b> <a href="viewport_8cpp_source.html#l00800">viewport.cpp:800</a></div></div>
<div class="ttc" id="classViewport_html_a8f6f78564c1b7397703ce96eb6ea2145"><div class="ttname"><a href="classViewport.html#a8f6f78564c1b7397703ce96eb6ea2145">Viewport::DisableWorldAdditions</a></div><div class="ttdeci">void DisableWorldAdditions()</div><div class="ttdoc">Disable flashing display of showing proposed game world additions to the player. </div><div class="ttdef"><b>Definition:</b> <a href="viewport_8cpp_source.html#l00398">viewport.cpp:398</a></div></div>
<div class="ttc" id="viewport_8cpp_html_a05568a347fb205b4a83b7c4b02ec518d"><div class="ttname"><a href="viewport_8cpp.html#a05568a347fb205b4a83b7c4b02ec518d">ComputeYFunction</a></div><div class="ttdeci">static int32 ComputeYFunction(int32 x, int32 y, int32 z, ViewOrientation orient, uint16 width, uint16 height)</div><div class="ttdoc">Convert 3D position to the vertical 2D position. </div><div class="ttdef"><b>Definition:</b> <a href="viewport_8cpp_source.html#l00143">viewport.cpp:143</a></div></div>
<div class="ttc" id="classVoxelCollector_html_a5e598f88e6d585180f9fc94964202167"><div class="ttname"><a href="classVoxelCollector.html#a5e598f88e6d585180f9fc94964202167">VoxelCollector::ComputeY</a></div><div class="ttdeci">int32 ComputeY(int32 x, int32 y, int32 z)</div><div class="ttdoc">Convert 3D position to the vertical 2D position. </div><div class="ttdef"><b>Definition:</b> <a href="viewport_8cpp_source.html#l00185">viewport.cpp:185</a></div></div>
<div class="ttc" id="classFinderData_html_a344e4f4b348a5549f2da4c66f69aa373"><div class="ttname"><a href="classFinderData.html#a344e4f4b348a5549f2da4c66f69aa373">FinderData::allowed</a></div><div class="ttdeci">ClickableSprite allowed</div><div class="ttdoc">Bit-set of sprite-types looking for. </div><div class="ttdef"><b>Definition:</b> <a href="viewport_8h_source.html#l00112">viewport.h:112</a></div></div>
<div class="ttc" id="group__map__group_html_gga29bb8f9503c34074bad3c762c92ee68ba63bdd25665e0a98d96e4cda2147b2135"><div class="ttname"><a href="group__map__group.html#gga29bb8f9503c34074bad3c762c92ee68ba63bdd25665e0a98d96e4cda2147b2135">EDGE_NW</a></div><div class="ttdoc">North-west edge. </div><div class="ttdef"><b>Definition:</b> <a href="tile_8h_source.html#l00122">tile.h:122</a></div></div>
<div class="ttc" id="structRectangle_html_a73dcb7553002488af2f8a61a441040dc"><div class="ttname"><a href="structRectangle.html#a73dcb7553002488af2f8a61a441040dc">Rectangle::RestrictTo</a></div><div class="ttdeci">void RestrictTo(const Rectangle&lt; PT, SZ &gt; &amp;rect)</div><div class="ttdoc">Restrict the rectangle to the given area (this is, ensure it is completely inside the provided area)...</div><div class="ttdef"><b>Definition:</b> <a href="geometry_8h_source.html#l00300">geometry.h:300</a></div></div>
<div class="ttc" id="map_8h_html_ad44f39a179da4e3289440f17d6cde5b3"><div class="ttname"><a href="map_8h.html#ad44f39a179da4e3289440f17d6cde5b3">GetImplodedPathSlope</a></div><div class="ttdeci">static PathSprites GetImplodedPathSlope(uint16 instance_data)</div><div class="ttdoc">Extract the imploded path slope from the instance data. </div><div class="ttdef"><b>Definition:</b> <a href="map_8h_source.html#l00390">map.h:390</a></div></div>
<div class="ttc" id="classMouseModes_html_a92db6b46adf07a39ebd580dda02f17dd"><div class="ttname"><a href="classMouseModes.html#a92db6b46adf07a39ebd580dda02f17dd">MouseModes::default_mode</a></div><div class="ttdeci">DefaultMouseMode default_mode</div><div class="ttdoc">Dummy mouse mode (MM_INACTIVE mode). </div><div class="ttdef"><b>Definition:</b> <a href="viewport_8h_source.html#l00331">viewport.h:331</a></div></div>
<div class="ttc" id="math__func_8h_html"><div class="ttname"><a href="math__func_8h.html">math_func.h</a></div><div class="ttdoc">Generic computation functions. </div></div>
<div class="ttc" id="structVoxel_html_adf0e5dcd80753791808eca30dc90879a"><div class="ttname"><a href="structVoxel.html#adf0e5dcd80753791808eca30dc90879a">Voxel::GetGroundSlope</a></div><div class="ttdeci">uint8 GetGroundSlope() const </div><div class="ttdoc">Get the imploded ground slope of a surface voxel. </div><div class="ttdef"><b>Definition:</b> <a href="map_8h_source.html#l00215">map.h:215</a></div></div>
<div class="ttc" id="structXYZPoint_html_a77a7984ac0a26ecb76acb94bbcf96a48"><div class="ttname"><a href="structXYZPoint.html#a77a7984ac0a26ecb76acb94bbcf96a48">XYZPoint::x</a></div><div class="ttdeci">CT x</div><div class="ttdoc">X coordinate. </div><div class="ttdef"><b>Definition:</b> <a href="geometry_8h_source.html#l00100">geometry.h:100</a></div></div>
<div class="ttc" id="classPixelFinder_html"><div class="ttname"><a href="classPixelFinder.html">PixelFinder</a></div><div class="ttdoc">Find the sprite and pixel under the mouse cursor. </div><div class="ttdef"><b>Definition:</b> <a href="viewport_8cpp_source.html#l00288">viewport.cpp:288</a></div></div>
<div class="ttc" id="classFinderData_html_a3f4bda28f0eaac766e7224bc4e1e0ec5"><div class="ttname"><a href="classFinderData.html#a3f4bda28f0eaac766e7224bc4e1e0ec5">FinderData::select</a></div><div class="ttdeci">GroundTilePart select</div><div class="ttdoc">What part to select of a ground tile. </div><div class="ttdef"><b>Definition:</b> <a href="viewport_8h_source.html#l00113">viewport.h:113</a></div></div>
<div class="ttc" id="group__viewport__group_html_ggabbe637356c8cb749a9726f13658031faae1019b8e1fe16fadce868506261fd753"><div class="ttname"><a href="group__viewport__group.html#ggabbe637356c8cb749a9726f13658031faae1019b8e1fe16fadce868506261fd753">CUR_TYPE_TILE</a></div><div class="ttdoc">Show a tile highlight. </div><div class="ttdef"><b>Definition:</b> <a href="viewport_8h_source.html#l00046">viewport.h:46</a></div></div>
<div class="ttc" id="classViewport_html_af3a34c6e7eb9ed1452ff1fb911bbd31a"><div class="ttname"><a href="classViewport.html#af3a34c6e7eb9ed1452ff1fb911bbd31a">Viewport::ComputeHorizontalTranslation</a></div><div class="ttdeci">Point32 ComputeHorizontalTranslation(int dx, int dy)</div><div class="ttdoc">Compute the horizontal translation in world coordinates of the viewing centre to move it dx / dy pixe...</div><div class="ttdef"><b>Definition:</b> <a href="viewport_8cpp_source.html#l01534">viewport.cpp:1534</a></div></div>
<div class="ttc" id="viewport_8cpp_html_abd1d943346be787c3c16adc7f2b744d6"><div class="ttname"><a href="viewport_8cpp.html#abd1d943346be787c3c16adc7f2b744d6">operator&lt;</a></div><div class="ttdeci">bool operator&lt;(const DrawData &amp;dd1, const DrawData &amp;dd2)</div><div class="ttdoc">Sort predicate of the draw data. </div><div class="ttdef"><b>Definition:</b> <a href="viewport_8cpp_source.html#l00242">viewport.cpp:242</a></div></div>
<div class="ttc" id="viewport_8h_html_ad83c05db97e3590a5da165ead3d5792da81492a75f363b59bc606fc51c8d84838"><div class="ttname"><a href="viewport_8h.html#ad83c05db97e3590a5da165ead3d5792da81492a75f363b59bc606fc51c8d84838">SO_PATH</a></div><div class="ttdoc">Draw path sprites. </div><div class="ttdef"><b>Definition:</b> <a href="viewport_8h_source.html#l00089">viewport.h:89</a></div></div>
<div class="ttc" id="group__map__group_html_ggad15436b50732bd9ef2b6f2efa5f400eda02014fe44d751ae9d07f737a68c148de"><div class="ttname"><a href="group__map__group.html#ggad15436b50732bd9ef2b6f2efa5f400eda02014fe44d751ae9d07f737a68c148de">GTP_CURSOR_EDGE_TEST</a></div><div class="ttdoc">Test tile for hit-testing of ground-tiles. (edge) </div><div class="ttdef"><b>Definition:</b> <a href="tile_8h_source.html#l00194">tile.h:194</a></div></div>
<div class="ttc" id="weather_8cpp_html_acd061df3ecf93b174e170aee3381cebe"><div class="ttname"><a href="weather_8cpp.html#acd061df3ecf93b174e170aee3381cebe">_weather</a></div><div class="ttdeci">Weather _weather</div><div class="ttdoc">Weather in the park. </div><div class="ttdef"><b>Definition:</b> <a href="weather_8cpp_source.html#l00017">weather.cpp:17</a></div></div>
<div class="ttc" id="group__window__group_html_ggac5457c01326811dc155c7660ba2190a0a180f2ec2e3f1bd64b43178cd177722f1"><div class="ttname"><a href="group__window__group.html#ggac5457c01326811dc155c7660ba2190a0a180f2ec2e3f1bd64b43178cd177722f1">WMME_NONE</a></div><div class="ttdoc">Do nothing special. </div><div class="ttdef"><b>Definition:</b> <a href="window_8h_source.html#l00096">window.h:96</a></div></div>
<div class="ttc" id="group__map__group_html_ggaa25639f3980e1fa4c64a58d3a8e4d149a9ea32a3b4fa9f1cb3889a8b7da1c3ec2"><div class="ttname"><a href="group__map__group.html#ggaa25639f3980e1fa4c64a58d3a8e4d149a9ea32a3b4fa9f1cb3889a8b7da1c3ec2">SL_FLAT</a></div><div class="ttdoc">Flat slope. </div><div class="ttdef"><b>Definition:</b> <a href="tile_8h_source.html#l00055">tile.h:55</a></div></div>
<div class="ttc" id="classMouseMode_html_a0278e5a0f9ec226902d0e0bd27ffb65c"><div class="ttname"><a href="classMouseMode.html#a0278e5a0f9ec226902d0e0bd27ffb65c">MouseMode::MayActivateMode</a></div><div class="ttdeci">virtual bool MayActivateMode()=0</div><div class="ttdoc">Query the mode whether it can be enabled. </div></div>
<div class="ttc" id="palette_8h_html_a8807ff43e9480e8baea8ec2fcbd6f010"><div class="ttname"><a href="palette_8h.html#a8807ff43e9480e8baea8ec2fcbd6f010">OPAQUE</a></div><div class="ttdeci">static const uint8 OPAQUE</div><div class="ttdoc">Opacity value of a fully opaque pixel. </div><div class="ttdef"><b>Definition:</b> <a href="palette_8h_source.html#l00021">palette.h:21</a></div></div>
<div class="ttc" id="palette_8h_html_a7bb9fa2a7a1b4386b2f16dca8d47223fa3f51b5cc0cf2d62c4cbd1e7984acf369"><div class="ttname"><a href="palette_8h.html#a7bb9fa2a7a1b4386b2f16dca8d47223fa3f51b5cc0cf2d62c4cbd1e7984acf369">GS_LIGHT</a></div><div class="ttdoc">Shift gradient two steps lighter. </div><div class="ttdef"><b>Definition:</b> <a href="palette_8h_source.html#l00138">palette.h:138</a></div></div>
<div class="ttc" id="classMouseMode_html"><div class="ttname"><a href="classMouseMode.html">MouseMode</a></div><div class="ttdoc">A single mouse mode. </div><div class="ttdef"><b>Definition:</b> <a href="viewport_8h_source.html#l00268">viewport.h:268</a></div></div>
<div class="ttc" id="classPixelFinder_html_a2f650c8fff8cec322a25af9152f5f26d"><div class="ttname"><a href="classPixelFinder.html#a2f650c8fff8cec322a25af9152f5f26d">PixelFinder::CollectVoxel</a></div><div class="ttdeci">void CollectVoxel(const Voxel *vx, const XYZPoint16 &amp;voxel_pos, int32 xnorth, int32 ynorth) override</div><div class="ttdoc">Find the closest sprite. </div><div class="ttdef"><b>Definition:</b> <a href="viewport_8cpp_source.html#l01175">viewport.cpp:1175</a></div></div>
<div class="ttc" id="structVoxel_html_a5e0540437a77b0aa7cc4e8897562bfdd"><div class="ttname"><a href="structVoxel.html#a5e0540437a77b0aa7cc4e8897562bfdd">Voxel::GetFoundationSlope</a></div><div class="ttdeci">uint8 GetFoundationSlope() const </div><div class="ttdoc">Get the foundation slope of a surface voxel. </div><div class="ttdef"><b>Definition:</b> <a href="map_8h_source.html#l00174">map.h:174</a></div></div>
<div class="ttc" id="group__viewport__group_html_ga07748935334c3ffdd10d2b1d6182c195"><div class="ttname"><a href="group__viewport__group.html#ga07748935334c3ffdd10d2b1d6182c195">DrawImages</a></div><div class="ttdeci">std::multiset&lt; DrawData &gt; DrawImages</div><div class="ttdoc">Collection of sprites to render to the screen. </div><div class="ttdef"><b>Definition:</b> <a href="viewport_8cpp_source.html#l00254">viewport.cpp:254</a></div></div>
<div class="ttc" id="tile_8h_html_a642780fc34ac497216ea98fedeacb570aad77265678b91219d8df3d27d4ec0589"><div class="ttname"><a href="tile_8h.html#a642780fc34ac497216ea98fedeacb570aad77265678b91219d8df3d27d4ec0589">SSP_STEEP_N</a></div><div class="ttdoc">Double height for steep north slope. </div><div class="ttdef"><b>Definition:</b> <a href="tile_8h_source.html#l00104">tile.h:104</a></div></div>
<div class="ttc" id="group__map__group_html_ga8ba2da28d22f859cbc51bf49f7ca1cfd"><div class="ttname"><a href="group__map__group.html#ga8ba2da28d22f859cbc51bf49f7ca1cfd">RotateCounterClockwise</a></div><div class="ttdeci">static ViewOrientation RotateCounterClockwise(const ViewOrientation &amp;vor)</div><div class="ttdoc">Rotate view 90 degrees counter clockwise. </div><div class="ttdef"><b>Definition:</b> <a href="orientation_8h_source.html#l00048">orientation.h:48</a></div></div>
<div class="ttc" id="group__window__group_html_gad7cee9ea46c04d30488a7264843b3010"><div class="ttname"><a href="group__window__group.html#gad7cee9ea46c04d30488a7264843b3010">_window_manager</a></div><div class="ttdeci">WindowManager _window_manager</div><div class="ttdoc">Window manager. </div><div class="ttdef"><b>Definition:</b> <a href="window_8cpp_source.html#l00037">window.cpp:37</a></div></div>
<div class="ttc" id="classVoxelWorld_html_a942eb654ddce96b29807beb7a2c25de0"><div class="ttname"><a href="classVoxelWorld.html#a942eb654ddce96b29807beb7a2c25de0">VoxelWorld::GetVoxel</a></div><div class="ttdeci">const Voxel * GetVoxel(const XYZPoint16 &amp;vox) const </div><div class="ttdoc">Get a voxel in the world by voxel coordinate. </div><div class="ttdef"><b>Definition:</b> <a href="map_8h_source.html#l00514">map.h:514</a></div></div>
<div class="ttc" id="classViewport_html_abf30438687247733d94674d5e174c206"><div class="ttname"><a href="classViewport.html#abf30438687247733d94674d5e174c206">Viewport::OnDraw</a></div><div class="ttdeci">void OnDraw() override</div><div class="ttdoc">Paint the window to the screen. </div><div class="ttdef"><b>Definition:</b> <a href="viewport_8cpp_source.html#l01386">viewport.cpp:1386</a></div></div>
<div class="ttc" id="viewport_8cpp_html_a63a12422f3f3b0720f0a603872b54a02"><div class="ttname"><a href="viewport_8cpp.html#a63a12422f3f3b0720f0a603872b54a02">DisableWorldAdditions</a></div><div class="ttdeci">void DisableWorldAdditions()</div><div class="ttdoc">Disable flashing display of showing proposed game world additions to the player. </div><div class="ttdef"><b>Definition:</b> <a href="viewport_8cpp_source.html#l00108">viewport.cpp:108</a></div></div>
<div class="ttc" id="tile_8h_html_a1e34c411cbad05567495cb8d3e937ac1"><div class="ttname"><a href="tile_8h.html#a1e34c411cbad05567495cb8d3e937ac1">_corner_dxy</a></div><div class="ttdeci">const Point16 _corner_dxy[4]</div><div class="ttdoc">Corner dx/dy (relative to northern corner) of a corner of a tile. </div><div class="ttdef"><b>Definition:</b> <a href="tile__func_8cpp_source.html#l00024">tile_func.cpp:24</a></div></div>
<div class="ttc" id="classVoxelObject_html"><div class="ttname"><a href="classVoxelObject.html">VoxelObject</a></div><div class="ttdoc">Base class for (moving) objects that are stored at a voxel position for easy retrieval during drawing...</div><div class="ttdef"><b>Definition:</b> <a href="map_8h_source.html#l00309">map.h:309</a></div></div>
<div class="ttc" id="classCursor_html_ab3f1ef7da77cbc6f24978c98d9e0e673"><div class="ttname"><a href="classCursor.html#ab3f1ef7da77cbc6f24978c98d9e0e673">Cursor::GetMaxCursorHeight</a></div><div class="ttdeci">uint8 GetMaxCursorHeight(uint16 xpos, uint16 ypos, uint8 zpos) override</div><div class="ttdoc">Get the maximum height of the xpos, ypos stack that needs to be examined. </div><div class="ttdef"><b>Definition:</b> <a href="viewport_8cpp_source.html#l00514">viewport.cpp:514</a></div></div>
<div class="ttc" id="classMouseModes_html_a6a315b570f089f4aeae9cbf503973cff"><div class="ttname"><a href="classMouseModes.html#a6a315b570f089f4aeae9cbf503973cff">MouseModes::RegisterMode</a></div><div class="ttdeci">void RegisterMode(MouseMode *mm)</div><div class="ttdoc">Register a mouse mode. </div><div class="ttdef"><b>Definition:</b> <a href="viewport_8cpp_source.html#l01676">viewport.cpp:1676</a></div></div>
<div class="ttc" id="ride__type_8cpp_html_a09f4be10d8b08c149e63a0b278accfef"><div class="ttname"><a href="ride__type_8cpp.html#a09f4be10d8b08c149e63a0b278accfef">_rides_manager</a></div><div class="ttdeci">RidesManager _rides_manager</div><div class="ttdoc">Storage and retrieval of ride types and rides in the park. </div><div class="ttdef"><b>Definition:</b> <a href="ride__type_8cpp_source.html#l00045">ride_type.cpp:45</a></div></div>
<div class="ttc" id="classViewport_html_a4633a976ae1cf9d873162ddf29c64cf5"><div class="ttname"><a href="classViewport.html#a4633a976ae1cf9d873162ddf29c64cf5">Viewport::ToggleUndergroundMode</a></div><div class="ttdeci">void ToggleUndergroundMode()</div><div class="ttdoc">Toggle the underground mode view on/off. </div><div class="ttdef"><b>Definition:</b> <a href="viewport_8cpp_source.html#l01353">viewport.cpp:1353</a></div></div>
<div class="ttc" id="window_8h_html_ada744cd8f44581ff7ac7f7eda514779a"><div class="ttname"><a href="window_8h.html#ada744cd8f44581ff7ac7f7eda514779a">ALL_WINDOWS_OF_TYPE</a></div><div class="ttdeci">static const WindowNumber ALL_WINDOWS_OF_TYPE</div><div class="ttdoc">Window number parameter meaning &#39;all windows of the window type&#39;. </div><div class="ttdef"><b>Definition:</b> <a href="window_8h_source.html#l00128">window.h:128</a></div></div>
<div class="ttc" id="viewport_8h_html_ad83c05db97e3590a5da165ead3d5792d"><div class="ttname"><a href="viewport_8h.html#ad83c05db97e3590a5da165ead3d5792d">SpriteOrder</a></div><div class="ttdeci">SpriteOrder</div><div class="ttdoc">Order of blitting sprites in a single voxel (earlier in the list is sooner). </div><div class="ttdef"><b>Definition:</b> <a href="viewport_8h_source.html#l00081">viewport.h:81</a></div></div>
<div class="ttc" id="classVoxelCollector_html_ac00a661304474a26a2bf415baae26048"><div class="ttname"><a href="classVoxelCollector.html#ac00a661304474a26a2bf415baae26048">VoxelCollector::draw_above_stack</a></div><div class="ttdeci">bool draw_above_stack</div><div class="ttdoc">Also draw voxels above the voxel stack (for cursors). </div><div class="ttdef"><b>Definition:</b> <a href="viewport_8cpp_source.html#l00196">viewport.cpp:196</a></div></div>
<div class="ttc" id="group__map__group_html_ggabad48584a1852521ff578b647f07fdd3a555bd255b7d0fb03bd8e272ee595b49b"><div class="ttname"><a href="group__map__group.html#ggabad48584a1852521ff578b647f07fdd3a555bd255b7d0fb03bd8e272ee595b49b">VOR_NORTH</a></div><div class="ttdoc">View with top of the world to the north. </div><div class="ttdef"><b>Definition:</b> <a href="orientation_8h_source.html#l00022">orientation.h:22</a></div></div>
<div class="ttc" id="viewport_8h_html_ad83c05db97e3590a5da165ead3d5792dac65ce884e2c15177c2b03526cd3f5d99"><div class="ttname"><a href="viewport_8h.html#ad83c05db97e3590a5da165ead3d5792dac65ce884e2c15177c2b03526cd3f5d99">SO_PERSON</a></div><div class="ttdoc">Draw person sprites. </div><div class="ttdef"><b>Definition:</b> <a href="viewport_8h_source.html#l00095">viewport.h:95</a></div></div>
<div class="ttc" id="viewport_8h_html_ad83c05db97e3590a5da165ead3d5792da9080fbc15fb6ba3616aa0532a874a117"><div class="ttname"><a href="viewport_8h.html#ad83c05db97e3590a5da165ead3d5792da9080fbc15fb6ba3616aa0532a874a117">SO_GROUND_EDGE</a></div><div class="ttdoc">Used for ground edge detection. </div><div class="ttdef"><b>Definition:</b> <a href="viewport_8h_source.html#l00085">viewport.h:85</a></div></div>
<div class="ttc" id="classMouseMode_html_a5861718b2dd403c8a8d80b6847cae318"><div class="ttname"><a href="classMouseMode.html#a5861718b2dd403c8a8d80b6847cae318">MouseMode::mode</a></div><div class="ttdeci">const ViewportMouseMode mode</div><div class="ttdoc">Mouse mode implemented by the object. </div><div class="ttdef"><b>Definition:</b> <a href="viewport_8h_source.html#l00300">viewport.h:300</a></div></div>
<div class="ttc" id="classEdgeCursor_html_ab49ffb0b2a013e3e306ed1bbc3e9cca4"><div class="ttname"><a href="classEdgeCursor.html#ab49ffb0b2a013e3e306ed1bbc3e9cca4">EdgeCursor::MarkDirty</a></div><div class="ttdeci">void MarkDirty() override</div><div class="ttdoc">Update the cursor at the screen. </div><div class="ttdef"><b>Definition:</b> <a href="viewport_8cpp_source.html#l00668">viewport.cpp:668</a></div></div>
<div class="ttc" id="classSpriteCollector_html_a83165067814cd1ffebe55dcccb6dde62"><div class="ttname"><a href="classSpriteCollector.html#a83165067814cd1ffebe55dcccb6dde62">SpriteCollector::SetXYOffset</a></div><div class="ttdeci">void SetXYOffset(int16 xoffset, int16 yoffset)</div><div class="ttdoc">Set the offset of the top-left coordinate of the collect window to the top-left of the display...</div><div class="ttdef"><b>Definition:</b> <a href="viewport_8cpp_source.html#l00462">viewport.cpp:462</a></div></div>
<div class="ttc" id="viewport_8h_html_a7eaf31dcf3c53b721a3144bb135f8d25a5b37d82d058ce4aa5041817e0eced64f"><div class="ttname"><a href="viewport_8h.html#a7eaf31dcf3c53b721a3144bb135f8d25a5b37d82d058ce4aa5041817e0eced64f">CS_GROUND</a></div><div class="ttdoc">Ground sprite. </div><div class="ttdef"><b>Definition:</b> <a href="viewport_8h_source.html#l00064">viewport.h:64</a></div></div>
<div class="ttc" id="classVoxelCollector_html_aae6dc6938654e5696e4473371be824f2"><div class="ttname"><a href="classVoxelCollector.html#aae6dc6938654e5696e4473371be824f2">VoxelCollector::view_pos</a></div><div class="ttdeci">XYZPoint32 view_pos</div><div class="ttdoc">Position of the centre point of the display. </div><div class="ttdef"><b>Definition:</b> <a href="viewport_8cpp_source.html#l00190">viewport.cpp:190</a></div></div>
<div class="ttc" id="classSpriteCollector_html"><div class="ttname"><a href="classSpriteCollector.html">SpriteCollector</a></div><div class="ttdoc">Collect sprites to draw in a viewport. </div><div class="ttdef"><b>Definition:</b> <a href="viewport_8cpp_source.html#l00260">viewport.cpp:260</a></div></div>
<div class="ttc" id="classVoxelCollector_html_a1a8bb1f0f4f229067c17cdb71110ac8b"><div class="ttname"><a href="classVoxelCollector.html#a1a8bb1f0f4f229067c17cdb71110ac8b">VoxelCollector::SetupSupports</a></div><div class="ttdeci">virtual void SetupSupports(const VoxelStack *stack, uint xpos, uint ypos)</div><div class="ttdoc">Decide where supports should be raised. </div><div class="ttdef"><b>Definition:</b> <a href="viewport_8cpp_source.html#l00208">viewport.cpp:208</a></div></div>
<div class="ttc" id="classWorldAdditions_html"><div class="ttname"><a href="classWorldAdditions.html">WorldAdditions</a></div><div class="ttdoc">Proposed additions to _world. </div><div class="ttdef"><b>Definition:</b> <a href="map_8h_source.html#l00589">map.h:589</a></div></div>
<div class="ttc" id="classPlatform_html_ae1468a2fe7cf2bcee1a48c0325a86d1a"><div class="ttname"><a href="classPlatform.html#ae1468a2fe7cf2bcee1a48c0325a86d1a">Platform::ramp</a></div><div class="ttdeci">ImageData * ramp[4]</div><div class="ttdoc">Raised platform at one edge. See TileEdge for the order. </div><div class="ttdef"><b>Definition:</b> <a href="sprite__store_8h_source.html#l00159">sprite_store.h:159</a></div></div>
<div class="ttc" id="classCursor_html_ac01d0c964a1e17214e77b786bf283e9a"><div class="ttname"><a href="classCursor.html#ac01d0c964a1e17214e77b786bf283e9a">Cursor::cursor_pos</a></div><div class="ttdeci">XYZPoint16 cursor_pos</div><div class="ttdoc">Voxel position of the cursor. </div><div class="ttdef"><b>Definition:</b> <a href="viewport_8h_source.html#l00163">viewport.h:163</a></div></div>
<div class="ttc" id="path__build_8cpp_html_a27e5e590cb1ddac2214842a359bda80b"><div class="ttname"><a href="path__build_8cpp.html#a27e5e590cb1ddac2214842a359bda80b">_path_builder</a></div><div class="ttdeci">PathBuildManager _path_builder</div><div class="ttdoc">Path build manager. </div><div class="ttdef"><b>Definition:</b> <a href="path__build_8cpp_source.html#l00019">path_build.cpp:19</a></div></div>
<div class="ttc" id="viewport_8h_html_ad83c05db97e3590a5da165ead3d5792daa33848bf5fc3314c0777d51573798add"><div class="ttname"><a href="viewport_8h.html#ad83c05db97e3590a5da165ead3d5792daa33848bf5fc3314c0777d51573798add">SO_FENCE_FRONT</a></div><div class="ttdoc">Draw fence on the front edges. </div><div class="ttdef"><b>Definition:</b> <a href="viewport_8h_source.html#l00096">viewport.h:96</a></div></div>
<div class="ttc" id="palette_8cpp_html_a550404bbe3732d4105e8965deba1867b"><div class="ttname"><a href="palette_8cpp.html#a550404bbe3732d4105e8965deba1867b">_palette</a></div><div class="ttdeci">const uint32 _palette[256]</div><div class="ttdoc">The 8bpp FreeRCT palette. </div><div class="ttdef"><b>Definition:</b> <a href="palette_8cpp_source.html#l00207">palette.cpp:207</a></div></div>
<div class="ttc" id="classFinderData_html"><div class="ttname"><a href="classFinderData.html">FinderData</a></div><div class="ttdoc">Data found by Viewport::ComputeCursorPosition. </div><div class="ttdef"><b>Definition:</b> <a href="viewport_8h_source.html#l00108">viewport.h:108</a></div></div>
<div class="ttc" id="palette_8h_html_a7bb9fa2a7a1b4386b2f16dca8d47223f"><div class="ttname"><a href="palette_8h.html#a7bb9fa2a7a1b4386b2f16dca8d47223f">GradientShift</a></div><div class="ttdeci">GradientShift</div><div class="ttdoc">Shifting of the gradient to make the sprite lighter or darker. </div><div class="ttdef"><b>Definition:</b> <a href="palette_8h_source.html#l00131">palette.h:131</a></div></div>
<div class="ttc" id="group__viewport__group_html_ggabbe637356c8cb749a9726f13658031faa917afaf61fa7538809c9043217260097"><div class="ttname"><a href="group__viewport__group.html#ggabbe637356c8cb749a9726f13658031faa917afaf61fa7538809c9043217260097">CUR_TYPE_NORTH</a></div><div class="ttdoc">Show a N corner highlight. </div><div class="ttdef"><b>Definition:</b> <a href="viewport_8h_source.html#l00042">viewport.h:42</a></div></div>
<div class="ttc" id="structDrawData_html_a60f157d7706304439f8eee934fc80019"><div class="ttname"><a href="structDrawData.html#a60f157d7706304439f8eee934fc80019">DrawData::recolour</a></div><div class="ttdeci">const Recolouring * recolour</div><div class="ttdoc">Recolouring of the sprite. </div><div class="ttdef"><b>Definition:</b> <a href="viewport_8cpp_source.html#l00233">viewport.cpp:233</a></div></div>
<div class="ttc" id="group__map__group_html_gaad0ec8bccd84a34b836d57ae88daf898"><div class="ttname"><a href="group__map__group.html#gaad0ec8bccd84a34b836d57ae88daf898">ExpandTileSlope</a></div><div class="ttdeci">static TileSlope ExpandTileSlope(uint8 v)</div><div class="ttdoc">Expand a slope sprite number to its bit-encoded form for easier manipulating. </div><div class="ttdef"><b>Definition:</b> <a href="tile_8h_source.html#l00158">tile.h:158</a></div></div>
<div class="ttc" id="window_8h_html_aab6fa040b57445f74c311c245079e741a7b13136a540375136ae7e413d4dfb6c9"><div class="ttname"><a href="window_8h.html#aab6fa040b57445f74c311c245079e741a7b13136a540375136ae7e413d4dfb6c9">CHG_VIEWPORT_ROTATED</a></div><div class="ttdoc">Viewport rotated. </div><div class="ttdef"><b>Definition:</b> <a href="window_8h_source.html#l00064">window.h:64</a></div></div>
<div class="ttc" id="sprite__store_8h_html_affb455e5ea72d01e065758c70f810a95"><div class="ttname"><a href="sprite__store_8h.html#affb455e5ea72d01e065758c70f810a95">AnimationType</a></div><div class="ttdeci">AnimationType</div><div class="ttdoc">Available animations. </div><div class="ttdef"><b>Definition:</b> <a href="sprite__store_8h_source.html#l00195">sprite_store.h:195</a></div></div>
<div class="ttc" id="classMouseModes_html_ab5d6b997165a7f1b2eebda43d23d38a4"><div class="ttname"><a href="classMouseModes.html#ab5d6b997165a7f1b2eebda43d23d38a4">MouseModes::GetMouseMode</a></div><div class="ttdeci">ViewportMouseMode GetMouseMode()</div><div class="ttdoc">Get the current mouse mode. </div><div class="ttdef"><b>Definition:</b> <a href="viewport_8cpp_source.html#l01771">viewport.cpp:1771</a></div></div>
<div class="ttc" id="group__map__group_html_ggad15436b50732bd9ef2b6f2efa5f400edaf0ceff8e769df0430417e0704018dfc7"><div class="ttname"><a href="group__map__group.html#ggad15436b50732bd9ef2b6f2efa5f400edaf0ceff8e769df0430417e0704018dfc7">GTP_INVALID</a></div><div class="ttdoc">Invalid ground type. </div><div class="ttdef"><b>Definition:</b> <a href="tile_8h_source.html#l00198">tile.h:198</a></div></div>
<div class="ttc" id="classWindow_html"><div class="ttname"><a href="classWindow.html">Window</a></div><div class="ttdoc">Window base class. </div><div class="ttdef"><b>Definition:</b> <a href="window_8h_source.html#l00134">window.h:134</a></div></div>
<div class="ttc" id="viewport_8h_html_ad83c05db97e3590a5da165ead3d5792dab1736d60c068f615aa53700447e65121"><div class="ttname"><a href="viewport_8h.html#ad83c05db97e3590a5da165ead3d5792dab1736d60c068f615aa53700447e65121">SO_GROUND</a></div><div class="ttdoc">Draw ground sprites. </div><div class="ttdef"><b>Definition:</b> <a href="viewport_8h_source.html#l00084">viewport.h:84</a></div></div>
<div class="ttc" id="classSpriteCollector_html_a1daa68f8402e1e22a7eb997eaf9195ae"><div class="ttname"><a href="classSpriteCollector.html#a1daa68f8402e1e22a7eb997eaf9195ae">SpriteCollector::ground_height</a></div><div class="ttdeci">uint16 ground_height</div><div class="ttdoc">The height of the ground in the current voxel stack. -1 means no valid ground found. </div><div class="ttdef"><b>Definition:</b> <a href="viewport_8cpp_source.html#l00280">viewport.cpp:280</a></div></div>
<div class="ttc" id="classPixelFinder_html_ac2415aa0c2048a74ec2b07da48868c57"><div class="ttname"><a href="classPixelFinder.html#ac2415aa0c2048a74ec2b07da48868c57">PixelFinder::fdata</a></div><div class="ttdeci">FinderData * fdata</div><div class="ttdoc">Finder data to return. </div><div class="ttdef"><b>Definition:</b> <a href="viewport_8cpp_source.html#l00297">viewport.cpp:297</a></div></div>
<div class="ttc" id="stdafx_8h_html_a1134b580f8da4de94ca6b1de4d37975e"><div class="ttname"><a href="stdafx_8h.html#a1134b580f8da4de94ca6b1de4d37975e">uint32</a></div><div class="ttdeci">unsigned int uint32</div><div class="ttdoc">Unsigned 32 bit wide data type. </div><div class="ttdef"><b>Definition:</b> <a href="stdafx_8h_source.html#l00134">stdafx.h:134</a></div></div>
<div class="ttc" id="classWeather_html_a08a993b67761c57c1e42093d00244f19"><div class="ttname"><a href="classWeather.html#a08a993b67761c57c1e42093d00244f19">Weather::GetWeatherType</a></div><div class="ttdeci">WeatherType GetWeatherType() const </div><div class="ttdoc">Get the current type of weather. </div><div class="ttdef"><b>Definition:</b> <a href="weather_8cpp_source.html#l00158">weather.cpp:158</a></div></div>
<div class="ttc" id="classMultiCursor_html_a77685c22145bfb0208a4a60caebd77c7"><div class="ttname"><a href="classMultiCursor.html#a77685c22145bfb0208a4a60caebd77c7">MultiCursor::MultiCursor</a></div><div class="ttdeci">MultiCursor(Viewport *vp)</div><div class="ttdoc">Constructor of a cursor. </div><div class="ttdef"><b>Definition:</b> <a href="viewport_8cpp_source.html#l00542">viewport.cpp:542</a></div></div>
<div class="ttc" id="group__map__group_html_ga16543508a2eb72462e0747786d43778a"><div class="ttname"><a href="group__map__group.html#ga16543508a2eb72462e0747786d43778a">RotateClockwise</a></div><div class="ttdeci">static ViewOrientation RotateClockwise(const ViewOrientation &amp;vor)</div><div class="ttdoc">Rotate view 90 degrees clockwise. </div><div class="ttdef"><b>Definition:</b> <a href="orientation_8h_source.html#l00037">orientation.h:37</a></div></div>
<div class="ttc" id="tile_8h_html_a642780fc34ac497216ea98fedeacb570a557c85b313c107e54447c1ab2c8f3052"><div class="ttname"><a href="tile_8h.html#a642780fc34ac497216ea98fedeacb570a557c85b313c107e54447c1ab2c8f3052">SSP_NONFLAT_BASE</a></div><div class="ttdoc">Base sprite for non-flat ground slopes. </div><div class="ttdef"><b>Definition:</b> <a href="tile_8h_source.html#l00110">tile.h:110</a></div></div>
<div class="ttc" id="viewport_8cpp_html_a9b7e01edb9a807eb45fdad0463b855db"><div class="ttname"><a href="viewport_8cpp.html#a9b7e01edb9a807eb45fdad0463b855db">ADDITIONS_TIMEOUT_LENGTH</a></div><div class="ttdeci">static const int ADDITIONS_TIMEOUT_LENGTH</div><div class="ttdoc">Length of the time interval of displaying or not displaying world additions. </div><div class="ttdef"><b>Definition:</b> <a href="viewport_8cpp_source.html#l00098">viewport.cpp:98</a></div></div>
<div class="ttc" id="classClippedRectangle_html_a31c5e78c2bd6cb9ddd304c1774b8d258"><div class="ttname"><a href="classClippedRectangle.html#a31c5e78c2bd6cb9ddd304c1774b8d258">ClippedRectangle::height</a></div><div class="ttdeci">uint16 height</div><div class="ttdoc">Number of rows. </div><div class="ttdef"><b>Definition:</b> <a href="video_8h_source.html#l00040">video.h:40</a></div></div>
<div class="ttc" id="classEdgeCursor_html_af522861f61cc3eff022d1e6f2a74fe46"><div class="ttname"><a href="classEdgeCursor.html#af522861f61cc3eff022d1e6f2a74fe46">EdgeCursor::sprite</a></div><div class="ttdeci">const ImageData * sprite</div><div class="ttdoc">Cursor sprite. </div><div class="ttdef"><b>Definition:</b> <a href="viewport_8h_source.html#l00203">viewport.h:203</a></div></div>
<div class="ttc" id="classFoundation_html_a65e48b130d17c46332acb075013644d4"><div class="ttname"><a href="classFoundation.html#a65e48b130d17c46332acb075013644d4">Foundation::sprites</a></div><div class="ttdeci">ImageData * sprites[6]</div><div class="ttdoc">Foundation sprites. </div><div class="ttdef"><b>Definition:</b> <a href="sprite__store_8h_source.html#l00146">sprite_store.h:146</a></div></div>
<div class="ttc" id="classVoxelCollector_html_afadd1b6eee247fb0ba8015cb247e13e7"><div class="ttname"><a href="classVoxelCollector.html#afadd1b6eee247fb0ba8015cb247e13e7">VoxelCollector::underground_mode</a></div><div class="ttdeci">bool underground_mode</div><div class="ttdoc">Whether to draw underground mode sprites (else draw normal surface sprites). </div><div class="ttdef"><b>Definition:</b> <a href="viewport_8cpp_source.html#l00197">viewport.cpp:197</a></div></div>
<div class="ttc" id="group__map__group_html_ggaa25639f3980e1fa4c64a58d3a8e4d149a162a1112fb74ac0cec258c7cc66543aa"><div class="ttname"><a href="group__map__group.html#ggaa25639f3980e1fa4c64a58d3a8e4d149a162a1112fb74ac0cec258c7cc66543aa">TSB_TOP</a></div><div class="ttdoc">Bit denoting it is the top of a steep slope. </div><div class="ttdef"><b>Definition:</b> <a href="tile_8h_source.html#l00070">tile.h:70</a></div></div>
<div class="ttc" id="group__map__group_html_ga3622a3eda6865ce3e357b761e4f42dbda087708a66f83c522faa1a8be2be798e9"><div class="ttname"><a href="group__map__group.html#ga3622a3eda6865ce3e357b761e4f42dbda087708a66f83c522faa1a8be2be798e9">PATH_INVALID</a></div><div class="ttdoc">Invalid path. Also used to indicate reserved voxels above paths. </div><div class="ttdef"><b>Definition:</b> <a href="path_8h_source.html#l00085">path.h:85</a></div></div>
<div class="ttc" id="classViewport_html_a8f1babfcd8b2768b3251c0c879afe19b"><div class="ttname"><a href="classViewport.html#a8f1babfcd8b2768b3251c0c879afe19b">Viewport::MarkVoxelDirty</a></div><div class="ttdeci">void MarkVoxelDirty(const XYZPoint16 &amp;voxel_pos, int16 height=0)</div><div class="ttdoc">Mark a voxel as in need of getting painted. </div><div class="ttdef"><b>Definition:</b> <a href="viewport_8cpp_source.html#l01415">viewport.cpp:1415</a></div></div>
<div class="ttc" id="group__map__group_html_ggabad48584a1852521ff578b647f07fdd3a5ff3ccca79a685ddc61d0a8739d73ed1"><div class="ttname"><a href="group__map__group.html#ggabad48584a1852521ff578b647f07fdd3a5ff3ccca79a685ddc61d0a8739d73ed1">VOR_WEST</a></div><div class="ttdoc">View with top of the world to the west. </div><div class="ttdef"><b>Definition:</b> <a href="orientation_8h_source.html#l00025">orientation.h:25</a></div></div>
<div class="ttc" id="classBaseCursor_html_a40410fe20f900ee736d51544acc62663"><div class="ttname"><a href="classBaseCursor.html#a40410fe20f900ee736d51544acc62663">BaseCursor::BaseCursor</a></div><div class="ttdeci">BaseCursor(Viewport *vp)</div><div class="ttdoc">Constructor of a cursor. </div><div class="ttdef"><b>Definition:</b> <a href="viewport_8cpp_source.html#l00472">viewport.cpp:472</a></div></div>
<div class="ttc" id="classMouseMode_html_a63e36618cc08ec47d8d1b73cdb079704"><div class="ttname"><a href="classMouseMode.html#a63e36618cc08ec47d8d1b73cdb079704">MouseMode::OnMouseButtonEvent</a></div><div class="ttdeci">virtual void OnMouseButtonEvent(Viewport *vp, uint8 state)</div><div class="ttdoc">A mouse click was detected. </div><div class="ttdef"><b>Definition:</b> <a href="viewport_8cpp_source.html#l01630">viewport.cpp:1630</a></div></div>
<div class="ttc" id="classEdgeCursor_html_a004ba6e1229b1c7a0e9d991a704a21bb"><div class="ttname"><a href="classEdgeCursor.html#a004ba6e1229b1c7a0e9d991a704a21bb">EdgeCursor::SetCursor</a></div><div class="ttdeci">bool SetCursor(const XYZPoint16 &amp;cursor_pos, CursorType type, const ImageData *sprite, uint8 yoffset, bool always=false)</div><div class="ttdoc">Set a cursor. </div><div class="ttdef"><b>Definition:</b> <a href="viewport_8cpp_source.html#l00700">viewport.cpp:700</a></div></div>
<div class="ttc" id="classSpriteManager_html_a4a506110aec7cecde2e27c476f09b489"><div class="ttname"><a href="classSpriteManager.html#a4a506110aec7cecde2e27c476f09b489">SpriteManager::GetSprites</a></div><div class="ttdeci">const SpriteStorage * GetSprites(uint16 size) const </div><div class="ttdoc">Get a sprite store of a given size. </div><div class="ttdef"><b>Definition:</b> <a href="sprite__store_8cpp_source.html#l01558">sprite_store.cpp:1558</a></div></div>
<div class="ttc" id="stdafx_8h_html_a05f6b0ae8f6a6e135b0e290c25fe0e4e"><div class="ttname"><a href="stdafx_8h.html#a05f6b0ae8f6a6e135b0e290c25fe0e4e">uint16</a></div><div class="ttdeci">unsigned short uint16</div><div class="ttdoc">Unsigned 16 bit wide data type. </div><div class="ttdef"><b>Definition:</b> <a href="stdafx_8h_source.html#l00132">stdafx.h:132</a></div></div>
<div class="ttc" id="classRidesManager_html_aa779068f98207a4bb13fe3ad7e16efa0"><div class="ttname"><a href="classRidesManager.html#aa779068f98207a4bb13fe3ad7e16efa0">RidesManager::GetRideInstance</a></div><div class="ttdeci">RideInstance * GetRideInstance(uint16 num)</div><div class="ttdoc">Get the requested ride instance. </div><div class="ttdef"><b>Definition:</b> <a href="ride__type_8cpp_source.html#l00434">ride_type.cpp:434</a></div></div>
<div class="ttc" id="classSpriteCollector_html_a2ff573025924a75fa7bd200757a843ed"><div class="ttname"><a href="classSpriteCollector.html#a2ff573025924a75fa7bd200757a843ed">SpriteCollector::draw_images</a></div><div class="ttdeci">DrawImages draw_images</div><div class="ttdoc">Sprites to draw ordered by viewing distance. </div><div class="ttdef"><b>Definition:</b> <a href="viewport_8cpp_source.html#l00267">viewport.cpp:267</a></div></div>
<div class="ttc" id="group__viewport__group_html_ga0dc4080a39ea5f89477c0989aeb98fff"><div class="ttname"><a href="group__viewport__group.html#ga0dc4080a39ea5f89477c0989aeb98fff">ShowMainDisplay</a></div><div class="ttdeci">void ShowMainDisplay(const XYZPoint32 &amp;view_pos)</div><div class="ttdoc">Open the main isometric display window. </div><div class="ttdef"><b>Definition:</b> <a href="viewport_8cpp_source.html#l01781">viewport.cpp:1781</a></div></div>
<div class="ttc" id="group__window__group_html_gga58ad3159a8b1f24a1d3497efcd541b69a9603c6f348a9e2e607912f97d6422ffc"><div class="ttname"><a href="group__window__group.html#gga58ad3159a8b1f24a1d3497efcd541b69a9603c6f348a9e2e607912f97d6422ffc">WC_PATH_BUILDER</a></div><div class="ttdoc">Path build GUI. </div><div class="ttdef"><b>Definition:</b> <a href="window_8h_source.html#l00049">window.h:49</a></div></div>
<div class="ttc" id="select__mode_8h_html"><div class="ttname"><a href="select__mode_8h.html">select_mode.h</a></div><div class="ttdoc">Mouse mode to select objects from the main display. </div></div>
<div class="ttc" id="classMouseMode_html_aca1a120320a2266729af76f9aff0d58c"><div class="ttname"><a href="classMouseMode.html#aca1a120320a2266729af76f9aff0d58c">MouseMode::OnMouseMoveEvent</a></div><div class="ttdeci">virtual void OnMouseMoveEvent(Viewport *vp, const Point16 &amp;old_pos, const Point16 &amp;pos)</div><div class="ttdoc">The mouse moved while in this mouse mode. </div><div class="ttdef"><b>Definition:</b> <a href="viewport_8cpp_source.html#l01621">viewport.cpp:1621</a></div></div>
<div class="ttc" id="classSpriteCollector_html_a500b250eeb6332feb88f21880f769b35"><div class="ttname"><a href="classSpriteCollector.html#a500b250eeb6332feb88f21880f769b35">SpriteCollector::yoffset</a></div><div class="ttdeci">int16 yoffset</div><div class="ttdoc">Vertical offset of the top-left coordinate to the top-left of the display. </div><div class="ttdef"><b>Definition:</b> <a href="viewport_8cpp_source.html#l00269">viewport.cpp:269</a></div></div>
<div class="ttc" id="structRectangle_html_a82ad3c804a2bdb269926f29a2574c22b"><div class="ttname"><a href="structRectangle.html#a82ad3c804a2bdb269926f29a2574c22b">Rectangle::width</a></div><div class="ttdeci">SZ width</div><div class="ttdoc">Width of the rectangle. </div><div class="ttdef"><b>Definition:</b> <a href="geometry_8h_source.html#l00350">geometry.h:350</a></div></div>
<div class="ttc" id="classPixelFinder_html_a351817707623c57264a0be8a288eab51"><div class="ttname"><a href="classPixelFinder.html#a351817707623c57264a0be8a288eab51">PixelFinder::pixel</a></div><div class="ttdeci">uint32 pixel</div><div class="ttdoc">Pixel colour of the closest sprite. </div><div class="ttdef"><b>Definition:</b> <a href="viewport_8cpp_source.html#l00296">viewport.cpp:296</a></div></div>
<div class="ttc" id="group__map__group_html_ga3622a3eda6865ce3e357b761e4f42dbdad49b3f231c78bdc651ac699f28a463ad"><div class="ttname"><a href="group__map__group.html#ga3622a3eda6865ce3e357b761e4f42dbdad49b3f231c78bdc651ac699f28a463ad">PATH_RAMP_NW</a></div><div class="ttdoc">Ramp from NW up to SE. </div><div class="ttdef"><b>Definition:</b> <a href="path_8h_source.html#l00080">path.h:80</a></div></div>
<div class="ttc" id="classMouseModes_html_a064eb03f4a6d5f8111128ffc75df2452"><div class="ttname"><a href="classMouseModes.html#a064eb03f4a6d5f8111128ffc75df2452">MouseModes::SetMouseMode</a></div><div class="ttdeci">void SetMouseMode(ViewportMouseMode mode)</div><div class="ttdoc">Try to switch to a given mouse mode. </div><div class="ttdef"><b>Definition:</b> <a href="viewport_8cpp_source.html#l01741">viewport.cpp:1741</a></div></div>
<div class="ttc" id="classBaseCursor_html_a322cf4007d148c08716822df27f83fbe"><div class="ttname"><a href="classBaseCursor.html#a322cf4007d148c08716822df27f83fbe">BaseCursor::SetInvalid</a></div><div class="ttdeci">void SetInvalid()</div><div class="ttdoc">Mark the cursor as being invalid, and update the viewport if necessary. </div><div class="ttdef"><b>Definition:</b> <a href="viewport_8cpp_source.html#l00483">viewport.cpp:483</a></div></div>
<div class="ttc" id="classVideoSystem_html_a76811e1c7bfdbf64eaa1da90a812a7ca"><div class="ttname"><a href="classVideoSystem.html#a76811e1c7bfdbf64eaa1da90a812a7ca">VideoSystem::GetXSize</a></div><div class="ttdeci">uint16 GetXSize() const </div><div class="ttdoc">Get horizontal size of the screen. </div><div class="ttdef"><b>Definition:</b> <a href="video_8h_source.html#l00073">video.h:73</a></div></div>
<div class="ttc" id="classViewport_html_adeeab711682948cdfa386bca98734f25"><div class="ttname"><a href="classViewport.html#adeeab711682948cdfa386bca98734f25">Viewport::orientation</a></div><div class="ttdeci">ViewOrientation orientation</div><div class="ttdoc">Direction of view. </div><div class="ttdef"><b>Definition:</b> <a href="viewport_8h_source.html#l00248">viewport.h:248</a></div></div>
<div class="ttc" id="classSpriteStorage_html_a1e4b82d07912128b591b2b25def56f20"><div class="ttname"><a href="classSpriteStorage.html#a1e4b82d07912128b591b2b25def56f20">SpriteStorage::GetFenceSprite</a></div><div class="ttdeci">const ImageData * GetFenceSprite(FenceType type, TileEdge edge, TileSlope slope, ViewOrientation orient) const </div><div class="ttdoc">Get a fence sprite. </div><div class="ttdef"><b>Definition:</b> <a href="sprite__store_8h_source.html#l00500">sprite_store.h:500</a></div></div>
<div class="ttc" id="classPixelFinder_html_a29c2cbacbb286eed99841b873a23ce7c"><div class="ttname"><a href="classPixelFinder.html#a29c2cbacbb286eed99841b873a23ce7c">PixelFinder::data</a></div><div class="ttdeci">DrawData data</div><div class="ttdoc">Drawing data of the match found so far. </div><div class="ttdef"><b>Definition:</b> <a href="viewport_8cpp_source.html#l00295">viewport.cpp:295</a></div></div>
<div class="ttc" id="classViewport_html_a4cf69d0f86ba6b3fd59e733628c87bc4"><div class="ttname"><a href="classViewport.html#a4cf69d0f86ba6b3fd59e733628c87bc4">Viewport::tile_width</a></div><div class="ttdeci">uint16 tile_width</div><div class="ttdoc">Width of a tile. </div><div class="ttdef"><b>Definition:</b> <a href="viewport_8h_source.html#l00246">viewport.h:246</a></div></div>
<div class="ttc" id="viewport_8h_html"><div class="ttname"><a href="viewport_8h.html">viewport.h</a></div><div class="ttdoc">Main display data. </div></div>
<div class="ttc" id="viewport_8h_html_a7eaf31dcf3c53b721a3144bb135f8d25"><div class="ttname"><a href="viewport_8h.html#a7eaf31dcf3c53b721a3144bb135f8d25">ClickableSprite</a></div><div class="ttdeci">ClickableSprite</div><div class="ttdoc">Sprites that trigger an action when clicked on. </div><div class="ttdef"><b>Definition:</b> <a href="viewport_8h_source.html#l00062">viewport.h:62</a></div></div>
<div class="ttc" id="viewport_8h_html_ac72850d8ae4e0c914f4227f845921a3f"><div class="ttname"><a href="viewport_8h.html#ac72850d8ae4e0c914f4227f845921a3f">GroundTilePart</a></div><div class="ttdeci">GroundTilePart</div><div class="ttdoc">Part of a ground tile to select. </div><div class="ttdef"><b>Definition:</b> <a href="viewport_8h_source.html#l00101">viewport.h:101</a></div></div>
<div class="ttc" id="weather_8h_html"><div class="ttname"><a href="weather_8h.html">weather.h</a></div><div class="ttdoc">Game weather declarations. </div></div>
<div class="ttc" id="classFinderData_html_a4e7135d531cd213ace38a9336e6e2d22"><div class="ttname"><a href="classFinderData.html#a4e7135d531cd213ace38a9336e6e2d22">FinderData::FinderData</a></div><div class="ttdeci">FinderData(ClickableSprite allowed_types, GroundTilePart select)</div><div class="ttdoc">Constructor of the finder data class. </div><div class="ttdef"><b>Definition:</b> <a href="viewport_8cpp_source.html#l01132">viewport.cpp:1132</a></div></div>
<div class="ttc" id="viewport_8h_html_a7eaf31dcf3c53b721a3144bb135f8d25aa2b66245f086718aa20cf6450393b0a6"><div class="ttname"><a href="viewport_8h.html#a7eaf31dcf3c53b721a3144bb135f8d25aa2b66245f086718aa20cf6450393b0a6">CS_MASK</a></div><div class="ttdoc">Used for converting between this and SpriteOrder. </div><div class="ttdef"><b>Definition:</b> <a href="viewport_8h_source.html#l00071">viewport.h:71</a></div></div>
<div class="ttc" id="classVideoSystem_html_a86bb12336a2a4cc8130ead2befce579d"><div class="ttname"><a href="classVideoSystem.html#a86bb12336a2a4cc8130ead2befce579d">VideoSystem::GetClippedRectangle</a></div><div class="ttdeci">ClippedRectangle GetClippedRectangle()</div><div class="ttdoc">Get the current clipped blitting area. </div><div class="ttdef"><b>Definition:</b> <a href="video_8cpp_source.html#l00329">video.cpp:329</a></div></div>
<div class="ttc" id="map_8h_html_a7c69b6b7a0fc4760efb220790fb60b7b"><div class="ttname"><a href="map_8h.html#a7c69b6b7a0fc4760efb220790fb60b7b">GetPathType</a></div><div class="ttdeci">static PathType GetPathType(uint16 instance_data)</div><div class="ttdoc">Get the path type from the path voxel instance data. </div><div class="ttdef"><b>Definition:</b> <a href="map_8h_source.html#l00429">map.h:429</a></div></div>
<div class="ttc" id="classSpriteStorage_html_a61ff0ce89464b6f4d8777d5b8e7bb27f"><div class="ttname"><a href="classSpriteStorage.html#a61ff0ce89464b6f4d8777d5b8e7bb27f">SpriteStorage::GetAnimationSprite</a></div><div class="ttdeci">const ImageData * GetAnimationSprite(AnimationType anim_type, uint16 frame_index, PersonType pers_type, ViewOrientation view) const </div><div class="ttdoc">Get a sprite of an animation. </div><div class="ttdef"><b>Definition:</b> <a href="sprite__store_8h_source.html#l00575">sprite_store.h:575</a></div></div>
<div class="ttc" id="classCursor_html_a4efcb61a295b09d87fa1130fa642da4c"><div class="ttname"><a href="classCursor.html#a4efcb61a295b09d87fa1130fa642da4c">Cursor::SetCursor</a></div><div class="ttdeci">bool SetCursor(const XYZPoint16 &amp;cursor_pos, CursorType type, bool always=false)</div><div class="ttdoc">Set a cursor. </div><div class="ttdef"><b>Definition:</b> <a href="viewport_8cpp_source.html#l00528">viewport.cpp:528</a></div></div>
<div class="ttc" id="group__map__group_html_ga3622a3eda6865ce3e357b761e4f42dbdaa87f4633ba7d5b5b64b9224afc0dafc2"><div class="ttname"><a href="group__map__group.html#ga3622a3eda6865ce3e357b761e4f42dbdaa87f4633ba7d5b5b64b9224afc0dafc2">PATH_RAMP_SE</a></div><div class="ttdoc">Ramp from SE up to NW. </div><div class="ttdef"><b>Definition:</b> <a href="path_8h_source.html#l00081">path.h:81</a></div></div>
<div class="ttc" id="classVoxelCollector_html"><div class="ttname"><a href="classVoxelCollector.html">VoxelCollector</a></div><div class="ttdoc">Search the world for voxels to render. </div><div class="ttdef"><b>Definition:</b> <a href="viewport_8cpp_source.html#l00158">viewport.cpp:158</a></div></div>
<div class="ttc" id="stdafx_8h_html_a259fa4834387bd68627ddf37bb3ebdb9"><div class="ttname"><a href="stdafx_8h.html#a259fa4834387bd68627ddf37bb3ebdb9">int16</a></div><div class="ttdeci">signed short int16</div><div class="ttdoc">Signed 16 bit wide data type. </div><div class="ttdef"><b>Definition:</b> <a href="stdafx_8h_source.html#l00133">stdafx.h:133</a></div></div>
<div class="ttc" id="video_8h_html"><div class="ttname"><a href="video_8h.html">video.h</a></div><div class="ttdoc">Video handling. </div></div>
<div class="ttc" id="coaster__build_8h_html_ada412247821f7dec538f27e3266c179a"><div class="ttname"><a href="coaster__build_8h.html#ada412247821f7dec538f27e3266c179a">_coaster_builder</a></div><div class="ttdeci">CoasterBuildMode _coaster_builder</div><div class="ttdoc">Coaster build mouse mode handler. </div><div class="ttdef"><b>Definition:</b> <a href="coaster__gui_8cpp_source.html#l00023">coaster_gui.cpp:23</a></div></div>
<div class="ttc" id="classDefaultMouseMode_html_aacc2b36c5e758d42c8cafea7b23ef211"><div class="ttname"><a href="classDefaultMouseMode.html#aacc2b36c5e758d42c8cafea7b23ef211">DefaultMouseMode::LeaveMode</a></div><div class="ttdeci">void LeaveMode() override</div><div class="ttdoc">Notification that the mouse mode is about to be disabled. </div><div class="ttdef"><b>Definition:</b> <a href="viewport_8cpp_source.html#l01656">viewport.cpp:1656</a></div></div>
<div class="ttc" id="group__map__group_html_gga17a68962aecf6bf22a97d7e78da6fcfba10ab7da315c2499443a1b74e0b1fb791"><div class="ttname"><a href="group__map__group.html#gga17a68962aecf6bf22a97d7e78da6fcfba10ab7da315c2499443a1b74e0b1fb791">FDT_GROUND</a></div><div class="ttdoc">Bare (ground) foundation type. </div><div class="ttdef"><b>Definition:</b> <a href="tile_8h_source.html#l00206">tile.h:206</a></div></div>
<div class="ttc" id="classVoxelCollector_html_a8270a2843c6824b485561e9721fa215d"><div class="ttname"><a href="classVoxelCollector.html#a8270a2843c6824b485561e9721fa215d">VoxelCollector::sprites</a></div><div class="ttdeci">const SpriteStorage * sprites</div><div class="ttdoc">Sprite collection of the right size. </div><div class="ttdef"><b>Definition:</b> <a href="viewport_8cpp_source.html#l00194">viewport.cpp:194</a></div></div>
<div class="ttc" id="viewport_8h_html_ac72850d8ae4e0c914f4227f845921a3fa92ab52460b42f3a5b454ef385b180073"><div class="ttname"><a href="viewport_8h.html#ac72850d8ae4e0c914f4227f845921a3fa92ab52460b42f3a5b454ef385b180073">FW_EDGE</a></div><div class="ttdoc">Find tile edge. </div><div class="ttdef"><b>Definition:</b> <a href="viewport_8h_source.html#l00104">viewport.h:104</a></div></div>
<div class="ttc" id="viewport_8cpp_html_ab5343989a755d5a486399d48bf5b199e"><div class="ttname"><a href="viewport_8cpp.html#ab5343989a755d5a486399d48bf5b199e">DrawRide</a></div><div class="ttdeci">static int DrawRide(int32 slice, int zpos, int32 basex, int32 basey, ViewOrientation orient, uint16 number, uint16 voxel_number, DrawData *dd, uint8 *platform)</div><div class="ttdoc">Prepare to add the sprite for a ride. </div><div class="ttdef"><b>Definition:</b> <a href="viewport_8cpp_source.html#l00829">viewport.cpp:829</a></div></div>
<div class="ttc" id="classSpriteStorage_html_ac1ead8c0b31f92a5da7f12fa973bc225"><div class="ttname"><a href="classSpriteStorage.html#ac1ead8c0b31f92a5da7f12fa973bc225">SpriteStorage::surface</a></div><div class="ttdeci">SurfaceData surface[GTP_COUNT]</div><div class="ttdoc">Surface data. </div><div class="ttdef"><b>Definition:</b> <a href="sprite__store_8h_source.html#l00592">sprite_store.h:592</a></div></div>
<div class="ttc" id="person_8h_html"><div class="ttname"><a href="person_8h.html">person.h</a></div><div class="ttdoc">Persons in the park. </div></div>
<div class="ttc" id="structDrawData_html"><div class="ttname"><a href="structDrawData.html">DrawData</a></div><div class="ttdoc">Data temporary needed for ordering sprites and blitting them to the screen. </div><div class="ttdef"><b>Definition:</b> <a href="viewport_8cpp_source.html#l00227">viewport.cpp:227</a></div></div>
<div class="ttc" id="classSpriteStorage_html_ab957fef30b88d860224ca7718817f943"><div class="ttname"><a href="classSpriteStorage.html#ab957fef30b88d860224ca7718817f943">SpriteStorage::GetCursorSprite</a></div><div class="ttdeci">const ImageData * GetCursorSprite(uint8 surf_spr, ViewOrientation orient) const </div><div class="ttdoc">Get a mouse tile cursor sprite. </div><div class="ttdef"><b>Definition:</b> <a href="sprite__store_8h_source.html#l00538">sprite_store.h:538</a></div></div>
<div class="ttc" id="classMouseModes_html_ac5978eebc85e35aad57b87d123375c7a"><div class="ttname"><a href="classMouseModes.html#ac5978eebc85e35aad57b87d123375c7a">MouseModes::current</a></div><div class="ttdeci">MouseMode * current</div><div class="ttdoc">Current mouse mode. </div><div class="ttdef"><b>Definition:</b> <a href="viewport_8h_source.html#l00327">viewport.h:327</a></div></div>
<div class="ttc" id="tile_8h_html_a642780fc34ac497216ea98fedeacb570a6c81b59cdecd78ab382a2adc6cbbd539"><div class="ttname"><a href="tile_8h.html#a642780fc34ac497216ea98fedeacb570a6c81b59cdecd78ab382a2adc6cbbd539">SSP_FLAT_SINGLE_NS</a></div><div class="ttdoc">Single height for flat terrain, north and south view. </div><div class="ttdef"><b>Definition:</b> <a href="tile_8h_source.html#l00084">tile.h:84</a></div></div>
<div class="ttc" id="palette_8h_html_a7cba9cbe653c413f3371431e9af43478"><div class="ttname"><a href="palette_8h.html#a7cba9cbe653c413f3371431e9af43478">GetA</a></div><div class="ttdeci">static uint8 GetA(uint32 rgba)</div><div class="ttdoc">Retrieve the opaqueness of the provided pixel value. </div><div class="ttdef"><b>Definition:</b> <a href="palette_8h_source.html#l00073">palette.h:73</a></div></div>
<div class="ttc" id="map_8h_html_ada9f0c1420f66f999469d82ef2262280"><div class="ttname"><a href="map_8h.html#ada9f0c1420f66f999469d82ef2262280">SmallRideInstance</a></div><div class="ttdeci">SmallRideInstance</div><div class="ttdoc">In general, ride instances are stored in the RidesManager, where there is room to store all the detai...</div><div class="ttdef"><b>Definition:</b> <a href="map_8h_source.html#l00036">map.h:36</a></div></div>
<div class="ttc" id="select__mode_8cpp_html_af1238e40327ed9b3c9d021629a4f5f3d"><div class="ttname"><a href="select__mode_8cpp.html#af1238e40327ed9b3c9d021629a4f5f3d">_select_mousemode</a></div><div class="ttdeci">SelectMouseMode _select_mousemode</div><div class="ttdoc">Mouse select mode coordinator. </div><div class="ttdef"><b>Definition:</b> <a href="select__mode_8cpp_source.html#l00017">select_mode.cpp:17</a></div></div>
<div class="ttc" id="group__map__group_html_ga3622a3eda6865ce3e357b761e4f42dbdaeef89d8856a3b22936d081d388e7818c"><div class="ttname"><a href="group__map__group.html#ga3622a3eda6865ce3e357b761e4f42dbdaeef89d8856a3b22936d081d388e7818c">PATH_RAMP_NE</a></div><div class="ttdoc">Ramp from NE up to SW. </div><div class="ttdef"><b>Definition:</b> <a href="path_8h_source.html#l00079">path.h:79</a></div></div>
<div class="ttc" id="group__viewport__group_html_ggabbe637356c8cb749a9726f13658031faa3d46060b12c67710f20827a93e863f81"><div class="ttname"><a href="group__viewport__group.html#ggabbe637356c8cb749a9726f13658031faa3d46060b12c67710f20827a93e863f81">CUR_TYPE_SOUTH</a></div><div class="ttdoc">Show a S corner highlight. </div><div class="ttdef"><b>Definition:</b> <a href="viewport_8h_source.html#l00044">viewport.h:44</a></div></div>
<div class="ttc" id="classImageData_html_a961b9b222bef6dd1c0f221f2d1677be4"><div class="ttname"><a href="classImageData.html#a961b9b222bef6dd1c0f221f2d1677be4">ImageData::GetPixel</a></div><div class="ttdeci">uint32 GetPixel(uint16 xoffset, uint16 yoffset, const Recolouring *recolour=nullptr, GradientShift shift=GS_NORMAL) const </div><div class="ttdoc">Return the pixel-value of the provided position. </div><div class="ttdef"><b>Definition:</b> <a href="sprite__data_8cpp_source.html#l00183">sprite_data.cpp:183</a></div></div>
<div class="ttc" id="classDefaultMouseMode_html_aef433bc4835a11abac004999fd409b97"><div class="ttname"><a href="classDefaultMouseMode.html#aef433bc4835a11abac004999fd409b97">DefaultMouseMode::EnableCursors</a></div><div class="ttdeci">bool EnableCursors() override</div><div class="ttdoc">Control display of cursors in the mouse mode. </div><div class="ttdef"><b>Definition:</b> <a href="viewport_8cpp_source.html#l01660">viewport.cpp:1660</a></div></div>
<div class="ttc" id="classMouseMode_html_ac28b070af073b693313ab39557d64d7a"><div class="ttname"><a href="classMouseMode.html#ac28b070af073b693313ab39557d64d7a">MouseMode::ActivateMode</a></div><div class="ttdeci">virtual void ActivateMode(const Point16 &amp;pos)=0</div><div class="ttdoc">Activate the mouse mode. </div></div>
<div class="ttc" id="classVoxelCollector_html_ad888a7e30cdb2f7631ae8defb7d0737b"><div class="ttname"><a href="classVoxelCollector.html#ad888a7e30cdb2f7631ae8defb7d0737b">VoxelCollector::tile_width</a></div><div class="ttdeci">uint16 tile_width</div><div class="ttdoc">Width of a tile. </div><div class="ttdef"><b>Definition:</b> <a href="viewport_8cpp_source.html#l00191">viewport.cpp:191</a></div></div>
<div class="ttc" id="classMouseModes_html_a017410b133ee48dfb89c1e3c89d9b382"><div class="ttname"><a href="classMouseModes.html#a017410b133ee48dfb89c1e3c89d9b382">MouseModes::SetViewportMousemode</a></div><div class="ttdeci">void SetViewportMousemode()</div><div class="ttdoc">Decide the most appropriate mouse mode of the viewport, depending on available windows. </div><div class="ttdef"><b>Definition:</b> <a href="viewport_8cpp_source.html#l01709">viewport.cpp:1709</a></div></div>
<div class="ttc" id="classBaseCursor_html"><div class="ttname"><a href="classBaseCursor.html">BaseCursor</a></div><div class="ttdoc">Base class of a viewport cursor. </div><div class="ttdef"><b>Definition:</b> <a href="viewport_8h_source.html#l00125">viewport.h:125</a></div></div>
<div class="ttc" id="structDrawData_html_a2637f5d86a4291f50f19fa1d942e645a"><div class="ttname"><a href="structDrawData.html#a2637f5d86a4291f50f19fa1d942e645a">DrawData::level</a></div><div class="ttdeci">int32 level</div><div class="ttdoc">Slice of this sprite (vertical row). </div><div class="ttdef"><b>Definition:</b> <a href="viewport_8cpp_source.html#l00228">viewport.cpp:228</a></div></div>
<div class="ttc" id="viewport_8cpp_html_a0dafeaffbb866e3726bb18cdae3d2a11"><div class="ttname"><a href="viewport_8cpp.html#a0dafeaffbb866e3726bb18cdae3d2a11">InitMouseModes</a></div><div class="ttdeci">void InitMouseModes()</div><div class="ttdoc">Initialize the mouse modes. </div><div class="ttdef"><b>Definition:</b> <a href="viewport_8cpp_source.html#l01788">viewport.cpp:1788</a></div></div>
<div class="ttc" id="coaster__build_8h_html"><div class="ttname"><a href="coaster__build_8h.html">coaster_build.h</a></div><div class="ttdoc">Roller coaster construction mouse mode. </div></div>
<div class="ttc" id="palette_8h_html_abf71a188c2d46f23ded2cac6ca526b86"><div class="ttname"><a href="palette_8h.html#abf71a188c2d46f23ded2cac6ca526b86">TRANSPARENT</a></div><div class="ttdeci">static const uint8 TRANSPARENT</div><div class="ttdoc">Opacity value of a fully transparent pixel. </div><div class="ttdef"><b>Definition:</b> <a href="palette_8h_source.html#l00020">palette.h:20</a></div></div>
<div class="ttc" id="viewport_8h_html_ad83c05db97e3590a5da165ead3d5792daf8ca681385899c6a3dd512fb03550d02"><div class="ttname"><a href="viewport_8h.html#ad83c05db97e3590a5da165ead3d5792daf8ca681385899c6a3dd512fb03550d02">SO_RIDE</a></div><div class="ttdoc">Draw ride sprites. </div><div class="ttdef"><b>Definition:</b> <a href="viewport_8h_source.html#l00091">viewport.h:91</a></div></div>
<div class="ttc" id="path__build_8h_html"><div class="ttname"><a href="path__build_8h.html">path_build.h</a></div><div class="ttdoc">Path building manager declarations. </div></div>
<div class="ttc" id="classPixelFinder_html_a22026f65fa28030f9673fbdf70ee5415"><div class="ttname"><a href="classPixelFinder.html#a22026f65fa28030f9673fbdf70ee5415">PixelFinder::found</a></div><div class="ttdeci">bool found</div><div class="ttdoc">Found a match. </div><div class="ttdef"><b>Definition:</b> <a href="viewport_8cpp_source.html#l00294">viewport.cpp:294</a></div></div>
<div class="ttc" id="group__map__group_html_gae1beaf14b9effb4a54e82830c7b36616"><div class="ttname"><a href="group__map__group.html#gae1beaf14b9effb4a54e82830c7b36616">_world</a></div><div class="ttdeci">VoxelWorld _world</div><div class="ttdoc">The game world. </div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l00027">map.cpp:27</a></div></div>
<div class="ttc" id="classDefaultMouseMode_html_a8670baff759fba441a05d4d56af54333"><div class="ttname"><a href="classDefaultMouseMode.html#a8670baff759fba441a05d4d56af54333">DefaultMouseMode::ActivateMode</a></div><div class="ttdeci">void ActivateMode(const Point16 &amp;pos) override</div><div class="ttdoc">Activate the mouse mode. </div><div class="ttdef"><b>Definition:</b> <a href="viewport_8cpp_source.html#l01652">viewport.cpp:1652</a></div></div>
<div class="ttc" id="structRectangle_html_ab794667ffad2a46061bc417f99c031cc"><div class="ttname"><a href="structRectangle.html#ab794667ffad2a46061bc417f99c031cc">Rectangle::base</a></div><div class="ttdeci">PT base</div><div class="ttdoc">Base coordinate. </div><div class="ttdef"><b>Definition:</b> <a href="geometry_8h_source.html#l00349">geometry.h:349</a></div></div>
<div class="ttc" id="classSpriteStorage_html_a79bef44dd025318889a7801a1965e485"><div class="ttname"><a href="classSpriteStorage.html#a79bef44dd025318889a7801a1965e485">SpriteStorage::support</a></div><div class="ttdeci">Support support</div><div class="ttdoc">Support block. </div><div class="ttdef"><b>Definition:</b> <a href="sprite__store_8h_source.html#l00595">sprite_store.h:595</a></div></div>
<div class="ttc" id="viewport_8h_html_a7eaf31dcf3c53b721a3144bb135f8d25abcab872146b299b3b600a3d351555f08"><div class="ttname"><a href="viewport_8h.html#a7eaf31dcf3c53b721a3144bb135f8d25abcab872146b299b3b600a3d351555f08">CS_PATH</a></div><div class="ttdoc">Path sprite. </div><div class="ttdef"><b>Definition:</b> <a href="viewport_8h_source.html#l00066">viewport.h:66</a></div></div>
<div class="ttc" id="classWorldAdditions_html_ad85d924779abb9546109b59f079413af"><div class="ttname"><a href="classWorldAdditions.html#ad85d924779abb9546109b59f079413af">WorldAdditions::MarkDirty</a></div><div class="ttdeci">void MarkDirty(Viewport *vp)</div><div class="ttdoc">Mark the additions in the display as outdated, so they get repainted. </div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l00705">map.cpp:705</a></div></div>
<div class="ttc" id="viewport_8cpp_html_a168b8e1038efc200816524bab3092311"><div class="ttname"><a href="viewport_8cpp.html#a168b8e1038efc200816524bab3092311">GetViewport</a></div><div class="ttdeci">Viewport * GetViewport()</div><div class="ttdoc">Get the address of the viewport window. </div><div class="ttdef"><b>Definition:</b> <a href="viewport_8cpp_source.html#l01688">viewport.cpp:1688</a></div></div>
<div class="ttc" id="classWorldAdditions_html_ac8b6dae54970fb065068614968a43c8e"><div class="ttname"><a href="classWorldAdditions.html#ac8b6dae54970fb065068614968a43c8e">WorldAdditions::GetStack</a></div><div class="ttdeci">const VoxelStack * GetStack(uint16 x, uint16 y) const </div><div class="ttdoc">Get a voxel stack (read-only) either from the modifications, or from the &#39;real&#39; _world. </div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l00692">map.cpp:692</a></div></div>
<div class="ttc" id="group__map__group_html_gaa25639f3980e1fa4c64a58d3a8e4d149"><div class="ttname"><a href="group__map__group.html#gaa25639f3980e1fa4c64a58d3a8e4d149">TileSlope</a></div><div class="ttdeci">TileSlope</div><div class="ttdoc">Slope description of a surface tile. </div><div class="ttdef"><b>Definition:</b> <a href="tile_8h_source.html#l00054">tile.h:54</a></div></div>
<div class="ttc" id="classCursor_html_a7385fd41994cc05ff7bfdaeb427fd448"><div class="ttname"><a href="classCursor.html#a7385fd41994cc05ff7bfdaeb427fd448">Cursor::Cursor</a></div><div class="ttdeci">Cursor(Viewport *vp)</div><div class="ttdoc">Constructor of a cursor. </div><div class="ttdef"><b>Definition:</b> <a href="viewport_8cpp_source.html#l00493">viewport.cpp:493</a></div></div>
<div class="ttc" id="classVoxelWorld_html_a813f4f0503efc085557fe4359e0ee520"><div class="ttname"><a href="classVoxelWorld.html#a813f4f0503efc085557fe4359e0ee520">VoxelWorld::GetStack</a></div><div class="ttdeci">const VoxelStack * GetStack(uint16 x, uint16 y) const </div><div class="ttdoc">Get a voxel stack (for read-only access). </div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l00454">map.cpp:454</a></div></div>
<div class="ttc" id="classWindow_html_a28e5baa158219bb8485764c99239d211"><div class="ttname"><a href="classWindow.html#a28e5baa158219bb8485764c99239d211">Window::rect</a></div><div class="ttdeci">Rectangle32 rect</div><div class="ttdoc">Screen area covered by the window. </div><div class="ttdef"><b>Definition:</b> <a href="window_8h_source.html#l00139">window.h:139</a></div></div>
<div class="ttc" id="ride__type_8h_html_a4cf3c03a141e04aea3c805a9e97f1835"><div class="ttname"><a href="ride__type_8h.html#a4cf3c03a141e04aea3c805a9e97f1835">INVALID_RIDE_INSTANCE</a></div><div class="ttdeci">static const uint16 INVALID_RIDE_INSTANCE</div><div class="ttdoc">Value representing &#39;no ride instance found&#39;. </div><div class="ttdef"><b>Definition:</b> <a href="ride__type_8h_source.html#l00021">ride_type.h:21</a></div></div>
<div class="ttc" id="structRectangle_html_aa81e161d1fdaa8801d202f59b4d541e0"><div class="ttname"><a href="structRectangle.html#aa81e161d1fdaa8801d202f59b4d541e0">Rectangle::height</a></div><div class="ttdeci">SZ height</div><div class="ttdoc">Height of the rectangle. </div><div class="ttdef"><b>Definition:</b> <a href="geometry_8h_source.html#l00351">geometry.h:351</a></div></div>
<div class="ttc" id="classMouseModes_html_a16db84eb6ab33fd242373b7f1f6c45e6"><div class="ttname"><a href="classMouseModes.html#a16db84eb6ab33fd242373b7f1f6c45e6">MouseModes::main_display</a></div><div class="ttdeci">Viewport * main_display</div><div class="ttdoc">Main screen, managed by Viewport. </div><div class="ttdef"><b>Definition:</b> <a href="viewport_8h_source.html#l00326">viewport.h:326</a></div></div>
<div class="ttc" id="classVideoSystem_html_a16e90a3e4cd3100a02dc37e928224363"><div class="ttname"><a href="classVideoSystem.html#a16e90a3e4cd3100a02dc37e928224363">VideoSystem::GetYSize</a></div><div class="ttdeci">uint16 GetYSize() const </div><div class="ttdoc">Get vertical size of the screen. </div><div class="ttdef"><b>Definition:</b> <a href="video_8h_source.html#l00083">video.h:83</a></div></div>
<div class="ttc" id="classVoxelCollector_html_a95f3b9137ebbcf6851d24c27bbcece2c"><div class="ttname"><a href="classVoxelCollector.html#a95f3b9137ebbcf6851d24c27bbcece2c">VoxelCollector::orient</a></div><div class="ttdeci">ViewOrientation orient</div><div class="ttdoc">Direction of view. </div><div class="ttdef"><b>Definition:</b> <a href="viewport_8cpp_source.html#l00193">viewport.cpp:193</a></div></div>
<div class="ttc" id="group__viewport__group_html_ggabbe637356c8cb749a9726f13658031faa2a5082d288ce007dfe479ab146c4483c"><div class="ttname"><a href="group__viewport__group.html#ggabbe637356c8cb749a9726f13658031faa2a5082d288ce007dfe479ab146c4483c">CUR_TYPE_EDGE_SW</a></div><div class="ttdoc">Show a SW edge sprite highlight. </div><div class="ttdef"><b>Definition:</b> <a href="viewport_8h_source.html#l00053">viewport.h:53</a></div></div>
<div class="ttc" id="path_8cpp_html_a9c3f71ef7e2e68c9e2377272bacf65d7"><div class="ttname"><a href="path_8cpp.html#a9c3f71ef7e2e68c9e2377272bacf65d7">_path_rotation</a></div><div class="ttdeci">const uint8 _path_rotation[PATH_COUNT][4]</div><div class="ttdoc">Path sprites to use when rotating the world view. </div><div class="ttdef"><b>Definition:</b> <a href="path_8cpp_source.html#l00162">path.cpp:162</a></div></div>
<div class="ttc" id="video_8cpp_html_a232b6e7cb0a75c12228a8aa17d75fd18"><div class="ttname"><a href="video_8cpp.html#a232b6e7cb0a75c12228a8aa17d75fd18">_video</a></div><div class="ttdeci">VideoSystem _video</div><div class="ttdoc">Video sub-system. </div><div class="ttdef"><b>Definition:</b> <a href="video_8cpp_source.html#l00025">video.cpp:25</a></div></div>
<div class="ttc" id="stdafx_8h_html_a43d43196463bde49cb067f5c20ab8481"><div class="ttname"><a href="stdafx_8h.html#a43d43196463bde49cb067f5c20ab8481">int32</a></div><div class="ttdeci">signed int int32</div><div class="ttdoc">Signed 32 bit wide data type. </div><div class="ttdef"><b>Definition:</b> <a href="stdafx_8h_source.html#l00135">stdafx.h:135</a></div></div>
<div class="ttc" id="classEdgeCursor_html_aa4d9c783417ddd380aabdf2a51e35e7e"><div class="ttname"><a href="classEdgeCursor.html#aa4d9c783417ddd380aabdf2a51e35e7e">EdgeCursor::cursor_pos</a></div><div class="ttdeci">XYZPoint16 cursor_pos</div><div class="ttdoc">Voxel position of the cursor. </div><div class="ttdef"><b>Definition:</b> <a href="viewport_8h_source.html#l00202">viewport.h:202</a></div></div>
<div class="ttc" id="classMouseModes_html_a02982918a7f422b77fa2500d9bace213"><div class="ttname"><a href="classMouseModes.html#a02982918a7f422b77fa2500d9bace213">MouseModes::SwitchMode</a></div><div class="ttdeci">void SwitchMode(MouseMode *new_mode)</div><div class="ttdoc">Switch to a new mouse mode. </div><div class="ttdef"><b>Definition:</b> <a href="viewport_8cpp_source.html#l01757">viewport.cpp:1757</a></div></div>
<div class="ttc" id="stdafx_8h_html"><div class="ttname"><a href="stdafx_8h.html">stdafx.h</a></div><div class="ttdoc">Common type and macro definitions. </div></div>
<div class="ttc" id="group__map__group_html_ggabad48584a1852521ff578b647f07fdd3ae07f82bd43e8d66a7394d5ebf0f47c39"><div class="ttname"><a href="group__map__group.html#ggabad48584a1852521ff578b647f07fdd3ae07f82bd43e8d66a7394d5ebf0f47c39">VOR_SOUTH</a></div><div class="ttdoc">View with top of the world to the south. </div><div class="ttdef"><b>Definition:</b> <a href="orientation_8h_source.html#l00024">orientation.h:24</a></div></div>
<div class="ttc" id="viewport_8h_html_a7eaf31dcf3c53b721a3144bb135f8d25a6b280c8073497e12ccb912cefbcbca57"><div class="ttname"><a href="viewport_8h.html#a7eaf31dcf3c53b721a3144bb135f8d25a6b280c8073497e12ccb912cefbcbca57">CS_RIDE</a></div><div class="ttdoc">Ride sprite. </div><div class="ttdef"><b>Definition:</b> <a href="viewport_8h_source.html#l00067">viewport.h:67</a></div></div>
<div class="ttc" id="group__map__group_html_ggabad48584a1852521ff578b647f07fdd3a4b831527a6910705d695845ae3f4d139"><div class="ttname"><a href="group__map__group.html#ggabad48584a1852521ff578b647f07fdd3a4b831527a6910705d695845ae3f4d139">VOR_NUM_ORIENT</a></div><div class="ttdoc">Number of orientations. </div><div class="ttdef"><b>Definition:</b> <a href="orientation_8h_source.html#l00027">orientation.h:27</a></div></div>
<div class="ttc" id="classViewport_html_acf62487474e985c772ac2d98dd2e66b9"><div class="ttname"><a href="classViewport.html#acf62487474e985c772ac2d98dd2e66b9">Viewport::EnableWorldAdditions</a></div><div class="ttdeci">void EnableWorldAdditions()</div><div class="ttdoc">Enable flashing display of showing proposed game world additions to the player. </div><div class="ttdef"><b>Definition:</b> <a href="viewport_8cpp_source.html#l00386">viewport.cpp:386</a></div></div>
<div class="ttc" id="classMultiCursor_html_adc1857609eab480a07e576015fe1353e"><div class="ttname"><a href="classMultiCursor.html#adc1857609eab480a07e576015fe1353e">MultiCursor::GetZpos</a></div><div class="ttdeci">uint8 GetZpos(int xpos, int ypos)</div><div class="ttdoc">Get the Z position of a tile within the cursor. </div><div class="ttdef"><b>Definition:</b> <a href="viewport_8cpp_source.html#l00576">viewport.cpp:576</a></div></div>
<div class="ttc" id="classClippedRectangle_html_a26baabc348d1f4636f6bf359b7948faf"><div class="ttname"><a href="classClippedRectangle.html#a26baabc348d1f4636f6bf359b7948faf">ClippedRectangle::width</a></div><div class="ttdeci">uint16 width</div><div class="ttdoc">Number of columns. </div><div class="ttdef"><b>Definition:</b> <a href="video_8h_source.html#l00039">video.h:39</a></div></div>
<div class="ttc" id="map_8h_html_ada9f0c1420f66f999469d82ef2262280aa21a61ab17228d4482507c9526547353"><div class="ttname"><a href="map_8h.html#ada9f0c1420f66f999469d82ef2262280aa21a61ab17228d4482507c9526547353">SRI_PATH</a></div><div class="ttdoc">Path. </div><div class="ttdef"><b>Definition:</b> <a href="map_8h_source.html#l00043">map.h:43</a></div></div>
<div class="ttc" id="classPerson_html_a463a7452b5a64f66d7589bb3e45236bb"><div class="ttname"><a href="classPerson.html#a463a7452b5a64f66d7589bb3e45236bb">Person::walk</a></div><div class="ttdeci">const WalkInformation * walk</div><div class="ttdoc">Walk animation sequence being performed. </div><div class="ttdef"><b>Definition:</b> <a href="person_8h_source.html#l00134">person.h:134</a></div></div>
<div class="ttc" id="viewport_8h_html_ad83c05db97e3590a5da165ead3d5792da07e58ebbb1675bae51b2a927889dd942"><div class="ttname"><a href="viewport_8h.html#ad83c05db97e3590a5da165ead3d5792da07e58ebbb1675bae51b2a927889dd942">SO_PLATFORM_BACK</a></div><div class="ttdoc">Background behind the ride (platform background). </div><div class="ttdef"><b>Definition:</b> <a href="viewport_8h_source.html#l00090">viewport.h:90</a></div></div>
<div class="ttc" id="classVoxelStack_html_a1b4b53aef1bef7528d1eb330e32fa25e"><div class="ttname"><a href="classVoxelStack.html#a1b4b53aef1bef7528d1eb330e32fa25e">VoxelStack::base</a></div><div class="ttdeci">int16 base</div><div class="ttdoc">Height of the bottom voxel. </div><div class="ttdef"><b>Definition:</b> <a href="map_8h_source.html#l00476">map.h:476</a></div></div>
<div class="ttc" id="classSupport_html_a610989653010770d176d77e739a2f741"><div class="ttname"><a href="classSupport.html#a610989653010770d176d77e739a2f741">Support::sprites</a></div><div class="ttdeci">ImageData * sprites[SSP_COUNT]</div><div class="ttdoc">Support sprites. </div><div class="ttdef"><b>Definition:</b> <a href="sprite__store_8h_source.html#l00172">sprite_store.h:172</a></div></div>
<div class="ttc" id="ride__gui_8cpp_html_a338a982dd3d6b4f5919647364e1b6f7c"><div class="ttname"><a href="ride__gui_8cpp.html#a338a982dd3d6b4f5919647364e1b6f7c">_shop_placer</a></div><div class="ttdeci">ShopPlacementManager _shop_placer</div><div class="ttdoc">Coordination object for placing a shop. </div><div class="ttdef"><b>Definition:</b> <a href="ride__gui_8cpp_source.html#l00024">ride_gui.cpp:24</a></div></div>
<div class="ttc" id="classBaseCursor_html_a205b847cffc085371726b27faa64a129"><div class="ttname"><a href="classBaseCursor.html#a205b847cffc085371726b27faa64a129">BaseCursor::MarkDirty</a></div><div class="ttdeci">virtual void MarkDirty()=0</div><div class="ttdoc">Update the cursor at the screen. </div></div>
<div class="ttc" id="classViewport_html_a8a0e45b531578052b03d8435f0f3df5c"><div class="ttname"><a href="classViewport.html#a8a0e45b531578052b03d8435f0f3df5c">Viewport::ComputeX</a></div><div class="ttdeci">int32 ComputeX(int32 xpos, int32 ypos)</div><div class="ttdoc">Get relative X position of a point in the world (used for marking window parts dirty). </div><div class="ttdef"><b>Definition:</b> <a href="viewport_8cpp_source.html#l01369">viewport.cpp:1369</a></div></div>
<div class="ttc" id="classViewport_html_a87164c2051ecd5d9382045a785f5a009"><div class="ttname"><a href="classViewport.html#a87164c2051ecd5d9382045a785f5a009">Viewport::tile_height</a></div><div class="ttdeci">uint16 tile_height</div><div class="ttdoc">Height of a tile. </div><div class="ttdef"><b>Definition:</b> <a href="viewport_8h_source.html#l00247">viewport.h:247</a></div></div>
<div class="ttc" id="structVoxel_html"><div class="ttname"><a href="structVoxel.html">Voxel</a></div><div class="ttdoc">One voxel cell in the world. </div><div class="ttdef"><b>Definition:</b> <a href="map_8h_source.html#l00063">map.h:63</a></div></div>
<div class="ttc" id="group__map__group_html_ga3622a3eda6865ce3e357b761e4f42dbdab04a104637f775750f8060270c1237c4"><div class="ttname"><a href="group__map__group.html#ga3622a3eda6865ce3e357b761e4f42dbdab04a104637f775750f8060270c1237c4">PATH_FLAT_COUNT</a></div><div class="ttdoc">Number of flat path sprites. </div><div class="ttdef"><b>Definition:</b> <a href="path_8h_source.html#l00077">path.h:77</a></div></div>
<div class="ttc" id="structVoxel_html_a8135955c165682b875b608d7433aada7"><div class="ttname"><a href="structVoxel.html#a8135955c165682b875b608d7433aada7">Voxel::GetFenceType</a></div><div class="ttdeci">FenceType GetFenceType(TileEdge edge) const </div><div class="ttdoc">Set the fence type of one of the four edges. </div><div class="ttdef"><b>Definition:</b> <a href="map_8h_source.html#l00130">map.h:130</a></div></div>
<div class="ttc" id="classViewport_html_ac2f43f9ca5af54296d614f1891597c0a"><div class="ttname"><a href="classViewport.html#ac2f43f9ca5af54296d614f1891597c0a">Viewport::ComputeCursorPosition</a></div><div class="ttdeci">ClickableSprite ComputeCursorPosition(FinderData *fdata)</div><div class="ttdoc">Compute position of the mouse cursor, and return the result. </div><div class="ttdef"><b>Definition:</b> <a href="viewport_8cpp_source.html#l01475">viewport.cpp:1475</a></div></div>
<div class="ttc" id="structXYZPoint_html"><div class="ttname"><a href="structXYZPoint.html">XYZPoint&lt; int32 &gt;</a></div></div>
<div class="ttc" id="classFinderData_html_a0d828371987191a2190899192754822a"><div class="ttname"><a href="classFinderData.html#a0d828371987191a2190899192754822a">FinderData::ride</a></div><div class="ttdeci">uint16 ride</div><div class="ttdoc">Found ride instance, if any. </div><div class="ttdef"><b>Definition:</b> <a href="viewport_8h_source.html#l00118">viewport.h:118</a></div></div>
<div class="ttc" id="classDefaultMouseMode_html_afd528ebd02c81ea9e1a219e5f9479da6"><div class="ttname"><a href="classDefaultMouseMode.html#afd528ebd02c81ea9e1a219e5f9479da6">DefaultMouseMode::MayActivateMode</a></div><div class="ttdeci">bool MayActivateMode() override</div><div class="ttdoc">Query the mode whether it can be enabled. </div><div class="ttdef"><b>Definition:</b> <a href="viewport_8cpp_source.html#l01647">viewport.cpp:1647</a></div></div>
<div class="ttc" id="structXYZPoint_html_aea2c3552caee6e81c3b007ff78834b99"><div class="ttname"><a href="structXYZPoint.html#aea2c3552caee6e81c3b007ff78834b99">XYZPoint::y</a></div><div class="ttdeci">CT y</div><div class="ttdoc">Y coordinate. </div><div class="ttdef"><b>Definition:</b> <a href="geometry_8h_source.html#l00101">geometry.h:101</a></div></div>
<div class="ttc" id="group__map__group_html_ga29bb8f9503c34074bad3c762c92ee68b"><div class="ttname"><a href="group__map__group.html#ga29bb8f9503c34074bad3c762c92ee68b">TileEdge</a></div><div class="ttdeci">TileEdge</div><div class="ttdoc">Edges of a tile, starts at NE direction, and rotates clockwise. </div><div class="ttdef"><b>Definition:</b> <a href="tile_8h_source.html#l00117">tile.h:117</a></div></div>
<div class="ttc" id="classVoxelObject_html_ab12d97f145e1b434c7cfe15db46f31cb"><div class="ttname"><a href="classVoxelObject.html#ab12d97f145e1b434c7cfe15db46f31cb">VoxelObject::pix_pos</a></div><div class="ttdeci">XYZPoint16 pix_pos</div><div class="ttdoc">Position of the object inside the voxel (0..255, but may be outside). </div><div class="ttdef"><b>Definition:</b> <a href="map_8h_source.html#l00359">map.h:359</a></div></div>
<div class="ttc" id="structXYZPoint_html_a97215f048dde4da40be2742267ab7224"><div class="ttname"><a href="structXYZPoint.html#a97215f048dde4da40be2742267ab7224">XYZPoint::z</a></div><div class="ttdeci">CT z</div><div class="ttdoc">Z coordinate. </div><div class="ttdef"><b>Definition:</b> <a href="geometry_8h_source.html#l00102">geometry.h:102</a></div></div>
<div class="ttc" id="classViewport_html_a5a238302d2aaeccf11d004c66637bfd7"><div class="ttname"><a href="classViewport.html#a5a238302d2aaeccf11d004c66637bfd7">Viewport::view_pos</a></div><div class="ttdeci">XYZPoint32 view_pos</div><div class="ttdoc">Position of the centre point of the viewport. </div><div class="ttdef"><b>Definition:</b> <a href="viewport_8h_source.html#l00245">viewport.h:245</a></div></div>
<div class="ttc" id="classViewport_html_a9ffc3b53f8f141f7a54c7f5aeab5a566"><div class="ttname"><a href="classViewport.html#a9ffc3b53f8f141f7a54c7f5aeab5a566">Viewport::ComputeY</a></div><div class="ttdeci">int32 ComputeY(int32 xpos, int32 ypos, int32 zpos)</div><div class="ttdoc">Get relative Y position of a point in the world (used for marking window parts dirty). </div><div class="ttdef"><b>Definition:</b> <a href="viewport_8cpp_source.html#l01381">viewport.cpp:1381</a></div></div>
<div class="ttc" id="group__map__group_html_ggaa25639f3980e1fa4c64a58d3a8e4d149af7665353eb042c84b4c09e82a928e2ad"><div class="ttname"><a href="group__map__group.html#ggaa25639f3980e1fa4c64a58d3a8e4d149af7665353eb042c84b4c09e82a928e2ad">TSB_SOUTHWEST</a></div><div class="ttdoc">Both south and west corners are raised. </div><div class="ttdef"><b>Definition:</b> <a href="tile_8h_source.html#l00075">tile.h:75</a></div></div>
<div class="ttc" id="viewport_8cpp_html_adc21e3bb272d935ad38dd52bd0c03974"><div class="ttname"><a href="viewport_8cpp.html#adc21e3bb272d935ad38dd52bd0c03974">ComputeXFunction</a></div><div class="ttdeci">static int32 ComputeXFunction(int32 x, int32 y, ViewOrientation orient, uint16 width)</div><div class="ttdoc">Convert 3D position to the horizontal 2D position. </div><div class="ttdef"><b>Definition:</b> <a href="viewport_8cpp_source.html#l00122">viewport.cpp:122</a></div></div>
<div class="ttc" id="classPerson_html_ac615e9c13bb30a7f42f37eeb515275b4"><div class="ttname"><a href="classPerson.html#ac615e9c13bb30a7f42f37eeb515275b4">Person::frame_index</a></div><div class="ttdeci">uint16 frame_index</div><div class="ttdoc">Currently displayed frame of frames. </div><div class="ttdef"><b>Definition:</b> <a href="person_8h_source.html#l00137">person.h:137</a></div></div>
<div class="ttc" id="map_8h_html_ada9f0c1420f66f999469d82ef2262280ac9a76026403b7122a5b727d52ae64a3a"><div class="ttname"><a href="map_8h.html#ada9f0c1420f66f999469d82ef2262280ac9a76026403b7122a5b727d52ae64a3a">SRI_FREE</a></div><div class="ttdoc">Ride instance is not used. </div><div class="ttdef"><b>Definition:</b> <a href="map_8h_source.html#l00037">map.h:37</a></div></div>
<div class="ttc" id="classVoxelStack_html"><div class="ttname"><a href="classVoxelStack.html">VoxelStack</a></div><div class="ttdoc">One column of voxels. </div><div class="ttdef"><b>Definition:</b> <a href="map_8h_source.html#l00458">map.h:458</a></div></div>
<div class="ttc" id="geometry_8h_html_a71fcb91f44cc6cbf519d0c45c07e931d"><div class="ttname"><a href="geometry_8h.html#a71fcb91f44cc6cbf519d0c45c07e931d">XYZPoint16</a></div><div class="ttdeci">XYZPoint&lt; int16 &gt; XYZPoint16</div><div class="ttdoc">16 bit 3D point. </div><div class="ttdef"><b>Definition:</b> <a href="geometry_8h_source.html#l00119">geometry.h:119</a></div></div>
<div class="ttc" id="viewport_8cpp_html_a5801ceed6ab2a98de5e940a6044e43dd"><div class="ttname"><a href="viewport_8cpp.html#a5801ceed6ab2a98de5e940a6044e43dd">_mouse_modes</a></div><div class="ttdeci">MouseModes _mouse_modes</div><div class="ttdoc">Mouse modes in the game. </div><div class="ttdef"><b>Definition:</b> <a href="viewport_8cpp_source.html#l00096">viewport.cpp:96</a></div></div>
<div class="ttc" id="classViewport_html_a5f465ad37c17069ba5aa3d9899cddb3a"><div class="ttname"><a href="classViewport.html#a5f465ad37c17069ba5aa3d9899cddb3a">Viewport::TimeoutCallback</a></div><div class="ttdeci">void TimeoutCallback()</div><div class="ttdoc">Toggle display of world additions (in _additions) if enabled. </div><div class="ttdef"><b>Definition:</b> <a href="viewport_8cpp_source.html#l00425">viewport.cpp:425</a></div></div>
<div class="ttc" id="structDrawData_html_a353546506625aaeffb85726b311ae4ad"><div class="ttname"><a href="structDrawData.html#a353546506625aaeffb85726b311ae4ad">DrawData::sprite</a></div><div class="ttdeci">const ImageData * sprite</div><div class="ttdoc">Mouse cursor to draw. </div><div class="ttdef"><b>Definition:</b> <a href="viewport_8cpp_source.html#l00231">viewport.cpp:231</a></div></div>
<div class="ttc" id="classClippedRectangle_html"><div class="ttname"><a href="classClippedRectangle.html">ClippedRectangle</a></div><div class="ttdoc">Clipped rectangle. </div><div class="ttdef"><b>Definition:</b> <a href="video_8h_source.html#l00026">video.h:26</a></div></div>
<div class="ttc" id="classViewport_html_a505db1334014f270149f7f07b64139e0"><div class="ttname"><a href="classViewport.html#a505db1334014f270149f7f07b64139e0">Viewport::Viewport</a></div><div class="ttdeci">Viewport(const XYZPoint32 &amp;view_pos)</div><div class="ttdoc">Viewport constructor. </div><div class="ttdef"><b>Definition:</b> <a href="viewport_8cpp_source.html#l01306">viewport.cpp:1306</a></div></div>
<div class="ttc" id="viewport_8h_html_ad83c05db97e3590a5da165ead3d5792da7fbb35848771ed907fea827475f0b9b5"><div class="ttname"><a href="viewport_8h.html#ad83c05db97e3590a5da165ead3d5792da7fbb35848771ed907fea827475f0b9b5">SO_PLATFORM</a></div><div class="ttdoc">Draw platform sprites. </div><div class="ttdef"><b>Definition:</b> <a href="viewport_8h_source.html#l00088">viewport.h:88</a></div></div>
<div class="ttc" id="viewport_8h_html_a7eaf31dcf3c53b721a3144bb135f8d25ad9f72db2c1d806e711ad1b28d8e54525"><div class="ttname"><a href="viewport_8h.html#a7eaf31dcf3c53b721a3144bb135f8d25ad9f72db2c1d806e711ad1b28d8e54525">CS_NONE</a></div><div class="ttdoc">No valid sprite. </div><div class="ttdef"><b>Definition:</b> <a href="viewport_8h_source.html#l00063">viewport.h:63</a></div></div>
<div class="ttc" id="structDrawData_html_a49c4e8444e4bb48bdebdc7d947cdc7de"><div class="ttname"><a href="structDrawData.html#a49c4e8444e4bb48bdebdc7d947cdc7de">DrawData::z_height</a></div><div class="ttdeci">uint16 z_height</div><div class="ttdoc">Height of the voxel being drawn. </div><div class="ttdef"><b>Definition:</b> <a href="viewport_8cpp_source.html#l00229">viewport.cpp:229</a></div></div>
<div class="ttc" id="classVoxelWorld_html_a5bc499626f6ca0544683535d36b5917a"><div class="ttname"><a href="classVoxelWorld.html#a5bc499626f6ca0544683535d36b5917a">VoxelWorld::GetXSize</a></div><div class="ttdeci">uint16 GetXSize() const </div><div class="ttdoc">Get X voxel size of the world. </div><div class="ttdef"><b>Definition:</b> <a href="map_8h_source.html#l00534">map.h:534</a></div></div>
<div class="ttc" id="classVideoSystem_html_a09358c104a7c283a51e5474a8ea80feb"><div class="ttname"><a href="classVideoSystem.html#a09358c104a7c283a51e5474a8ea80feb">VideoSystem::FillRectangle</a></div><div class="ttdeci">void FillRectangle(const Rectangle32 &amp;rect, uint32 colour)</div><div class="ttdoc">Fill the rectangle with a single colour. </div><div class="ttdef"><b>Definition:</b> <a href="video_8cpp_source.html#l00925">video.cpp:925</a></div></div>
<div class="ttc" id="group__viewport__group_html_ggabbe637356c8cb749a9726f13658031faab0c51ec834f897eecda196d84bb6e538"><div class="ttname"><a href="group__viewport__group.html#ggabbe637356c8cb749a9726f13658031faab0c51ec834f897eecda196d84bb6e538">CUR_TYPE_ARROW_NW</a></div><div class="ttdoc">Show a build arrow in the NW direction. </div><div class="ttdef"><b>Definition:</b> <a href="viewport_8h_source.html#l00050">viewport.h:50</a></div></div>
<div class="ttc" id="classViewport_html_a9e8eb0eada3cacc538ae3a5075e96b40"><div class="ttname"><a href="classViewport.html#a9e8eb0eada3cacc538ae3a5075e96b40">Viewport::OnMouseButtonEvent</a></div><div class="ttdeci">WmMouseEvent OnMouseButtonEvent(uint8 state) override</div><div class="ttdoc">Mouse buttons changed state. </div><div class="ttdef"><b>Definition:</b> <a href="viewport_8cpp_source.html#l01591">viewport.cpp:1591</a></div></div>
<div class="ttc" id="group__map__group_html_gac3ebfef360c9e7b2049ec355ac9b3bf5"><div class="ttname"><a href="group__map__group.html#gac3ebfef360c9e7b2049ec355ac9b3bf5">SubtractOrientations</a></div><div class="ttdeci">static ViewOrientation SubtractOrientations(const ViewOrientation &amp;vor1, const ViewOrientation &amp;vor2)</div><div class="ttdoc">Subtract two view orientations from each other. </div><div class="ttdef"><b>Definition:</b> <a href="orientation_8h_source.html#l00072">orientation.h:72</a></div></div>
<div class="ttc" id="sprite__store_8h_html"><div class="ttname"><a href="sprite__store_8h.html">sprite_store.h</a></div><div class="ttdoc">Sprite storage data structure. </div></div>
<div class="ttc" id="sprite__store_8cpp_html_aceecbbda4fed58053329eced561b20fa"><div class="ttname"><a href="sprite__store_8cpp.html#aceecbbda4fed58053329eced561b20fa">_sprite_manager</a></div><div class="ttdeci">SpriteManager _sprite_manager</div><div class="ttdoc">Sprite manager. </div><div class="ttdef"><b>Definition:</b> <a href="sprite__store_8cpp_source.html#l00031">sprite_store.cpp:31</a></div></div>
<div class="ttc" id="classFinderData_html_a12e06eb2ee43fdf050b3b86956cd93bd"><div class="ttname"><a href="classFinderData.html#a12e06eb2ee43fdf050b3b86956cd93bd">FinderData::voxel_pos</a></div><div class="ttdeci">XYZPoint16 voxel_pos</div><div class="ttdoc">Position of the voxel with the closest sprite. </div><div class="ttdef"><b>Definition:</b> <a href="viewport_8h_source.html#l00116">viewport.h:116</a></div></div>
<div class="ttc" id="classSpriteCollector_html_a5a776d1ad5a016265cac6093fbf2ba53"><div class="ttname"><a href="classSpriteCollector.html#a5a776d1ad5a016265cac6093fbf2ba53">SpriteCollector::north_offsets</a></div><div class="ttdeci">Point16 north_offsets[4]</div><div class="ttdoc">For each orientation the location of the real northern corner of a tile relative to the northern disp...</div><div class="ttdef"><b>Definition:</b> <a href="viewport_8cpp_source.html#l00278">viewport.cpp:278</a></div></div>
<div class="ttc" id="group__sprites__group_html_ga1b9fba91bd870bbbf9362b661153feed"><div class="ttname"><a href="group__sprites__group.html#ga1b9fba91bd870bbbf9362b661153feed">_slope_rotation</a></div><div class="ttdeci">const uint8 _slope_rotation[NUM_SLOPE_SPRITES][4]</div><div class="ttdoc">Sprite indices of ground/surface sprites after rotation of the view. </div><div class="ttdef"><b>Definition:</b> <a href="sprite__store_8cpp_source.html#l00042">sprite_store.cpp:42</a></div></div>
<div class="ttc" id="classViewport_html_ab7074c86c413aeb1f663521b61e2279a"><div class="ttname"><a href="classViewport.html#ab7074c86c413aeb1f663521b61e2279a">Viewport::additions_displayed</a></div><div class="ttdeci">bool additions_displayed</div><div class="ttdoc">Additions in _additions are displayed to the user. </div><div class="ttdef"><b>Definition:</b> <a href="viewport_8h_source.html#l00258">viewport.h:258</a></div></div>
<div class="ttc" id="classPlatform_html_a63fbc54e00718b381f4f055a743e31a7"><div class="ttname"><a href="classPlatform.html#a63fbc54e00718b381f4f055a743e31a7">Platform::flat</a></div><div class="ttdeci">ImageData * flat[2]</div><div class="ttdoc">Flat platforms. </div><div class="ttdef"><b>Definition:</b> <a href="sprite__store_8h_source.html#l00158">sprite_store.h:158</a></div></div>
<div class="ttc" id="group__map__group_html_ggaa25639f3980e1fa4c64a58d3a8e4d149af7d8c53d029f07b71dabd91dc0350e87"><div class="ttname"><a href="group__map__group.html#ggaa25639f3980e1fa4c64a58d3a8e4d149af7d8c53d029f07b71dabd91dc0350e87">TSB_NORTHEAST</a></div><div class="ttdoc">Both north and east corners are raised. </div><div class="ttdef"><b>Definition:</b> <a href="tile_8h_source.html#l00072">tile.h:72</a></div></div>
<div class="ttc" id="group__map__group_html_gga17a68962aecf6bf22a97d7e78da6fcfbaa5de6e54f01653b72c99a96aec13d1eb"><div class="ttname"><a href="group__map__group.html#gga17a68962aecf6bf22a97d7e78da6fcfbaa5de6e54f01653b72c99a96aec13d1eb">FDT_INVALID</a></div><div class="ttdoc">Invalid foundation type. </div><div class="ttdef"><b>Definition:</b> <a href="tile_8h_source.html#l00212">tile.h:212</a></div></div>
<div class="ttc" id="classViewport_html_a2e66c565031330e9cc9c67dfedd24ec8"><div class="ttname"><a href="classViewport.html#a2e66c565031330e9cc9c67dfedd24ec8">Viewport::Rotate</a></div><div class="ttdeci">void Rotate(int direction)</div><div class="ttdoc">Rotate 90 degrees clockwise or anti-clockwise. </div><div class="ttdef"><b>Definition:</b> <a href="viewport_8cpp_source.html#l01518">viewport.cpp:1518</a></div></div>
<div class="ttc" id="viewport_8h_html_a7eaf31dcf3c53b721a3144bb135f8d25adfa7036ff7c4dcc0edbe62c3df63222b"><div class="ttname"><a href="viewport_8h.html#a7eaf31dcf3c53b721a3144bb135f8d25adfa7036ff7c4dcc0edbe62c3df63222b">CS_GROUND_EDGE</a></div><div class="ttdoc">Ground edge sprite. </div><div class="ttdef"><b>Definition:</b> <a href="viewport_8h_source.html#l00065">viewport.h:65</a></div></div>
<div class="ttc" id="classFinderData_html_ad42b1b2e05e45729a9a506ed49f40e36"><div class="ttname"><a href="classFinderData.html#ad42b1b2e05e45729a9a506ed49f40e36">FinderData::cursor</a></div><div class="ttdeci">CursorType cursor</div><div class="ttdoc">Type of cursor suggested. </div><div class="ttdef"><b>Definition:</b> <a href="viewport_8h_source.html#l00115">viewport.h:115</a></div></div>
<div class="ttc" id="structRectangle_html"><div class="ttname"><a href="structRectangle.html">Rectangle&lt; Point32, uint32 &gt;</a></div></div>
<div class="ttc" id="classViewport_html_ab2ab6f182f78c602adace74e2f2541b0"><div class="ttname"><a href="classViewport.html#ab2ab6f182f78c602adace74e2f2541b0">Viewport::OnMouseMoveEvent</a></div><div class="ttdeci">void OnMouseMoveEvent(const Point16 &amp;pos) override</div><div class="ttdoc">Mouse moved to new position. </div><div class="ttdef"><b>Definition:</b> <a href="viewport_8cpp_source.html#l01583">viewport.cpp:1583</a></div></div>
<div class="ttc" id="classEdgeCursor_html_a748737c5512a1c9811ee198d7f428f40"><div class="ttname"><a href="classEdgeCursor.html#a748737c5512a1c9811ee198d7f428f40">EdgeCursor::EdgeCursor</a></div><div class="ttdeci">EdgeCursor(Viewport *vp)</div><div class="ttdoc">Constructor of an edge cursor. </div><div class="ttdef"><b>Definition:</b> <a href="viewport_8cpp_source.html#l00663">viewport.cpp:663</a></div></div>
<div class="ttc" id="classFoundation_html"><div class="ttname"><a href="classFoundation.html">Foundation</a></div><div class="ttdoc">Foundation sprites. </div><div class="ttdef"><b>Definition:</b> <a href="sprite__store_8h_source.html#l00142">sprite_store.h:142</a></div></div>
<div class="ttc" id="classShopInstance_html_adcf705be2f439877bb4804ba73e9ec57"><div class="ttname"><a href="classShopInstance.html#adcf705be2f439877bb4804ba73e9ec57">ShopInstance::GetShopType</a></div><div class="ttdeci">const ShopType * GetShopType() const </div><div class="ttdoc">Get the shop type of the ride. </div><div class="ttdef"><b>Definition:</b> <a href="shop__type_8cpp_source.html#l00157">shop_type.cpp:157</a></div></div>
<div class="ttc" id="classMultiCursor_html_ad88a45d0d6e0d3b920ff952c67f712d8"><div class="ttname"><a href="classMultiCursor.html#ad88a45d0d6e0d3b920ff952c67f712d8">MultiCursor::GetMaxCursorHeight</a></div><div class="ttdeci">uint8 GetMaxCursorHeight(uint16 xpos, uint16 ypos, uint8 zpos) override</div><div class="ttdoc">Get the maximum height of the xpos, ypos stack that needs to be examined. </div><div class="ttdef"><b>Definition:</b> <a href="viewport_8cpp_source.html#l00609">viewport.cpp:609</a></div></div>
<div class="ttc" id="group__map__group_html_ga2006e6d6a47129230c6995222052d403"><div class="ttname"><a href="group__map__group.html#ga2006e6d6a47129230c6995222052d403">FenceType</a></div><div class="ttdeci">FenceType</div><div class="ttdoc">Available fence types. </div><div class="ttdef"><b>Definition:</b> <a href="fence_8h_source.html#l00030">fence.h:30</a></div></div>
<div class="ttc" id="classVoxelStack_html_ac44c1a794c29fd1c88f1d88f2db3c316"><div class="ttname"><a href="classVoxelStack.html#ac44c1a794c29fd1c88f1d88f2db3c316">VoxelStack::voxels</a></div><div class="ttdeci">Voxel * voxels</div><div class="ttdoc">Voxel array at this stack. </div><div class="ttdef"><b>Definition:</b> <a href="map_8h_source.html#l00475">map.h:475</a></div></div>
<div class="ttc" id="window_8cpp_html_a4e83041d9bb7c20fe3f7e8e389b2b416"><div class="ttname"><a href="window_8cpp.html#a4e83041d9bb7c20fe3f7e8e389b2b416">NotifyChange</a></div><div class="ttdeci">void NotifyChange(WindowTypes wtype, WindowNumber wnumber, ChangeCode code, uint32 parameter)</div><div class="ttdoc">Notify the window of the given type of the change with the specified number. </div><div class="ttdef"><b>Definition:</b> <a href="window_8cpp_source.html#l01054">window.cpp:1054</a></div></div>
<div class="ttc" id="classRideInstance_html_a2023a342250310d30aaa7484b66bc1c1"><div class="ttname"><a href="classRideInstance.html#a2023a342250310d30aaa7484b66bc1c1">RideInstance::GetSprites</a></div><div class="ttdeci">virtual void GetSprites(uint16 voxel_number, uint8 orient, const ImageData *sprites[4]) const =0</div><div class="ttdoc">Get the sprites to display for the provided voxel number. </div></div>
<div class="ttc" id="group__viewport__group_html_gga1e53aab612718f53f9838d49f13be786a405766c49b89f731b71be9b7b1b6f469"><div class="ttname"><a href="group__viewport__group.html#gga1e53aab612718f53f9838d49f13be786a405766c49b89f731b71be9b7b1b6f469">MM_INACTIVE</a></div><div class="ttdoc">Inactive mode. </div><div class="ttdef"><b>Definition:</b> <a href="viewport_8h_source.html#l00026">viewport.h:26</a></div></div>
<div class="ttc" id="classMultiCursor_html_ac47feb00b1711f3a6e83dc0d323f1a78"><div class="ttname"><a href="classMultiCursor.html#ac47feb00b1711f3a6e83dc0d323f1a78">MultiCursor::SetCursor</a></div><div class="ttdeci">bool SetCursor(const Rectangle32 &amp;rect, CursorType type, bool always=false)</div><div class="ttdoc">Set the area covered by the area cursor. </div><div class="ttdef"><b>Definition:</b> <a href="viewport_8cpp_source.html#l00626">viewport.cpp:626</a></div></div>
<div class="ttc" id="classBaseCursor_html_aa3a090515b45b932a3e3eed5d6be8268"><div class="ttname"><a href="classBaseCursor.html#aa3a090515b45b932a3e3eed5d6be8268">BaseCursor::vp</a></div><div class="ttdeci">Viewport * vp</div><div class="ttdoc">Parent viewport object. </div><div class="ttdef"><b>Definition:</b> <a href="viewport_8h_source.html#l00130">viewport.h:130</a></div></div>
<div class="ttc" id="classVoxelCollector_html_afa04c64dc66f1adecebe2a0d7fb2681c"><div class="ttname"><a href="classVoxelCollector.html#afa04c64dc66f1adecebe2a0d7fb2681c">VoxelCollector::vp</a></div><div class="ttdeci">Viewport * vp</div><div class="ttdoc">Parent viewport for accessing the cursors if not nullptr. </div><div class="ttdef"><b>Definition:</b> <a href="viewport_8cpp_source.html#l00195">viewport.cpp:195</a></div></div>
<div class="ttc" id="viewport_8h_html_a7eaf31dcf3c53b721a3144bb135f8d25a59ce66633650f8a1b7e56a3ca2e82cb3"><div class="ttname"><a href="viewport_8h.html#a7eaf31dcf3c53b721a3144bb135f8d25a59ce66633650f8a1b7e56a3ca2e82cb3">CS_PERSON</a></div><div class="ttdoc">Person sprite. </div><div class="ttdef"><b>Definition:</b> <a href="viewport_8h_source.html#l00068">viewport.h:68</a></div></div>
<div class="ttc" id="viewport_8h_html_ad83c05db97e3590a5da165ead3d5792daad0e0a8130cb9fbf2178cd209a80e4b0"><div class="ttname"><a href="viewport_8h.html#ad83c05db97e3590a5da165ead3d5792daad0e0a8130cb9fbf2178cd209a80e4b0">SO_FOUNDATION</a></div><div class="ttdoc">Draw foundation sprites. </div><div class="ttdef"><b>Definition:</b> <a href="viewport_8h_source.html#l00083">viewport.h:83</a></div></div>
<div class="ttc" id="classMouseMode_html_ad6a36d0faeab665730130ed0d7795b27"><div class="ttname"><a href="classMouseMode.html#ad6a36d0faeab665730130ed0d7795b27">MouseMode::EnableCursors</a></div><div class="ttdeci">virtual bool EnableCursors()=0</div><div class="ttdoc">Control display of cursors in the mouse mode. </div></div>
<div class="ttc" id="viewport_8cpp_html_ac9d508bfc28352f0f790bd6eb7567186"><div class="ttname"><a href="viewport_8cpp.html#ac9d508bfc28352f0f790bd6eb7567186">MarkVoxelDirty</a></div><div class="ttdeci">void MarkVoxelDirty(const XYZPoint16 &amp;voxel_pos, int16 height)</div><div class="ttdoc">Mark a voxel as in need of getting painted. </div><div class="ttdef"><b>Definition:</b> <a href="viewport_8cpp_source.html#l01698">viewport.cpp:1698</a></div></div>
<div class="ttc" id="classMouseMode_html_ae1ee81cf8cbf3e667627df22dde83040"><div class="ttname"><a href="classMouseMode.html#ae1ee81cf8cbf3e667627df22dde83040">MouseMode::OnMouseWheelEvent</a></div><div class="ttdeci">virtual void OnMouseWheelEvent(Viewport *vp, int direction)</div><div class="ttdoc">A mouse wheelie event has been detected. </div><div class="ttdef"><b>Definition:</b> <a href="viewport_8cpp_source.html#l01639">viewport.cpp:1639</a></div></div>
<div class="ttc" id="group__viewport__group_html_ga1e53aab612718f53f9838d49f13be786"><div class="ttname"><a href="group__viewport__group.html#ga1e53aab612718f53f9838d49f13be786">ViewportMouseMode</a></div><div class="ttdeci">ViewportMouseMode</div><div class="ttdoc">Known mouse modes. </div><div class="ttdef"><b>Definition:</b> <a href="viewport_8h_source.html#l00025">viewport.h:25</a></div></div>
<div class="ttc" id="structVoxel_html_affbc45e0be9940baf856c2ea9377b182"><div class="ttname"><a href="structVoxel.html#affbc45e0be9940baf856c2ea9377b182">Voxel::GetInstanceData</a></div><div class="ttdeci">uint16 GetInstanceData() const </div><div class="ttdoc">Get the data associated with the ride instance in this voxel. </div><div class="ttdef"><b>Definition:</b> <a href="map_8h_source.html#l00105">map.h:105</a></div></div>
<div class="ttc" id="classWindow_html_a2e6641f14a62a9b2a4853e10e0ffe5fb"><div class="ttname"><a href="classWindow.html#a2e6641f14a62a9b2a4853e10e0ffe5fb">Window::SetPosition</a></div><div class="ttdeci">void SetPosition(int x, int y)</div><div class="ttdoc">Set the position of the top-left corner of the window. </div><div class="ttdef"><b>Definition:</b> <a href="window_8cpp_source.html#l00092">window.cpp:92</a></div></div>
<div class="ttc" id="classVoxelCollector_html_ae29ba7f4a6a8787134ca8c7d1b59fb7b"><div class="ttname"><a href="classVoxelCollector.html#ae29ba7f4a6a8787134ca8c7d1b59fb7b">VoxelCollector::VoxelCollector</a></div><div class="ttdeci">VoxelCollector(Viewport *vp, bool draw_above_stack)</div><div class="ttdoc">Base class constructor. </div><div class="ttdef"><b>Definition:</b> <a href="viewport_8cpp_source.html#l00309">viewport.cpp:309</a></div></div>
<div class="ttc" id="classViewport_html_a53aec1c55bc85eccb6cf3d89d1450ba2"><div class="ttname"><a href="classViewport.html#a53aec1c55bc85eccb6cf3d89d1450ba2">Viewport::area_cursor</a></div><div class="ttdeci">MultiCursor area_cursor</div><div class="ttdoc">Cursor for showing an area. </div><div class="ttdef"><b>Definition:</b> <a href="viewport_8h_source.html#l00251">viewport.h:251</a></div></div>
<div class="ttc" id="stdafx_8h_html_adde6aaee8457bee49c2a92621fe22b79"><div class="ttname"><a href="stdafx_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a></div><div class="ttdeci">unsigned char uint8</div><div class="ttdoc">Unsigned 8 bit wide data type. </div><div class="ttdef"><b>Definition:</b> <a href="stdafx_8h_source.html#l00130">stdafx.h:130</a></div></div>
<div class="ttc" id="classEdgeCursor_html_a7d22417eaef578d4a4b3bff0877ce339"><div class="ttname"><a href="classEdgeCursor.html#a7d22417eaef578d4a4b3bff0877ce339">EdgeCursor::yoffset</a></div><div class="ttdeci">uint8 yoffset</div><div class="ttdoc">Y offset for where to render the sprite on the screen. </div><div class="ttdef"><b>Definition:</b> <a href="viewport_8h_source.html#l00204">viewport.h:204</a></div></div>
<div class="ttc" id="classSpriteStorage_html_a5279f5e16c421a883edee53599230389"><div class="ttname"><a href="classSpriteStorage.html#a5279f5e16c421a883edee53599230389">SpriteStorage::GetCornerSprite</a></div><div class="ttdeci">const ImageData * GetCornerSprite(uint8 surf_spr, ViewOrientation orient, ViewOrientation cursor) const </div><div class="ttdoc">Get a mouse tile corner sprite. </div><div class="ttdef"><b>Definition:</b> <a href="sprite__store_8h_source.html#l00550">sprite_store.h:550</a></div></div>
<div class="ttc" id="classMouseModes_html_a9226265f6e91d19901df74a7c705b2ca"><div class="ttname"><a href="classMouseModes.html#a9226265f6e91d19901df74a7c705b2ca">MouseModes::modes</a></div><div class="ttdeci">MouseMode * modes[MM_COUNT]</div><div class="ttdoc">Registered mouse modes. </div><div class="ttdef"><b>Definition:</b> <a href="viewport_8h_source.html#l00328">viewport.h:328</a></div></div>
<div class="ttc" id="structWalkInformation_html_a383c042ee2e1cf475034c8f0854e68d1"><div class="ttname"><a href="structWalkInformation.html#a383c042ee2e1cf475034c8f0854e68d1">WalkInformation::anim_type</a></div><div class="ttdeci">AnimationType anim_type</div><div class="ttdoc">Animation to display. </div><div class="ttdef"><b>Definition:</b> <a href="person_8h_source.html#l00070">person.h:70</a></div></div>
<div class="ttc" id="classPixelFinder_html_a786e481e53946859cd609c23e7e5db3d"><div class="ttname"><a href="classPixelFinder.html#a786e481e53946859cd609c23e7e5db3d">PixelFinder::PixelFinder</a></div><div class="ttdeci">PixelFinder(Viewport *vp, FinderData *fdata)</div><div class="ttdoc">Constructor of the tile position finder. </div><div class="ttdef"><b>Definition:</b> <a href="viewport_8cpp_source.html#l01152">viewport.cpp:1152</a></div></div>
<div class="ttc" id="classSpriteStorage_html"><div class="ttname"><a href="classSpriteStorage.html">SpriteStorage</a></div><div class="ttdoc">Storage of all sprites for a single tile size. </div><div class="ttdef"><b>Definition:</b> <a href="sprite__store_8h_source.html#l00471">sprite_store.h:471</a></div></div>
<div class="ttc" id="classMultiCursor_html_a53879b65a701a9a4f12dc7feb8f00dbc"><div class="ttname"><a href="classMultiCursor.html#a53879b65a701a9a4f12dc7feb8f00dbc">MultiCursor::rect</a></div><div class="ttdeci">Rectangle32 rect</div><div class="ttdoc">Rectangle with cursors. </div><div class="ttdef"><b>Definition:</b> <a href="viewport_8h_source.html#l00180">viewport.h:180</a></div></div>
<div class="ttc" id="classRecolouring_html"><div class="ttname"><a href="classRecolouring.html">Recolouring</a></div><div class="ttdoc">Sprite recolouring information. </div><div class="ttdef"><b>Definition:</b> <a href="palette_8h_source.html#l00299">palette.h:299</a></div></div>
<div class="ttc" id="viewport_8h_html_ad83c05db97e3590a5da165ead3d5792da17c758594b4dc6508cac4b2a8b2f5346"><div class="ttname"><a href="viewport_8h.html#ad83c05db97e3590a5da165ead3d5792da17c758594b4dc6508cac4b2a8b2f5346">SO_CURSOR</a></div><div class="ttdoc">Draw cursor sprites. </div><div class="ttdef"><b>Definition:</b> <a href="viewport_8h_source.html#l00097">viewport.h:97</a></div></div>
<div class="ttc" id="group__viewport__group_html_ggabbe637356c8cb749a9726f13658031faa20dc9c5aaa4401869852069ae80339ec"><div class="ttname"><a href="group__viewport__group.html#ggabbe637356c8cb749a9726f13658031faa20dc9c5aaa4401869852069ae80339ec">CUR_TYPE_WEST</a></div><div class="ttdoc">Show a W corner highlight. </div><div class="ttdef"><b>Definition:</b> <a href="viewport_8h_source.html#l00045">viewport.h:45</a></div></div>
<div class="ttc" id="structVoxel_html_acd06c81b4b17faa125e1403d5b1a357d"><div class="ttname"><a href="structVoxel.html#acd06c81b4b17faa125e1403d5b1a357d">Voxel::voxel_objects</a></div><div class="ttdeci">VoxelObject * voxel_objects</div><div class="ttdoc">First voxel object in this voxel. </div><div class="ttdef"><b>Definition:</b> <a href="map_8h_source.html#l00293">map.h:293</a></div></div>
<div class="ttc" id="group__viewport__group_html_ggabbe637356c8cb749a9726f13658031faad1b395b03ca3b5a1836c5dffbff3a3c9"><div class="ttname"><a href="group__viewport__group.html#ggabbe637356c8cb749a9726f13658031faad1b395b03ca3b5a1836c5dffbff3a3c9">CUR_TYPE_EAST</a></div><div class="ttdoc">Show a E corner highlight. </div><div class="ttdef"><b>Definition:</b> <a href="viewport_8h_source.html#l00043">viewport.h:43</a></div></div>
<div class="ttc" id="classSpriteCollector_html_a338ed55297778a47ca74984b088a99a1"><div class="ttname"><a href="classSpriteCollector.html#a338ed55297778a47ca74984b088a99a1">SpriteCollector::CollectVoxel</a></div><div class="ttdeci">void CollectVoxel(const Voxel *vx, const XYZPoint16 &amp;voxel_pos, int32 xnorth, int32 ynorth) override</div><div class="ttdoc">Add all sprites of the voxel to the set of sprites to draw. </div><div class="ttdef"><b>Definition:</b> <a href="viewport_8cpp_source.html#l00864">viewport.cpp:864</a></div></div>
<div class="ttc" id="classCursor_html_a0b0ce3458c817aa4f58cd2ffe61b5d92"><div class="ttname"><a href="classCursor.html#a0b0ce3458c817aa4f58cd2ffe61b5d92">Cursor::MarkDirty</a></div><div class="ttdeci">void MarkDirty() override</div><div class="ttdoc">Update the cursor at the screen. </div><div class="ttdef"><b>Definition:</b> <a href="viewport_8cpp_source.html#l00498">viewport.cpp:498</a></div></div>
<div class="ttc" id="viewport_8h_html_ac72850d8ae4e0c914f4227f845921a3fa12f53752e371946a6d5537d603937caf"><div class="ttname"><a href="viewport_8h.html#ac72850d8ae4e0c914f4227f845921a3fa12f53752e371946a6d5537d603937caf">FW_CORNER</a></div><div class="ttdoc">Find whole tile or corner. </div><div class="ttdef"><b>Definition:</b> <a href="viewport_8h_source.html#l00103">viewport.h:103</a></div></div>
<div class="ttc" id="shop__placement_8h_html"><div class="ttname"><a href="shop__placement_8h.html">shop_placement.h</a></div><div class="ttdoc">Definition of coordination code for shop placement. </div></div>
<div class="ttc" id="fence__build_8cpp_html_aca68d93e48151cc09b159acc3c865e24"><div class="ttname"><a href="fence__build_8cpp.html#aca68d93e48151cc09b159acc3c865e24">_fence_builder</a></div><div class="ttdeci">FenceBuildManager _fence_builder</div><div class="ttdoc">Fence build manager. </div><div class="ttdef"><b>Definition:</b> <a href="fence__build_8cpp_source.html#l00020">fence_build.cpp:20</a></div></div>
<div class="ttc" id="classViewport_html_ae13c925863ce81890b375369fc6d5781"><div class="ttname"><a href="classViewport.html#ae13c925863ce81890b375369fc6d5781">Viewport::edge_cursor</a></div><div class="ttdeci">EdgeCursor edge_cursor</div><div class="ttdoc">Cursor for showing an edge sprite. </div><div class="ttdef"><b>Definition:</b> <a href="viewport_8h_source.html#l00252">viewport.h:252</a></div></div>
<div class="ttc" id="structVoxel_html_a39b4316f246f89cc83a490c87edd7ac6"><div class="ttname"><a href="structVoxel.html#a39b4316f246f89cc83a490c87edd7ac6">Voxel::GetGroundType</a></div><div class="ttdeci">GroundType GetGroundType() const </div><div class="ttdoc">Get the ground type of a surface voxel. </div><div class="ttdef"><b>Definition:</b> <a href="map_8h_source.html#l00224">map.h:224</a></div></div>
<div class="ttc" id="viewport_8cpp_html_a9be328b0aed7cb38eacde5f17ba5cbf1"><div class="ttname"><a href="viewport_8cpp.html#a9be328b0aed7cb38eacde5f17ba5cbf1">EnableWorldAdditions</a></div><div class="ttdeci">void EnableWorldAdditions()</div><div class="ttdoc">Enable flashing display of showing proposed game world additions to the player. </div><div class="ttdef"><b>Definition:</b> <a href="viewport_8cpp_source.html#l00101">viewport.cpp:101</a></div></div>
<div class="ttc" id="classShopType_html_aeec1e71debdfda40fe02ddbc62322037"><div class="ttname"><a href="classShopType.html#aeec1e71debdfda40fe02ddbc62322037">ShopType::height</a></div><div class="ttdeci">int8 height</div><div class="ttdoc">Number of voxels used by this shop. </div><div class="ttdef"><b>Definition:</b> <a href="shop__type_8h_source.html#l00034">shop_type.h:34</a></div></div>
<div class="ttc" id="classSpriteStorage_html_ad19f0d72d47000ff2be372ef5a865e3d"><div class="ttname"><a href="classSpriteStorage.html#ad19f0d72d47000ff2be372ef5a865e3d">SpriteStorage::GetArrowSprite</a></div><div class="ttdeci">const ImageData * GetArrowSprite(uint8 spr_num, ViewOrientation orient) const </div><div class="ttdoc">Get an arrow for indicating the build direction of paths and tracks. </div><div class="ttdef"><b>Definition:</b> <a href="sprite__store_8h_source.html#l00561">sprite_store.h:561</a></div></div>
<div class="ttc" id="structDrawData_html_ac48d72511e0ea716333781b67cf28204"><div class="ttname"><a href="structDrawData.html#ac48d72511e0ea716333781b67cf28204">DrawData::base</a></div><div class="ttdeci">Point32 base</div><div class="ttdoc">Base coordinate of the image, relative to top-left of the window. </div><div class="ttdef"><b>Definition:</b> <a href="viewport_8cpp_source.html#l00232">viewport.cpp:232</a></div></div>
<div class="ttc" id="group__map__group_html_gga29bb8f9503c34074bad3c762c92ee68ba9113f1260923c7d73750d0ef8c45b659"><div class="ttname"><a href="group__map__group.html#gga29bb8f9503c34074bad3c762c92ee68ba9113f1260923c7d73750d0ef8c45b659">EDGE_BEGIN</a></div><div class="ttdoc">First valid edge. </div><div class="ttdef"><b>Definition:</b> <a href="tile_8h_source.html#l00118">tile.h:118</a></div></div>
<div class="ttc" id="group__viewport__group_html_ggabbe637356c8cb749a9726f13658031faa64df374fceaf9c135a8e730e090599d3"><div class="ttname"><a href="group__viewport__group.html#ggabbe637356c8cb749a9726f13658031faa64df374fceaf9c135a8e730e090599d3">CUR_TYPE_EDGE_SE</a></div><div class="ttdoc">Show a SE edge sprite highlight. </div><div class="ttdef"><b>Definition:</b> <a href="viewport_8h_source.html#l00052">viewport.h:52</a></div></div>
<div class="ttc" id="classMultiCursor_html_aa4242aef4d873953ebd6cda05a1bb7a4"><div class="ttname"><a href="classMultiCursor.html#aa4242aef4d873953ebd6cda05a1bb7a4">MultiCursor::zpos</a></div><div class="ttdeci">int16 zpos[10][10]</div><div class="ttdoc">Cached Z positions of the cursors (negative means not set). </div><div class="ttdef"><b>Definition:</b> <a href="viewport_8h_source.html#l00181">viewport.h:181</a></div></div>
<div class="ttc" id="classSpriteCollector_html_af7163b4b0c1657097def3b5fdce1b96c"><div class="ttname"><a href="classSpriteCollector.html#af7163b4b0c1657097def3b5fdce1b96c">SpriteCollector::GetCursorSpriteAtPos</a></div><div class="ttdeci">const ImageData * GetCursorSpriteAtPos(const XYZPoint16 &amp;voxel_pos, uint8 tslope, uint8 &amp;yoffset)</div><div class="ttdoc">Get the cursor sprite at a given voxel. </div><div class="ttdef"><b>Definition:</b> <a href="viewport_8cpp_source.html#l00759">viewport.cpp:759</a></div></div>
<div class="ttc" id="ride__type_8h_html_a7920a38ef1d6024ec5d65be22d0c3d6ea601a3d6676990bba5aa8efaf582f5bad"><div class="ttname"><a href="ride__type_8h.html#a7920a38ef1d6024ec5d65be22d0c3d6ea601a3d6676990bba5aa8efaf582f5bad">RTK_SHOP</a></div><div class="ttdoc">Ride type allows buying useful stuff. </div><div class="ttdef"><b>Definition:</b> <a href="ride__type_8h_source.html#l00034">ride_type.h:34</a></div></div>
<div class="ttc" id="group__map__group_html_gga29bb8f9503c34074bad3c762c92ee68ba91a648042eb156a3d0d9538907ce1242"><div class="ttname"><a href="group__map__group.html#gga29bb8f9503c34074bad3c762c92ee68ba91a648042eb156a3d0d9538907ce1242">EDGE_NE</a></div><div class="ttdoc">North-east edge. </div><div class="ttdef"><b>Definition:</b> <a href="tile_8h_source.html#l00119">tile.h:119</a></div></div>
<div class="ttc" id="classImageData_html_a47112f6751201d5d56b2fddbb640968d"><div class="ttname"><a href="classImageData.html#a47112f6751201d5d56b2fddbb640968d">ImageData::yoffset</a></div><div class="ttdeci">int16 yoffset</div><div class="ttdoc">Vertical offset of the image. </div><div class="ttdef"><b>Definition:</b> <a href="sprite__data_8h_source.html#l00051">sprite_data.h:51</a></div></div>
<div class="ttc" id="group__viewport__group_html_ggabbe637356c8cb749a9726f13658031faafc289eaa70cdbe934252056b9d0975d9"><div class="ttname"><a href="group__viewport__group.html#ggabbe637356c8cb749a9726f13658031faafc289eaa70cdbe934252056b9d0975d9">CUR_TYPE_ARROW_SE</a></div><div class="ttdoc">Show a build arrow in the SE direction. </div><div class="ttdef"><b>Definition:</b> <a href="viewport_8h_source.html#l00048">viewport.h:48</a></div></div>
<div class="ttc" id="classMouseMode_html_a5b714fc26b93d0f2f3a8e949aedd01a8"><div class="ttname"><a href="classMouseMode.html#a5b714fc26b93d0f2f3a8e949aedd01a8">MouseMode::MouseMode</a></div><div class="ttdeci">MouseMode(WindowTypes wtype, ViewportMouseMode mode)</div><div class="ttdoc">Constructor of a mouse mode. </div><div class="ttdef"><b>Definition:</b> <a href="viewport_8cpp_source.html#l01607">viewport.cpp:1607</a></div></div>
<div class="ttc" id="classSpriteCollector_html_ac1af86f5ebfe6ebae5514966922614d9"><div class="ttname"><a href="classSpriteCollector.html#ac1af86f5ebfe6ebae5514966922614d9">SpriteCollector::SpriteCollector</a></div><div class="ttdeci">SpriteCollector(Viewport *vp, bool enable_cursors)</div><div class="ttdoc">Constructor of sprites collector. </div><div class="ttdef"><b>Definition:</b> <a href="viewport_8cpp_source.html#l00440">viewport.cpp:440</a></div></div>
<div class="ttc" id="classVoxelCollector_html_a05a198f3b94bfff20c1bf1ccdf4ae365"><div class="ttname"><a href="classVoxelCollector.html#a05a198f3b94bfff20c1bf1ccdf4ae365">VoxelCollector::Collect</a></div><div class="ttdeci">void Collect(bool use_additions)</div><div class="ttdoc">Perform the collecting cycle. </div><div class="ttdef"><b>Definition:</b> <a href="viewport_8cpp_source.html#l00350">viewport.cpp:350</a></div></div>
<div class="ttc" id="classVoxelCollector_html_a2916f30e0ff998fd3de555d83f26676a"><div class="ttname"><a href="classVoxelCollector.html#a2916f30e0ff998fd3de555d83f26676a">VoxelCollector::CollectVoxel</a></div><div class="ttdeci">virtual void CollectVoxel(const Voxel *vx, const XYZPoint16 &amp;view_pos, int32 xnorth, int32 ynorth)=0</div><div class="ttdoc">Handle a voxel that should be collected. </div></div>
<div class="ttc" id="group__viewport__group_html_ggabbe637356c8cb749a9726f13658031faada2443b7b4951031dd7c40b248222509"><div class="ttname"><a href="group__viewport__group.html#ggabbe637356c8cb749a9726f13658031faada2443b7b4951031dd7c40b248222509">CUR_TYPE_EDGE_NW</a></div><div class="ttdoc">Show a NW edge sprite highlight. </div><div class="ttdef"><b>Definition:</b> <a href="viewport_8h_source.html#l00054">viewport.h:54</a></div></div>
<div class="ttc" id="classVoxelCollector_html_add20fd94a174adf4898834c738b57d31"><div class="ttname"><a href="classVoxelCollector.html#add20fd94a174adf4898834c738b57d31">VoxelCollector::rect</a></div><div class="ttdeci">Rectangle32 rect</div><div class="ttdoc">Screen area of interest. </div><div class="ttdef"><b>Definition:</b> <a href="viewport_8cpp_source.html#l00199">viewport.cpp:199</a></div></div>
<div class="ttc" id="terraform_8h_html"><div class="ttname"><a href="terraform_8h.html">terraform.h</a></div><div class="ttdoc">Terraform declarations. </div></div>
<div class="ttc" id="classVoxelStack_html_a26af67d6e9363114f75a6e3570a211ba"><div class="ttname"><a href="classVoxelStack.html#a26af67d6e9363114f75a6e3570a211ba">VoxelStack::height</a></div><div class="ttdeci">uint16 height</div><div class="ttdoc">Number of voxels in the stack. </div><div class="ttdef"><b>Definition:</b> <a href="map_8h_source.html#l00477">map.h:477</a></div></div>
<div class="ttc" id="classRideInstance_html_af187b2634a24756124d414639344a50f"><div class="ttname"><a href="classRideInstance.html#af187b2634a24756124d414639344a50f">RideInstance::GetKind</a></div><div class="ttdeci">RideTypeKind GetKind() const </div><div class="ttdoc">Get the kind of the ride. </div><div class="ttdef"><b>Definition:</b> <a href="ride__type_8cpp_source.html#l00171">ride_type.cpp:171</a></div></div>
<div class="ttc" id="classViewport_html_a18b4fb0ad0bcbee66ee2658498bdcc5a"><div class="ttname"><a href="classViewport.html#a18b4fb0ad0bcbee66ee2658498bdcc5a">Viewport::mouse_pos</a></div><div class="ttdeci">Point16 mouse_pos</div><div class="ttdoc">Last known position of the mouse. </div><div class="ttdef"><b>Definition:</b> <a href="viewport_8h_source.html#l00253">viewport.h:253</a></div></div>
<div class="ttc" id="classViewport_html_ae7e716461b7573afdde9171b2303ce15"><div class="ttname"><a href="classViewport.html#ae7e716461b7573afdde9171b2303ce15">Viewport::tile_cursor</a></div><div class="ttdeci">Cursor tile_cursor</div><div class="ttdoc">Cursor for selecting a tile (or tile corner). </div><div class="ttdef"><b>Definition:</b> <a href="viewport_8h_source.html#l00249">viewport.h:249</a></div></div>
<div class="ttc" id="classPerson_html_a05c0fce495dd0851d81b8bff159d3691"><div class="ttname"><a href="classPerson.html#a05c0fce495dd0851d81b8bff159d3691">Person::type</a></div><div class="ttdeci">PersonType type</div><div class="ttdoc">Type of person. </div><div class="ttdef"><b>Definition:</b> <a href="person_8h_source.html#l00131">person.h:131</a></div></div>
<div class="ttc" id="classViewport_html_a5a9bacb50913e2d5ecc22027b6096cbd"><div class="ttname"><a href="classViewport.html#a5a9bacb50913e2d5ecc22027b6096cbd">Viewport::SetUndergroundMode</a></div><div class="ttdeci">void SetUndergroundMode()</div><div class="ttdoc">Enable the underground mode view, if possible. </div><div class="ttdef"><b>Definition:</b> <a href="viewport_8cpp_source.html#l01345">viewport.cpp:1345</a></div></div>
<div class="ttc" id="sprite__data_8h_html"><div class="ttname"><a href="sprite__data_8h.html">sprite_data.h</a></div><div class="ttdoc">Code for sprite data. </div></div>
<div class="ttc" id="tile_8h_html_a656044e632368648bc674a8206ed4fd8"><div class="ttname"><a href="tile_8h.html#a656044e632368648bc674a8206ed4fd8">ComputeCornerHeight</a></div><div class="ttdeci">void ComputeCornerHeight(TileSlope slope, uint8 base_height, uint8 *output)</div><div class="ttdoc">Compute the height of the corners of an expanded ground tile. </div><div class="ttdef"><b>Definition:</b> <a href="tile__func_8cpp_source.html#l00053">tile_func.cpp:53</a></div></div>
<div class="ttc" id="group__viewport__group_html_gabbe637356c8cb749a9726f13658031fa"><div class="ttname"><a href="group__viewport__group.html#gabbe637356c8cb749a9726f13658031fa">CursorType</a></div><div class="ttdeci">CursorType</div><div class="ttdoc">Available cursor types. </div><div class="ttdef"><b>Definition:</b> <a href="viewport_8h_source.html#l00041">viewport.h:41</a></div></div>
<div class="ttc" id="tile_8h_html_a642780fc34ac497216ea98fedeacb570a270e5f363245e416dc6498991718aeaf"><div class="ttname"><a href="tile_8h.html#a642780fc34ac497216ea98fedeacb570a270e5f363245e416dc6498991718aeaf">SSP_FLAT_DOUBLE_NS</a></div><div class="ttdoc">Double height for flat terrain, north and south view. </div><div class="ttdef"><b>Definition:</b> <a href="tile_8h_source.html#l00086">tile.h:86</a></div></div>
<div class="ttc" id="map_8h_html_ada9f0c1420f66f999469d82ef2262280ae3bfbce4590e9566985d32b115b851d7"><div class="ttname"><a href="map_8h.html#ada9f0c1420f66f999469d82ef2262280ae3bfbce4590e9566985d32b115b851d7">SRI_FULL_RIDES</a></div><div class="ttdoc">First ride instance number for normal rides (created and stored in RidesManager). ...</div><div class="ttdef"><b>Definition:</b> <a href="map_8h_source.html#l00045">map.h:45</a></div></div>
<div class="ttc" id="group__map__group_html_ggad15436b50732bd9ef2b6f2efa5f400eda1ea6e1b32b16c9d9129f20da3c314a8b"><div class="ttname"><a href="group__map__group.html#ggad15436b50732bd9ef2b6f2efa5f400eda1ea6e1b32b16c9d9129f20da3c314a8b">GTP_UNDERGROUND</a></div><div class="ttdoc">Underground view. </div><div class="ttdef"><b>Definition:</b> <a href="tile_8h_source.html#l00191">tile.h:191</a></div></div>
<div class="ttc" id="structVoxel_html_aa827aa42d8c618d7e68a826494e19c7a"><div class="ttname"><a href="structVoxel.html#aa827aa42d8c618d7e68a826494e19c7a">Voxel::GetFoundationType</a></div><div class="ttdeci">FoundationType GetFoundationType() const </div><div class="ttdoc">Get the foundation type of a surface voxel. </div><div class="ttdef"><b>Definition:</b> <a href="map_8h_source.html#l00183">map.h:183</a></div></div>
<div class="ttc" id="group__map__group_html_ggaa25639f3980e1fa4c64a58d3a8e4d149a9ee2f14ed59a87a2ef111bbb570bf315"><div class="ttname"><a href="group__map__group.html#ggaa25639f3980e1fa4c64a58d3a8e4d149a9ee2f14ed59a87a2ef111bbb570bf315">TSB_NORTHWEST</a></div><div class="ttdoc">Both north and west corners are raised. </div><div class="ttdef"><b>Definition:</b> <a href="tile_8h_source.html#l00073">tile.h:73</a></div></div>
<div class="ttc" id="group__map__group_html_gabad48584a1852521ff578b647f07fdd3"><div class="ttname"><a href="group__map__group.html#gabad48584a1852521ff578b647f07fdd3">ViewOrientation</a></div><div class="ttdeci">ViewOrientation</div><div class="ttdoc">Direction of view. </div><div class="ttdef"><b>Definition:</b> <a href="orientation_8h_source.html#l00021">orientation.h:21</a></div></div>
<div class="ttc" id="group__viewport__group_html_gga1e53aab612718f53f9838d49f13be786ad119479c57cebad54988e7241f118396"><div class="ttname"><a href="group__viewport__group.html#gga1e53aab612718f53f9838d49f13be786ad119479c57cebad54988e7241f118396">MM_COUNT</a></div><div class="ttdoc">Number of mouse modes. </div><div class="ttdef"><b>Definition:</b> <a href="viewport_8h_source.html#l00034">viewport.h:34</a></div></div>
<div class="ttc" id="classVoxelWorld_html_a4b99ca56b6b030033263b1397b2bdc41"><div class="ttname"><a href="classVoxelWorld.html#a4b99ca56b6b030033263b1397b2bdc41">VoxelWorld::GetYSize</a></div><div class="ttdeci">uint16 GetYSize() const </div><div class="ttdoc">Get Y voxel size of the world. </div><div class="ttdef"><b>Definition:</b> <a href="map_8h_source.html#l00543">map.h:543</a></div></div>
<div class="ttc" id="group__map__group_html_gga29bb8f9503c34074bad3c762c92ee68bad242fafb31c89544eebffc371fcc07d5"><div class="ttname"><a href="group__map__group.html#gga29bb8f9503c34074bad3c762c92ee68bad242fafb31c89544eebffc371fcc07d5">EDGE_SE</a></div><div class="ttdoc">South-east edge. </div><div class="ttdef"><b>Definition:</b> <a href="tile_8h_source.html#l00120">tile.h:120</a></div></div>
<div class="ttc" id="classImageData_html_ad2b115162daf7ac09e9fe4392bbadafb"><div class="ttname"><a href="classImageData.html#ad2b115162daf7ac09e9fe4392bbadafb">ImageData::xoffset</a></div><div class="ttdeci">int16 xoffset</div><div class="ttdoc">Horizontal offset of the image. </div><div class="ttdef"><b>Definition:</b> <a href="sprite__data_8h_source.html#l00050">sprite_data.h:50</a></div></div>
<div class="ttc" id="group__window__group_html_gga58ad3159a8b1f24a1d3497efcd541b69afa9ace0097b96bd3c88e03c5c743684f"><div class="ttname"><a href="group__window__group.html#gga58ad3159a8b1f24a1d3497efcd541b69afa9ace0097b96bd3c88e03c5c743684f">WC_MAINDISPLAY</a></div><div class="ttdoc">Main display of the world. </div><div class="ttdef"><b>Definition:</b> <a href="window_8h_source.html#l00041">window.h:41</a></div></div>
<div class="ttc" id="viewport_8h_html_ad83c05db97e3590a5da165ead3d5792daf26502bc09ab65f9a74d9a7c3323f337"><div class="ttname"><a href="viewport_8h.html#ad83c05db97e3590a5da165ead3d5792daf26502bc09ab65f9a74d9a7c3323f337">SO_PLATFORM_FRONT</a></div><div class="ttdoc">Front of platform. </div><div class="ttdef"><b>Definition:</b> <a href="viewport_8h_source.html#l00094">viewport.h:94</a></div></div>
<div class="ttc" id="classSpriteCollector_html_a32f43c4ee8b6fb71887ac75891fc0038"><div class="ttname"><a href="classSpriteCollector.html#a32f43c4ee8b6fb71887ac75891fc0038">SpriteCollector::ground_slope</a></div><div class="ttdeci">uint8 ground_slope</div><div class="ttdoc">Imploded ground slope if ground_height is valid. </div><div class="ttdef"><b>Definition:</b> <a href="viewport_8cpp_source.html#l00281">viewport.cpp:281</a></div></div>
<div class="ttc" id="viewport_8h_html_ad83c05db97e3590a5da165ead3d5792daed4244c97084d57326a8ca2c9647e7d9"><div class="ttname"><a href="viewport_8h.html#ad83c05db97e3590a5da165ead3d5792daed4244c97084d57326a8ca2c9647e7d9">SO_SUPPORT</a></div><div class="ttdoc">Draw support sprites. </div><div class="ttdef"><b>Definition:</b> <a href="viewport_8h_source.html#l00087">viewport.h:87</a></div></div>
<div class="ttc" id="classMultiCursor_html_a3b8ef00f66c9e6727a30232def93230a"><div class="ttname"><a href="classMultiCursor.html#a3b8ef00f66c9e6727a30232def93230a">MultiCursor::GetCursor</a></div><div class="ttdeci">CursorType GetCursor(const XYZPoint16 &amp;cursor_pos) override</div><div class="ttdoc">Get a cursor. </div><div class="ttdef"><b>Definition:</b> <a href="viewport_8cpp_source.html#l00599">viewport.cpp:599</a></div></div>
<div class="ttc" id="classViewport_html_a4bb0875319aca7c984be5d106594664c"><div class="ttname"><a href="classViewport.html#a4bb0875319aca7c984be5d106594664c">Viewport::GetMaxCursorHeight</a></div><div class="ttdeci">uint8 GetMaxCursorHeight(uint16 xpos, uint16 ypos, uint8 zpos)</div><div class="ttdoc">Get the highest voxel that should be examined in a voxel stack (since cursors may be placed above all...</div><div class="ttdef"><b>Definition:</b> <a href="viewport_8cpp_source.html#l00740">viewport.cpp:740</a></div></div>
<div class="ttc" id="classViewport_html"><div class="ttname"><a href="classViewport.html">Viewport</a></div><div class="ttdoc">Class for displaying parts of the world. </div><div class="ttdef"><b>Definition:</b> <a href="viewport_8h_source.html#l00218">viewport.h:218</a></div></div>
<div class="ttc" id="group__viewport__group_html_ggabbe637356c8cb749a9726f13658031faaf34667b209126f39a5be38cbbe233edd"><div class="ttname"><a href="group__viewport__group.html#ggabbe637356c8cb749a9726f13658031faaf34667b209126f39a5be38cbbe233edd">CUR_TYPE_ARROW_SW</a></div><div class="ttdoc">Show a build arrow in the SW direction. </div><div class="ttdef"><b>Definition:</b> <a href="viewport_8h_source.html#l00049">viewport.h:49</a></div></div>
<div class="ttc" id="structVoxel_html_a78ee7c8c8e8e62d18733aed8c28cba56"><div class="ttname"><a href="structVoxel.html#a78ee7c8c8e8e62d18733aed8c28cba56">Voxel::GetInstance</a></div><div class="ttdeci">SmallRideInstance GetInstance() const </div><div class="ttdoc">Get the ride instance at this voxel. </div><div class="ttdef"><b>Definition:</b> <a href="map_8h_source.html#l00072">map.h:72</a></div></div>
<div class="ttc" id="group__map__group_html_ggad15436b50732bd9ef2b6f2efa5f400eda8bc5605f0feda73854dc3bcbb1f056e6"><div class="ttname"><a href="group__map__group.html#ggad15436b50732bd9ef2b6f2efa5f400eda8bc5605f0feda73854dc3bcbb1f056e6">GTP_CURSOR_TEST</a></div><div class="ttdoc">Test tile for hit-testing of ground-tiles. (tile, corner) </div><div class="ttdef"><b>Definition:</b> <a href="tile_8h_source.html#l00193">tile.h:193</a></div></div>
<div class="ttc" id="map_8h_html"><div class="ttname"><a href="map_8h.html">map.h</a></div><div class="ttdoc">Definition of voxels in the world. </div></div>
<div class="ttc" id="viewport_8h_html_ad83c05db97e3590a5da165ead3d5792da949bc9e76e861a6369f0594db6baf1e2"><div class="ttname"><a href="viewport_8h.html#ad83c05db97e3590a5da165ead3d5792da949bc9e76e861a6369f0594db6baf1e2">SO_RIDE_FRONT</a></div><div class="ttdoc">Ride sprite to draw after drawing the cars. </div><div class="ttdef"><b>Definition:</b> <a href="viewport_8h_source.html#l00093">viewport.h:93</a></div></div>
<div class="ttc" id="classWindow_html_a66c3f587697b7da2ccc3d33c453d1b21"><div class="ttname"><a href="classWindow.html#a66c3f587697b7da2ccc3d33c453d1b21">Window::timeout</a></div><div class="ttdeci">uint8 timeout</div><div class="ttdoc">Timeout counter. </div><div class="ttdef"><b>Definition:</b> <a href="window_8h_source.html#l00147">window.h:147</a></div></div>
<div class="ttc" id="classMultiCursor_html_a242f163f169ded10c0130c6418a35475"><div class="ttname"><a href="classMultiCursor.html#a242f163f169ded10c0130c6418a35475">MultiCursor::MarkDirty</a></div><div class="ttdeci">void MarkDirty() override</div><div class="ttdoc">Update the cursor at the screen. </div><div class="ttdef"><b>Definition:</b> <a href="viewport_8cpp_source.html#l00587">viewport.cpp:587</a></div></div>
<div class="ttc" id="classCursor_html_a170e6df8f5803a6f847f111382e97f93"><div class="ttname"><a href="classCursor.html#a170e6df8f5803a6f847f111382e97f93">Cursor::GetCursor</a></div><div class="ttdeci">CursorType GetCursor(const XYZPoint16 &amp;cursor_pos) override</div><div class="ttdoc">Get a cursor. </div><div class="ttdef"><b>Definition:</b> <a href="viewport_8cpp_source.html#l00508">viewport.cpp:508</a></div></div>
<div class="ttc" id="structPoint_html"><div class="ttname"><a href="structPoint.html">Point&lt; int32 &gt;</a></div></div>
<div class="ttc" id="classEdgeCursor_html_add804cbd3f7f592aeb0ce8b4d10502f1"><div class="ttname"><a href="classEdgeCursor.html#add804cbd3f7f592aeb0ce8b4d10502f1">EdgeCursor::GetMaxCursorHeight</a></div><div class="ttdeci">uint8 GetMaxCursorHeight(uint16 xpos, uint16 ypos, uint8 zpos) override</div><div class="ttdoc">Get the maximum height of the xpos, ypos stack that needs to be examined. </div><div class="ttdef"><b>Definition:</b> <a href="viewport_8cpp_source.html#l00684">viewport.cpp:684</a></div></div>
<div class="ttc" id="classVoxelCollector_html_a5bff23a7f703800e1fed17b40a77096e"><div class="ttname"><a href="classVoxelCollector.html#a5bff23a7f703800e1fed17b40a77096e">VoxelCollector::tile_height</a></div><div class="ttdeci">uint16 tile_height</div><div class="ttdoc">Height of a tile. </div><div class="ttdef"><b>Definition:</b> <a href="viewport_8cpp_source.html#l00192">viewport.cpp:192</a></div></div>
<div class="ttc" id="group__map__group_html_gga29bb8f9503c34074bad3c762c92ee68babd24d9c7b6e650be2bbe82b73f66cdea"><div class="ttname"><a href="group__map__group.html#gga29bb8f9503c34074bad3c762c92ee68babd24d9c7b6e650be2bbe82b73f66cdea">EDGE_COUNT</a></div><div class="ttdoc">Number of edges. </div><div class="ttdef"><b>Definition:</b> <a href="tile_8h_source.html#l00124">tile.h:124</a></div></div>
<div class="ttc" id="classVideoSystem_html_aae5730446e164c2a484a2222640d143d"><div class="ttname"><a href="classVideoSystem.html#aae5730446e164c2a484a2222640d143d">VideoSystem::MarkDisplayDirty</a></div><div class="ttdeci">void MarkDisplayDirty()</div><div class="ttdoc">Mark the entire display as being out of date (it needs the be repainted). </div><div class="ttdef"><b>Definition:</b> <a href="video_8cpp_source.html#l00295">video.cpp:295</a></div></div>
<div class="ttc" id="classVideoSystem_html_afe5066abb188fe0db4f2f5dced6a5435"><div class="ttname"><a href="classVideoSystem.html#afe5066abb188fe0db4f2f5dced6a5435">VideoSystem::SetClippedRectangle</a></div><div class="ttdeci">void SetClippedRectangle(const ClippedRectangle &amp;cr)</div><div class="ttdoc">Set the clipped area. </div><div class="ttdef"><b>Definition:</b> <a href="video_8cpp_source.html#l00320">video.cpp:320</a></div></div>
<div class="ttc" id="classPixelFinder_html_aa9f614ee6d26ac2e2d5238abab133770"><div class="ttname"><a href="classPixelFinder.html#aa9f614ee6d26ac2e2d5238abab133770">PixelFinder::allowed</a></div><div class="ttdeci">ClickableSprite allowed</div><div class="ttdoc">Sprite types looking for. </div><div class="ttdef"><b>Definition:</b> <a href="viewport_8cpp_source.html#l00293">viewport.cpp:293</a></div></div>
<div class="ttc" id="classRideInstance_html_ad022ba9e0f01e8575c505a9fd9288dc1"><div class="ttname"><a href="classRideInstance.html#ad022ba9e0f01e8575c505a9fd9288dc1">RideInstance::recolours</a></div><div class="ttdeci">Recolouring recolours</div><div class="ttdoc">Recolour map of the instance. </div><div class="ttdef"><b>Definition:</b> <a href="ride__type_8h_source.html#l00166">ride_type.h:166</a></div></div>
<div class="ttc" id="shop__type_8h_html"><div class="ttname"><a href="shop__type_8h.html">shop_type.h</a></div><div class="ttdoc">Shops. </div></div>
<div class="ttc" id="classSpriteStorage_html_af6d10f568074c53528182934f9392762"><div class="ttname"><a href="classSpriteStorage.html#af6d10f568074c53528182934f9392762">SpriteStorage::GetPathSprite</a></div><div class="ttdeci">const ImageData * GetPathSprite(uint8 type, uint8 slope, ViewOrientation orient) const </div><div class="ttdoc">Get a path tile sprite. </div><div class="ttdef"><b>Definition:</b> <a href="sprite__store_8h_source.html#l00527">sprite_store.h:527</a></div></div>
<div class="ttc" id="classViewport_html_a6587519ef53f480df211762c2d2c8ed6"><div class="ttname"><a href="classViewport.html#a6587519ef53f480df211762c2d2c8ed6">Viewport::EnsureAdditionsAreVisible</a></div><div class="ttdeci">void EnsureAdditionsAreVisible()</div><div class="ttdoc">Reset the display state of the world additions, such that they become visible directly. </div><div class="ttdef"><b>Definition:</b> <a href="viewport_8cpp_source.html#l00413">viewport.cpp:413</a></div></div>
<div class="ttc" id="classWindowManager_html_aa0e086aeee06994b6390093491149801"><div class="ttname"><a href="classWindowManager.html#aa0e086aeee06994b6390093491149801">WindowManager::top</a></div><div class="ttdeci">Window * top</div><div class="ttdoc">Top-most window in the window stack. </div><div class="ttdef"><b>Definition:</b> <a href="window_8h_source.html#l00344">window.h:344</a></div></div>
<div class="ttc" id="bitmath_8h_html_aa017116a7fddd59bc588d2b927c4854d"><div class="ttname"><a href="bitmath_8h.html#aa017116a7fddd59bc588d2b927c4854d">GB</a></div><div class="ttdeci">static uint GB(const T x, const uint8 s, const uint8 n)</div><div class="ttdoc">Fetch n bits from x, started at bit s. </div><div class="ttdef"><b>Definition:</b> <a href="bitmath_8h_source.html#l00034">bitmath.h:34</a></div></div>
<div class="ttc" id="tile_8h_html_a9e972149bbb18515cf3a69ee0d5b80ea"><div class="ttname"><a href="tile_8h.html#a9e972149bbb18515cf3a69ee0d5b80ea">IsImplodedSteepSlope</a></div><div class="ttdeci">static bool IsImplodedSteepSlope(uint8 ts)</div><div class="ttdoc">Does the imploded tile slope represent a steep slope? </div><div class="ttdef"><b>Definition:</b> <a href="tile_8h_source.html#l00137">tile.h:137</a></div></div>
<div class="ttc" id="stdafx_8h_html_ae72e6e2ae552a721f8916813a92f723b"><div class="ttname"><a href="stdafx_8h.html#ae72e6e2ae552a721f8916813a92f723b">lengthof</a></div><div class="ttdeci">#define lengthof(x)</div><div class="ttdoc">Return the length of an fixed size array. </div><div class="ttdef"><b>Definition:</b> <a href="stdafx_8h_source.html#l00157">stdafx.h:157</a></div></div>
<div class="ttc" id="stdafx_8h_html_a91ad9478d81a7aaf2593e8d9c3d06a14"><div class="ttname"><a href="stdafx_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a></div><div class="ttdeci">unsigned int uint</div><div class="ttdoc">Unsigned integer data type. </div><div class="ttdef"><b>Definition:</b> <a href="stdafx_8h_source.html#l00119">stdafx.h:119</a></div></div>
<div class="ttc" id="classViewport_html_a31d04253bf19b343e6bdce35847a5526"><div class="ttname"><a href="classViewport.html#a31d04253bf19b343e6bdce35847a5526">Viewport::underground_mode</a></div><div class="ttdeci">bool underground_mode</div><div class="ttdoc">Whether underground mode is displayed in this viewport. </div><div class="ttdef"><b>Definition:</b> <a href="viewport_8h_source.html#l00255">viewport.h:255</a></div></div>
<div class="ttc" id="classSurfaceData_html_aba304ba16029243e52e8ee14c3c00715"><div class="ttname"><a href="classSurfaceData.html#aba304ba16029243e52e8ee14c3c00715">SurfaceData::HasAllSprites</a></div><div class="ttdeci">bool HasAllSprites() const </div><div class="ttdoc">Test whether the surface is complete (has all sprites). </div><div class="ttdef"><b>Definition:</b> <a href="sprite__store_8cpp_source.html#l00298">sprite_store.cpp:298</a></div></div>
<div class="ttc" id="classWindow_html_ab35bc7185cdb4e3ccd144e3b37f3224d"><div class="ttname"><a href="classWindow.html#ab35bc7185cdb4e3ccd144e3b37f3224d">Window::SetSize</a></div><div class="ttdeci">virtual void SetSize(uint width, uint height)</div><div class="ttdoc">Set the initial size of a window. </div><div class="ttdef"><b>Definition:</b> <a href="window_8cpp_source.html#l00081">window.cpp:81</a></div></div>
<div class="ttc" id="classFinderData_html_ac97548057108cffaeada475e1d02d6d5"><div class="ttname"><a href="classFinderData.html#ac97548057108cffaeada475e1d02d6d5">FinderData::person</a></div><div class="ttdeci">const Person * person</div><div class="ttdoc">Found person, if any. </div><div class="ttdef"><b>Definition:</b> <a href="viewport_8h_source.html#l00117">viewport.h:117</a></div></div>
<div class="ttc" id="classViewport_html_a51aea10995fec2c7d0c2a9b8202e2fdb"><div class="ttname"><a href="classViewport.html#a51aea10995fec2c7d0c2a9b8202e2fdb">Viewport::arrow_cursor</a></div><div class="ttdeci">Cursor arrow_cursor</div><div class="ttdoc">Cursor for showing the path/track build direction. </div><div class="ttdef"><b>Definition:</b> <a href="viewport_8h_source.html#l00250">viewport.h:250</a></div></div>
<div class="ttc" id="group__map__group_html_ggaa25639f3980e1fa4c64a58d3a8e4d149a64eb675ab6505f4cab2b51475aad7ddb"><div class="ttname"><a href="group__map__group.html#ggaa25639f3980e1fa4c64a58d3a8e4d149a64eb675ab6505f4cab2b51475aad7ddb">TSB_STEEP</a></div><div class="ttdoc">Bit denoting it is a steep slope. </div><div class="ttdef"><b>Definition:</b> <a href="tile_8h_source.html#l00069">tile.h:69</a></div></div>
<div class="ttc" id="classMouseMode_html_aaa7f13619e5a1bcebbfa3789f5ef1da9"><div class="ttname"><a href="classMouseMode.html#aaa7f13619e5a1bcebbfa3789f5ef1da9">MouseMode::wtype</a></div><div class="ttdeci">const WindowTypes wtype</div><div class="ttdoc">Type of window associated with this mouse mode. </div><div class="ttdef"><b>Definition:</b> <a href="viewport_8h_source.html#l00299">viewport.h:299</a></div></div>
<div class="ttc" id="group__map__group_html_ga5c4cddbc2042d88434691f0b2d00db45"><div class="ttname"><a href="group__map__group.html#ga5c4cddbc2042d88434691f0b2d00db45">AddOrientations</a></div><div class="ttdeci">static ViewOrientation AddOrientations(const ViewOrientation &amp;vor1, const ViewOrientation &amp;vor2)</div><div class="ttdoc">Add two view orientations together. </div><div class="ttdef"><b>Definition:</b> <a href="orientation_8h_source.html#l00060">orientation.h:60</a></div></div>
<div class="ttc" id="group__window__group_html_ga58ad3159a8b1f24a1d3497efcd541b69"><div class="ttname"><a href="group__window__group.html#ga58ad3159a8b1f24a1d3497efcd541b69">WindowTypes</a></div><div class="ttdeci">WindowTypes</div><div class="ttdoc">Available types of windows. </div><div class="ttdef"><b>Definition:</b> <a href="window_8h_source.html#l00040">window.h:40</a></div></div>
<div class="ttc" id="palette_8h_html"><div class="ttname"><a href="palette_8h.html">palette.h</a></div><div class="ttdoc">8bpp palette definitions. </div></div>
<div class="ttc" id="classSpriteCollector_html_a40d01ca6dd6a52cbe6a61a39c2c3be42"><div class="ttname"><a href="classSpriteCollector.html#a40d01ca6dd6a52cbe6a61a39c2c3be42">SpriteCollector::enable_cursors</a></div><div class="ttdeci">bool enable_cursors</div><div class="ttdoc">Enable cursor drawing. </div><div class="ttdef"><b>Definition:</b> <a href="viewport_8cpp_source.html#l00270">viewport.cpp:270</a></div></div>
<div class="ttc" id="classSpriteCollector_html_a36f7a47d5a87c4d5f24d0f0e0641c742"><div class="ttname"><a href="classSpriteCollector.html#a36f7a47d5a87c4d5f24d0f0e0641c742">SpriteCollector::xoffset</a></div><div class="ttdeci">int16 xoffset</div><div class="ttdoc">Horizontal offset of the top-left coordinate to the top-left of the display. </div><div class="ttdef"><b>Definition:</b> <a href="viewport_8cpp_source.html#l00268">viewport.cpp:268</a></div></div>
<div class="ttc" id="structPoint_html_a56c3dcea91f03182921eea9a5cf555a3"><div class="ttname"><a href="structPoint.html#a56c3dcea91f03182921eea9a5cf555a3">Point::y</a></div><div class="ttdeci">CT y</div><div class="ttdoc">Y coordinate. </div><div class="ttdef"><b>Definition:</b> <a href="geometry_8h_source.html#l00037">geometry.h:37</a></div></div>
<div class="ttc" id="group__window__group_html_gga58ad3159a8b1f24a1d3497efcd541b69a5b978e5218b282017d08c1144c9beb37"><div class="ttname"><a href="group__window__group.html#gga58ad3159a8b1f24a1d3497efcd541b69a5b978e5218b282017d08c1144c9beb37">WC_NONE</a></div><div class="ttdoc">Invalid window type. </div><div class="ttdef"><b>Definition:</b> <a href="window_8h_source.html#l00058">window.h:58</a></div></div>
<div class="ttc" id="classPerson_html"><div class="ttname"><a href="classPerson.html">Person</a></div><div class="ttdoc">Class of a person in the world. </div><div class="ttdef"><b>Definition:</b> <a href="person_8h_source.html#l00096">person.h:96</a></div></div>
<div class="ttc" id="classShopInstance_html"><div class="ttname"><a href="classShopInstance.html">ShopInstance</a></div><div class="ttdoc">Shop &#39;ride&#39;. </div><div class="ttdef"><b>Definition:</b> <a href="shop__type_8h_source.html#l00042">shop_type.h:42</a></div></div>
<div class="ttc" id="viewport_8cpp_html_a072daf482c5a3aaf1d74d62e5dc91bad"><div class="ttname"><a href="viewport_8cpp.html#a072daf482c5a3aaf1d74d62e5dc91bad">_additions</a></div><div class="ttdeci">WorldAdditions _additions</div><div class="ttdoc">Proposed additions to the game world. </div><div class="ttdef"><b>Definition:</b> <a href="viewport_8cpp_source.html#l00095">viewport.cpp:95</a></div></div>
<div class="ttc" id="group__map__group_html_gga29bb8f9503c34074bad3c762c92ee68baa49ed1ec0f987e5a1d8a9196ff848658"><div class="ttname"><a href="group__map__group.html#gga29bb8f9503c34074bad3c762c92ee68baa49ed1ec0f987e5a1d8a9196ff848658">EDGE_SW</a></div><div class="ttdoc">South-west edge. </div><div class="ttdef"><b>Definition:</b> <a href="tile_8h_source.html#l00121">tile.h:121</a></div></div>
<div class="ttc" id="classImageData_html"><div class="ttname"><a href="classImageData.html">ImageData</a></div><div class="ttdoc">Image data of 8bpp images. </div><div class="ttdef"><b>Definition:</b> <a href="sprite__data_8h_source.html#l00028">sprite_data.h:28</a></div></div>
<div class="ttc" id="viewport_8h_html_ad83c05db97e3590a5da165ead3d5792daf5536f8df54a61641fa9f4c544544df2"><div class="ttname"><a href="viewport_8h.html#ad83c05db97e3590a5da165ead3d5792daf5536f8df54a61641fa9f4c544544df2">SO_FENCE_BACK</a></div><div class="ttdoc">Draw fence on the back edges. </div><div class="ttdef"><b>Definition:</b> <a href="viewport_8h_source.html#l00086">viewport.h:86</a></div></div>
<div class="ttc" id="classVoxelObject_html_aec92d138c7b5b3622575aee15986fad4"><div class="ttname"><a href="classVoxelObject.html#aec92d138c7b5b3622575aee15986fad4">VoxelObject::GetSprite</a></div><div class="ttdeci">virtual const ImageData * GetSprite(const SpriteStorage *sprites, ViewOrientation orient, const Recolouring **recolour) const =0</div><div class="ttdoc">Get the sprite to draw for the voxel object. </div></div>
<div class="ttc" id="classViewport_html_a6bd1183c6460d8561206839907d9f05f"><div class="ttname"><a href="classViewport.html#a6bd1183c6460d8561206839907d9f05f">Viewport::additions_enabled</a></div><div class="ttdeci">bool additions_enabled</div><div class="ttdoc">Flashing of world additions is enabled. </div><div class="ttdef"><b>Definition:</b> <a href="viewport_8h_source.html#l00254">viewport.h:254</a></div></div>
<div class="ttc" id="classWindow_html_a1b03fb3cf0a71a48f34c31ec691a50ef"><div class="ttname"><a href="classWindow.html#a1b03fb3cf0a71a48f34c31ec691a50ef">Window::wtype</a></div><div class="ttdeci">const WindowTypes wtype</div><div class="ttdoc">Window type. </div><div class="ttdef"><b>Definition:</b> <a href="window_8h_source.html#l00140">window.h:140</a></div></div>
<div class="ttc" id="classMouseMode_html_a36e8aab8b458d9d1973388e5813a1af4"><div class="ttname"><a href="classMouseMode.html#a36e8aab8b458d9d1973388e5813a1af4">MouseMode::LeaveMode</a></div><div class="ttdeci">virtual void LeaveMode()=0</div><div class="ttdoc">Notification that the mouse mode is about to be disabled. </div></div>
<div class="ttc" id="stdafx_8h_html_a6c2edf1e500e498b687567418bf4fef6"><div class="ttname"><a href="stdafx_8h.html#a6c2edf1e500e498b687567418bf4fef6">NOT_REACHED</a></div><div class="ttdeci">#define NOT_REACHED()</div><div class="ttdoc">Macro for reporting reaching an &#39;impossible&#39; position in the code. </div><div class="ttdef"><b>Definition:</b> <a href="stdafx_8h_source.html#l00182">stdafx.h:182</a></div></div>
<div class="ttc" id="classVoxelCollector_html_a4a9d577a8b54caf8acb14a7fadda1c61"><div class="ttname"><a href="classVoxelCollector.html#a4a9d577a8b54caf8acb14a7fadda1c61">VoxelCollector::SetWindowSize</a></div><div class="ttdeci">void SetWindowSize(int16 xpos, int16 ypos, uint16 width, uint16 height)</div><div class="ttdoc">Set screen area of interest (relative to the (Viewport::view_pos position). </div><div class="ttdef"><b>Definition:</b> <a href="viewport_8cpp_source.html#l00335">viewport.cpp:335</a></div></div>
<div class="ttc" id="classViewport_html_a57afb1b609dc0d7bed80ca49d5e3a41b"><div class="ttname"><a href="classViewport.html#a57afb1b609dc0d7bed80ca49d5e3a41b">Viewport::GetCursorAtPos</a></div><div class="ttdeci">CursorType GetCursorAtPos(const XYZPoint16 &amp;voxel_pos)</div><div class="ttdoc">Get the cursor type at a given position. </div><div class="ttdef"><b>Definition:</b> <a href="viewport_8cpp_source.html#l00718">viewport.cpp:718</a></div></div>
<div class="ttc" id="group__map__group_html_gga2006e6d6a47129230c6995222052d403a734eae0c9da8eb09787d5746d5b995f4"><div class="ttname"><a href="group__map__group.html#gga2006e6d6a47129230c6995222052d403a734eae0c9da8eb09787d5746d5b995f4">FENCE_TYPE_INVALID</a></div><div class="ttdoc">Value representing an invalid/non-existing fence type. </div><div class="ttdef"><b>Definition:</b> <a href="fence_8h_source.html#l00038">fence.h:38</a></div></div>
<div class="ttc" id="classVoxelCollector_html_a888574dccee18b193ec92b4a6d732250"><div class="ttname"><a href="classVoxelCollector.html#a888574dccee18b193ec92b4a6d732250">VoxelCollector::ComputeX</a></div><div class="ttdeci">int32 ComputeX(int32 x, int32 y)</div><div class="ttdoc">Convert 3D position to the horizontal 2D position. </div><div class="ttdef"><b>Definition:</b> <a href="viewport_8cpp_source.html#l00173">viewport.cpp:173</a></div></div>
<div class="ttc" id="classBaseCursor_html_a436af4c6441ec1ffb0f747c9127e7c02"><div class="ttname"><a href="classBaseCursor.html#a436af4c6441ec1ffb0f747c9127e7c02">BaseCursor::type</a></div><div class="ttdeci">CursorType type</div><div class="ttdoc">Type of cursor. </div><div class="ttdef"><b>Definition:</b> <a href="viewport_8h_source.html#l00131">viewport.h:131</a></div></div>
<div class="ttc" id="classRideInstance_html"><div class="ttname"><a href="classRideInstance.html">RideInstance</a></div><div class="ttdoc">A ride in the park. </div><div class="ttdef"><b>Definition:</b> <a href="ride__type_8h_source.html#l00134">ride_type.h:134</a></div></div>
<div class="ttc" id="group__viewport__group_html_ggabbe637356c8cb749a9726f13658031faabf1f1bb0d119811c2f6816593a298233"><div class="ttname"><a href="group__viewport__group.html#ggabbe637356c8cb749a9726f13658031faabf1f1bb0d119811c2f6816593a298233">CUR_TYPE_EDGE_NE</a></div><div class="ttdoc">Show a NE edge sprite highlight. </div><div class="ttdef"><b>Definition:</b> <a href="viewport_8h_source.html#l00051">viewport.h:51</a></div></div>
<div class="ttc" id="terraform_8cpp_html_ab25c1f13e11bd2df46101e44b3e1760e"><div class="ttname"><a href="terraform_8cpp.html#ab25c1f13e11bd2df46101e44b3e1760e">_terraformer</a></div><div class="ttdeci">TileTerraformMouseMode _terraformer</div><div class="ttdoc">Terraform coordination object. </div><div class="ttdef"><b>Definition:</b> <a href="terraform_8cpp_source.html#l00020">terraform.cpp:20</a></div></div>
<div class="ttc" id="classViewport_html_a1e0a1af618c67fcef5d46e809bfcfe01"><div class="ttname"><a href="classViewport.html#a1e0a1af618c67fcef5d46e809bfcfe01">Viewport::IsUndergroundModeAvailable</a></div><div class="ttdeci">bool IsUndergroundModeAvailable() const </div><div class="ttdoc">Can the viewport switch to underground mode view? </div><div class="ttdef"><b>Definition:</b> <a href="viewport_8cpp_source.html#l01338">viewport.cpp:1338</a></div></div>
<div class="ttc" id="classViewport_html_aba252f1b77ad16f08f7d828de99c16b1"><div class="ttname"><a href="classViewport.html#aba252f1b77ad16f08f7d828de99c16b1">Viewport::MoveViewport</a></div><div class="ttdeci">void MoveViewport(int dx, int dy)</div><div class="ttdoc">Move the viewport a number of screen pixels. </div><div class="ttdef"><b>Definition:</b> <a href="viewport_8cpp_source.html#l01569">viewport.cpp:1569</a></div></div>
<div class="ttc" id="classSpriteStorage_html_ab064529c8a44aa3168fdae0033f22c5a"><div class="ttname"><a href="classSpriteStorage.html#ab064529c8a44aa3168fdae0033f22c5a">SpriteStorage::platform</a></div><div class="ttdeci">Platform platform</div><div class="ttdoc">Platform block. </div><div class="ttdef"><b>Definition:</b> <a href="sprite__store_8h_source.html#l00594">sprite_store.h:594</a></div></div>
<div class="ttc" id="group__viewport__group_html_ggabbe637356c8cb749a9726f13658031faa5e75ae003f5020916655bd0bf0248c4a"><div class="ttname"><a href="group__viewport__group.html#ggabbe637356c8cb749a9726f13658031faa5e75ae003f5020916655bd0bf0248c4a">CUR_TYPE_ARROW_NE</a></div><div class="ttdoc">Show a build arrow in the NE direction. </div><div class="ttdef"><b>Definition:</b> <a href="viewport_8h_source.html#l00047">viewport.h:47</a></div></div>
<div class="ttc" id="structDrawData_html_a9ed124116c1db658f237dfdc890f4bdb"><div class="ttname"><a href="structDrawData.html#a9ed124116c1db658f237dfdc890f4bdb">DrawData::order</a></div><div class="ttdeci">SpriteOrder order</div><div class="ttdoc">Selection when to draw this sprite (sorts sprites within a voxel). </div><div class="ttdef"><b>Definition:</b> <a href="viewport_8cpp_source.html#l00230">viewport.cpp:230</a></div></div>
<div class="ttc" id="classEdgeCursor_html_ab266e20df1669efe15186b5feafeae98"><div class="ttname"><a href="classEdgeCursor.html#ab266e20df1669efe15186b5feafeae98">EdgeCursor::GetCursor</a></div><div class="ttdeci">CursorType GetCursor(const XYZPoint16 &amp;cursor_pos) override</div><div class="ttdoc">Get a cursor. </div><div class="ttdef"><b>Definition:</b> <a href="viewport_8cpp_source.html#l00678">viewport.cpp:678</a></div></div>
<div class="ttc" id="group__map__group_html_ggaa25639f3980e1fa4c64a58d3a8e4d149a8932fe03caacc5e226e54b5ee3a20395"><div class="ttname"><a href="group__map__group.html#ggaa25639f3980e1fa4c64a58d3a8e4d149a8932fe03caacc5e226e54b5ee3a20395">TSB_SOUTHEAST</a></div><div class="ttdoc">Both south and east corners are raised. </div><div class="ttdef"><b>Definition:</b> <a href="tile_8h_source.html#l00074">tile.h:74</a></div></div>
<div class="ttc" id="classMultiCursor_html_ac81c3926d3d49b3854c5920e256b0330"><div class="ttname"><a href="classMultiCursor.html#ac81c3926d3d49b3854c5920e256b0330">MultiCursor::ResetZPosition</a></div><div class="ttdeci">void ResetZPosition(const Point32 &amp;pos)</div><div class="ttdoc">Reset the cached height of a voxel in the area. </div><div class="ttdef"><b>Definition:</b> <a href="viewport_8cpp_source.html#l00561">viewport.cpp:561</a></div></div>
<div class="ttc" id="classSpriteStorage_html_ad735c5e00e33b28c30799ddc59f35e35"><div class="ttname"><a href="classSpriteStorage.html#ad735c5e00e33b28c30799ddc59f35e35">SpriteStorage::foundation</a></div><div class="ttdeci">Foundation foundation[FDT_COUNT]</div><div class="ttdoc">Foundation. </div><div class="ttdef"><b>Definition:</b> <a href="sprite__store_8h_source.html#l00593">sprite_store.h:593</a></div></div>
<div class="ttc" id="structPoint_html_af0836c7f2eec563aa7bc20d8cfa5dd2a"><div class="ttname"><a href="structPoint.html#af0836c7f2eec563aa7bc20d8cfa5dd2a">Point::x</a></div><div class="ttdeci">CT x</div><div class="ttdoc">X coordinate. </div><div class="ttdef"><b>Definition:</b> <a href="geometry_8h_source.html#l00036">geometry.h:36</a></div></div>
<div class="ttc" id="structRectangle_html_ad341d4fed90dabd15f48d4291431c9f0"><div class="ttname"><a href="structRectangle.html#ad341d4fed90dabd15f48d4291431c9f0">Rectangle::IsPointInside</a></div><div class="ttdeci">bool IsPointInside(const Point&lt; CT &gt; &amp;pt)</div><div class="ttdoc">Is a given coordinate inside the rectangle? </div><div class="ttdef"><b>Definition:</b> <a href="geometry_8h_source.html#l00251">geometry.h:251</a></div></div>
<div class="ttc" id="group__map__group_html_ga3622a3eda6865ce3e357b761e4f42dbda5e3d5c99fbf6ee6d9a6dab627f0f32e3"><div class="ttname"><a href="group__map__group.html#ga3622a3eda6865ce3e357b761e4f42dbda5e3d5c99fbf6ee6d9a6dab627f0f32e3">PATH_RAMP_SW</a></div><div class="ttdoc">Ramp from SW up to NE. </div><div class="ttdef"><b>Definition:</b> <a href="path_8h_source.html#l00082">path.h:82</a></div></div>
<div class="ttc" id="classVoxelObject_html_a4f033bfae34c4b46acaf1f9f2c7ec404"><div class="ttname"><a href="classVoxelObject.html#a4f033bfae34c4b46acaf1f9f2c7ec404">VoxelObject::next_object</a></div><div class="ttdeci">VoxelObject * next_object</div><div class="ttdoc">Next voxel object in the linked list. </div><div class="ttdef"><b>Definition:</b> <a href="map_8h_source.html#l00354">map.h:354</a></div></div>
<div class="ttc" id="classWindow_html_a0f262fea5cd10c0382ad8a0e5cd9ff45"><div class="ttname"><a href="classWindow.html#a0f262fea5cd10c0382ad8a0e5cd9ff45">Window::lower</a></div><div class="ttdeci">Window * lower</div><div class="ttdoc">Window below this window (managed by WindowManager). </div><div class="ttdef"><b>Definition:</b> <a href="window_8h_source.html#l00150">window.h:150</a></div></div>
<div class="ttc" id="classMouseModes_html"><div class="ttname"><a href="classMouseModes.html">MouseModes</a></div><div class="ttdoc">All mouse modes. </div><div class="ttdef"><b>Definition:</b> <a href="viewport_8h_source.html#l00315">viewport.h:315</a></div></div>
<div class="ttc" id="group__viewport__group_html_ggabbe637356c8cb749a9726f13658031faae83492340bb582cb358889cfd11d7672"><div class="ttname"><a href="group__viewport__group.html#ggabbe637356c8cb749a9726f13658031faae83492340bb582cb358889cfd11d7672">CUR_TYPE_INVALID</a></div><div class="ttdoc">Invalid/unused cursor. </div><div class="ttdef"><b>Definition:</b> <a href="viewport_8h_source.html#l00056">viewport.h:56</a></div></div>
<div class="ttc" id="classVideoSystem_html_a8c406a287d4aaa5ad390327d6437dee5"><div class="ttname"><a href="classVideoSystem.html#a8c406a287d4aaa5ad390327d6437dee5">VideoSystem::BlitImage</a></div><div class="ttdeci">void BlitImage(const Point32 &amp;img_base, const ImageData *spr, const Recolouring &amp;recolour, GradientShift shift)</div><div class="ttdoc">Blit pixels from the spr relative to blit_rect into the area. </div><div class="ttdef"><b>Definition:</b> <a href="video_8h_source.html#l00137">video.h:137</a></div></div>
<div class="ttc" id="classVoxelWorld_html_a2a8445ac1efd4315e64819a61ab8e94a"><div class="ttname"><a href="classVoxelWorld.html#a2a8445ac1efd4315e64819a61ab8e94a">VoxelWorld::GetGroundHeight</a></div><div class="ttdeci">uint8 GetGroundHeight(uint16 x, uint16 y) const </div><div class="ttdoc">Return the base height of the ground at the given voxel stack. </div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l00468">map.cpp:468</a></div></div>
<div class="ttc" id="group__window__group_html_gac5457c01326811dc155c7660ba2190a0"><div class="ttname"><a href="group__window__group.html#gac5457c01326811dc155c7660ba2190a0">WmMouseEvent</a></div><div class="ttdeci">WmMouseEvent</div><div class="ttdoc">Mouse events of the window manager. </div><div class="ttdef"><b>Definition:</b> <a href="window_8h_source.html#l00095">window.h:95</a></div></div>
<div class="ttc" id="classSpriteStorage_html_ae435eacf1c908620f709e18468cc925b"><div class="ttname"><a href="classSpriteStorage.html#ae435eacf1c908620f709e18468cc925b">SpriteStorage::GetSurfaceSprite</a></div><div class="ttdeci">const ImageData * GetSurfaceSprite(uint8 type, uint8 surf_spr, ViewOrientation orient) const </div><div class="ttdoc">Get a ground sprite. </div><div class="ttdef"><b>Definition:</b> <a href="sprite__store_8h_source.html#l00487">sprite_store.h:487</a></div></div>
<div class="ttc" id="group__map__group_html_ggabad48584a1852521ff578b647f07fdd3ab9f340d6a90130e2bcc75d5be2af447e"><div class="ttname"><a href="group__map__group.html#ggabad48584a1852521ff578b647f07fdd3ab9f340d6a90130e2bcc75d5be2af447e">VOR_EAST</a></div><div class="ttdoc">View with top of the world to the east. </div><div class="ttdef"><b>Definition:</b> <a href="orientation_8h_source.html#l00023">orientation.h:23</a></div></div>
<div class="ttc" id="classViewport_html_a7b202069fc87026639e7cf8ebe6156f7"><div class="ttname"><a href="classViewport.html#a7b202069fc87026639e7cf8ebe6156f7">Viewport::OnMouseWheelEvent</a></div><div class="ttdeci">void OnMouseWheelEvent(int direction) override</div><div class="ttdoc">Mousewheel rotated. </div><div class="ttdef"><b>Definition:</b> <a href="viewport_8cpp_source.html#l01597">viewport.cpp:1597</a></div></div>
</div><!-- fragment --></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Wed Feb 25 2015 13:22:40 for FreeRCT by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.8
</small></address>
</body>
</html>
